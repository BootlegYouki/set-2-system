{"version":3,"file":"_server-DifchG9t.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/dashboard/_server.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { a as connectToDatabase } from \"../../../../chunks/db.js\";\nasync function GET() {\n  try {\n    const db = await connectToDatabase();\n    const studentsCount = await db.collection(\"users\").countDocuments({\n      account_type: \"student\",\n      $or: [\n        { status: { $exists: false } },\n        { status: \"active\" }\n      ]\n    });\n    const teachersCount = await db.collection(\"users\").countDocuments({\n      account_type: \"teacher\",\n      $or: [\n        { status: { $exists: false } },\n        { status: \"active\" }\n      ]\n    });\n    const sectionsCount = await db.collection(\"sections\").countDocuments({\n      status: \"active\"\n    });\n    const roomsCount = await db.collection(\"rooms\").countDocuments({});\n    const statistics = {\n      students: studentsCount,\n      teachers: teachersCount,\n      sections: sectionsCount,\n      rooms: roomsCount\n    };\n    return json({\n      success: true,\n      data: statistics\n    });\n  } catch (error) {\n    console.error(\"Error fetching dashboard statistics:\", error);\n    return json({\n      success: false,\n      error: \"Failed to fetch dashboard statistics\"\n    }, { status: 500 });\n  }\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;AAEA,eAAe,GAAG,GAAG;AACrB,EAAE,IAAI;AACN,IAAI,MAAM,EAAE,GAAG,MAAM,iBAAiB,EAAE;AACxC,IAAI,MAAM,aAAa,GAAG,MAAM,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC;AACtE,MAAM,YAAY,EAAE,SAAS;AAC7B,MAAM,GAAG,EAAE;AACX,QAAQ,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE;AACtC,QAAQ,EAAE,MAAM,EAAE,QAAQ;AAC1B;AACA,KAAK,CAAC;AACN,IAAI,MAAM,aAAa,GAAG,MAAM,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC;AACtE,MAAM,YAAY,EAAE,SAAS;AAC7B,MAAM,GAAG,EAAE;AACX,QAAQ,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE;AACtC,QAAQ,EAAE,MAAM,EAAE,QAAQ;AAC1B;AACA,KAAK,CAAC;AACN,IAAI,MAAM,aAAa,GAAG,MAAM,EAAE,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,cAAc,CAAC;AACzE,MAAM,MAAM,EAAE;AACd,KAAK,CAAC;AACN,IAAI,MAAM,UAAU,GAAG,MAAM,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,EAAE,CAAC;AACtE,IAAI,MAAM,UAAU,GAAG;AACvB,MAAM,QAAQ,EAAE,aAAa;AAC7B,MAAM,QAAQ,EAAE,aAAa;AAC7B,MAAM,QAAQ,EAAE,aAAa;AAC7B,MAAM,KAAK,EAAE;AACb,KAAK;AACL,IAAI,OAAO,IAAI,CAAC;AAChB,MAAM,OAAO,EAAE,IAAI;AACnB,MAAM,IAAI,EAAE;AACZ,KAAK,CAAC;AACN,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,sCAAsC,EAAE,KAAK,CAAC;AAChE,IAAI,OAAO,IAAI,CAAC;AAChB,MAAM,OAAO,EAAE,KAAK;AACpB,MAAM,KAAK,EAAE;AACb,KAAK,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AACvB,EAAE;AACF;;;;"}