{"version":3,"file":"_server-l9IC5Sm7.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/users/_server.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { q as query } from \"../../../../chunks/db.js\";\nasync function GET({ url }) {\n  try {\n    const action = url.searchParams.get(\"action\");\n    switch (action) {\n      case \"teachers\":\n        const teachersResult = await query(`\n          SELECT \n            id,\n            account_number,\n            full_name,\n            first_name,\n            last_name,\n            middle_initial,\n            email,\n            account_type,\n            created_at,\n            updated_at\n          FROM users \n          WHERE account_type = 'teacher' \n          AND (status IS NULL OR status = 'active')\n          ORDER BY first_name, last_name\n        `);\n        const teachers = teachersResult.rows.map((teacher) => ({\n          id: teacher.id,\n          accountNumber: teacher.account_number,\n          fullName: teacher.full_name,\n          first_name: teacher.first_name,\n          last_name: teacher.last_name,\n          middleInitial: teacher.middle_initial,\n          email: teacher.email,\n          accountType: teacher.account_type,\n          createdAt: teacher.created_at,\n          updatedAt: teacher.updated_at\n        }));\n        return json({ success: true, data: teachers });\n      default:\n        return json({ error: \"Invalid action parameter\" }, { status: 400 });\n    }\n  } catch (error) {\n    console.error(\"Error in /api/users:\", error);\n    if (error.code === \"ECONNREFUSED\" || error.code === \"ENOTFOUND\") {\n      return json({ error: \"Database connection failed\" }, { status: 503 });\n    }\n    return json({ error: \"Failed to fetch user data\" }, { status: 500 });\n  }\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;AAEA,eAAe,GAAG,CAAC,EAAE,GAAG,EAAE,EAAE;AAC5B,EAAE,IAAI;AACN,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC;AACjD,IAAI,QAAQ,MAAM;AAClB,MAAM,KAAK,UAAU;AACrB,QAAQ,MAAM,cAAc,GAAG,MAAM,KAAK,CAAC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,CAAC,CAAC;AACV,QAAQ,MAAM,QAAQ,GAAG,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,MAAM;AAC/D,UAAU,EAAE,EAAE,OAAO,CAAC,EAAE;AACxB,UAAU,aAAa,EAAE,OAAO,CAAC,cAAc;AAC/C,UAAU,QAAQ,EAAE,OAAO,CAAC,SAAS;AACrC,UAAU,UAAU,EAAE,OAAO,CAAC,UAAU;AACxC,UAAU,SAAS,EAAE,OAAO,CAAC,SAAS;AACtC,UAAU,aAAa,EAAE,OAAO,CAAC,cAAc;AAC/C,UAAU,KAAK,EAAE,OAAO,CAAC,KAAK;AAC9B,UAAU,WAAW,EAAE,OAAO,CAAC,YAAY;AAC3C,UAAU,SAAS,EAAE,OAAO,CAAC,UAAU;AACvC,UAAU,SAAS,EAAE,OAAO,CAAC;AAC7B,SAAS,CAAC,CAAC;AACX,QAAQ,OAAO,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC;AACtD,MAAM;AACN,QAAQ,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,0BAA0B,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC3E;AACA,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAE,KAAK,CAAC;AAChD,IAAI,IAAI,KAAK,CAAC,IAAI,KAAK,cAAc,IAAI,KAAK,CAAC,IAAI,KAAK,WAAW,EAAE;AACrE,MAAM,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,4BAA4B,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC3E,IAAI;AACJ,IAAI,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,2BAA2B,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AACxE,EAAE;AACF;;;;"}