{"version":3,"file":"_server-DmwfvnJz.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/activity-logs/_server.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { q as query } from \"../../../../chunks/db.js\";\nfunction formatTime(timeString) {\n  if (!timeString) return timeString;\n  const timeParts = timeString.split(\":\");\n  let hours = parseInt(timeParts[0]);\n  const minutes = timeParts[1];\n  const ampm = hours >= 12 ? \"PM\" : \"AM\";\n  hours = hours % 12;\n  hours = hours ? hours : 12;\n  return `${hours}:${minutes} ${ampm}`;\n}\nasync function POST({ request, getClientAddress }) {\n  try {\n    const { activity_type, user_id, user_account_number, activity_data } = await request.json();\n    if (!activity_type) {\n      return json({ error: \"Activity type is required\" }, { status: 400 });\n    }\n    const ip_address = getClientAddress();\n    const user_agent = request.headers.get(\"user-agent\");\n    const result = await query(\n      \"SELECT log_activity($1, $2, $3, $4, $5, $6) as log_id\",\n      [\n        activity_type,\n        user_id || null,\n        user_account_number || null,\n        JSON.stringify(activity_data || {}),\n        ip_address,\n        user_agent\n      ]\n    );\n    return json({\n      success: true,\n      log_id: result.rows[0].log_id,\n      message: \"Activity logged successfully\"\n    });\n  } catch (error) {\n    console.error(\"Error logging activity:\", error);\n    return json({ error: \"Failed to log activity\" }, { status: 500 });\n  }\n}\nasync function GET({ url }) {\n  try {\n    const limit = parseInt(url.searchParams.get(\"limit\")) || 10;\n    const offset = parseInt(url.searchParams.get(\"offset\")) || 0;\n    const activity_type = url.searchParams.get(\"type\");\n    let sqlQuery = `\n\t\t\tSELECT \n\t\t\t\tal.id,\n\t\t\t\tal.activity_type,\n\t\t\t\tal.user_id,\n\t\t\t\tal.user_account_number,\n\t\t\t\tal.activity_data,\n\t\t\t\tal.ip_address,\n\t\t\t\tal.created_at,\n\t\t\t\tu.full_name as user_full_name,\n\t\t\t\tu.account_type as user_account_type\n\t\t\tFROM activity_logs al\n\t\t\tLEFT JOIN users u ON al.user_id = u.id\n\t\t\tWHERE (u.account_type = 'admin' OR u.account_type IS NULL)\n\t\t`;\n    const params = [];\n    if (activity_type) {\n      sqlQuery += \" AND al.activity_type = $1\";\n      params.push(activity_type);\n    }\n    sqlQuery += \" ORDER BY al.created_at DESC LIMIT $\" + (params.length + 1) + \" OFFSET $\" + (params.length + 2);\n    params.push(limit, offset);\n    const result = await query(sqlQuery, params);\n    const activities = await Promise.all(result.rows.map(async (row) => {\n      const data = row.activity_data;\n      let message = \"\";\n      let icon = \"info\";\n      const performedBy = row.user_full_name || (row.user_account_number && row.user_account_number !== \"TEST-001\" ? row.user_account_number : null) || \"System\";\n      switch (row.activity_type) {\n        case \"account_created\":\n          if (data.account_type === \"student\") {\n            message = `New student account created: ${data.full_name} (${row.user_account_number})`;\n            icon = \"person_add\";\n          } else if (data.account_type === \"teacher\") {\n            message = `New teacher account created: ${data.full_name} (${row.user_account_number})`;\n            icon = \"person_add\";\n          } else {\n            message = `New ${data.account_type} account created: ${data.full_name} (${row.user_account_number})`;\n            icon = \"person_add\";\n          }\n          break;\n        case \"schedule_assigned\":\n          message = `Schedule assigned to ${data.section} for ${data.room}`;\n          icon = \"schedule\";\n          break;\n        case \"schedule_created\":\n          let sectionInfoCreated = \"\";\n          if (data.section_id) {\n            try {\n              const sectionResult = await query(\"SELECT name FROM sections WHERE id = $1\", [data.section_id]);\n              if (sectionResult.rows.length > 0) {\n                sectionInfoCreated = ` for section ${sectionResult.rows[0].name}`;\n              }\n            } catch (error) {\n              console.error(\"Error fetching section name:\", error);\n            }\n          }\n          const formattedStartTimeCreated = formatTime(data.start_time);\n          const formattedEndTimeCreated = formatTime(data.end_time);\n          const scheduleTypeCreated = data.schedule_type ? data.schedule_type.charAt(0).toUpperCase() + data.schedule_type.slice(1) : \"Class\";\n          const dayOfWeekCreated = data.day_of_week ? data.day_of_week.charAt(0).toUpperCase() + data.day_of_week.slice(1) : \"\";\n          message = `Schedule created${sectionInfoCreated} - ${scheduleTypeCreated} on ${dayOfWeekCreated} (${formattedStartTimeCreated} - ${formattedEndTimeCreated})`;\n          icon = \"add_circle\";\n          break;\n        case \"schedule_deleted\":\n          let sectionInfo = \"\";\n          if (data.section_id) {\n            try {\n              const sectionResult = await query(\"SELECT name FROM sections WHERE id = $1\", [data.section_id]);\n              if (sectionResult.rows.length > 0) {\n                sectionInfo = ` for Section ${sectionResult.rows[0].name}`;\n              }\n            } catch (error) {\n              console.error(\"Error fetching section name:\", error);\n            }\n          }\n          const formattedStartTime = formatTime(data.start_time);\n          const formattedEndTime = formatTime(data.end_time);\n          const scheduleType = data.schedule_type ? data.schedule_type.charAt(0).toUpperCase() + data.schedule_type.slice(1) : \"Class\";\n          const dayOfWeek = data.day_of_week ? data.day_of_week.charAt(0).toUpperCase() + data.day_of_week.slice(1) : \"\";\n          message = `Schedule deleted${sectionInfo} - ${scheduleType} on ${dayOfWeek} (${formattedStartTime} - ${formattedEndTime})`;\n          icon = \"delete\";\n          break;\n        case \"room_created\":\n          message = `New room created: ${data.room_name} (${data.building}, Floor ${data.floor})`;\n          icon = \"meeting_room\";\n          break;\n        case \"section_created\":\n          message = `New section created: ${data.section_name}`;\n          icon = \"class\";\n          break;\n        case \"section_updated\":\n          message = `Section updated: ${data.section_name}`;\n          icon = \"edit\";\n          break;\n        case \"section_adviser_changed\":\n          const oldAdviser = data.old_adviser ? `${data.old_adviser.name} (${data.old_adviser.account_number})` : \"No adviser\";\n          const newAdviser = data.new_adviser ? `${data.new_adviser.name} (${data.new_adviser.account_number})` : \"No adviser\";\n          message = `Section adviser changed for ${data.section_name}: ${oldAdviser} â†’ ${newAdviser}`;\n          icon = \"swap_horiz\";\n          break;\n        case \"section_student_added\":\n        case \"student_added_to_section\":\n          message = `Student added to ${data.section_name}: ${data.student ? data.student.name || data.student.full_name : \"Unknown Student\"} ${data.student ? `(${data.student.account_number})` : \"\"}`;\n          icon = \"person_add\";\n          break;\n        case \"section_student_removed\":\n        case \"student_removed_from_section\":\n          message = `Student removed from ${data.section_name}: ${data.student ? data.student.name || data.student.full_name : \"Unknown Student\"} ${data.student ? `(${data.student.account_number})` : \"\"}`;\n          icon = \"person_remove\";\n          break;\n        case \"student_enrolled_to_section\":\n          message = `Student enrolled to ${data.section_name}: ${data.student ? data.student.name || data.student.full_name : \"Unknown Student\"} ${data.student ? `(${data.student.account_number})` : \"\"}`;\n          icon = \"person_add\";\n          break;\n        case \"user_login\":\n          message = `User logged in: ${data.full_name || row.user_account_number}`;\n          icon = \"login\";\n          break;\n        case \"user_logout\":\n          message = `User logged out: ${data.full_name || row.user_account_number}`;\n          icon = \"logout\";\n          break;\n        case \"account_updated\":\n          message = `Account updated: ${data.full_name || row.user_account_number}`;\n          icon = \"edit\";\n          break;\n        case \"account_archived\":\n          message = `Account archived: ${data.full_name || row.user_account_number}`;\n          icon = \"archive\";\n          break;\n        case \"account_deleted\":\n          message = `Account deleted: ${data.full_name || row.user_account_number}`;\n          icon = \"delete\";\n          break;\n        case \"subject_created\":\n          message = `New subject created: ${data.name} (${data.code})`;\n          icon = \"book\";\n          break;\n        case \"subject_updated\":\n          message = `Subject updated: ${data.name} (${data.code})`;\n          icon = \"edit\";\n          break;\n        case \"account_restored\":\n          message = `Student restored: ${data.full_name || row.user_account_number}`;\n          icon = \"restore\";\n          break;\n        case \"subject_deleted\":\n          message = `Subject deleted: ${data.subject_name} (${data.subject_code})`;\n          icon = \"delete\";\n          break;\n        case \"room_updated\":\n          message = `Updated room: ${activity.activity_data.room_name}`;\n          icon = \"edit\";\n          break;\n        case \"department_created\":\n          message = `Created department: ${data.department_name} (${data.department_code})`;\n          icon = \"corporate_fare\";\n          break;\n        case \"department_updated\":\n          message = `Updated department: ${data.department_name} (${data.department_code})`;\n          icon = \"edit\";\n          break;\n        case \"department_deleted\":\n          message = `Deleted department: ${data.department_name} (${data.department_code})`;\n          icon = \"delete\";\n          break;\n        case \"department_teacher_assigned\":\n          const assignedTeachers = data.teachers && data.teachers.length > 0 ? data.teachers.map((t) => t.name || t.full_name).join(\", \") : \"teachers\";\n          message = `Assigned teachers to department \"${data.department_name}\": ${assignedTeachers}`;\n          icon = \"person_add\";\n          break;\n        case \"activity_type_created\":\n          message = `Activity type created: ${data.name} (${data.code})`;\n          icon = \"add\";\n          break;\n        case \"activity_type_updated\":\n          message = `Activity type updated: ${data.name} (${data.code})`;\n          icon = \"edit\";\n          break;\n        case \"activity_type_deleted\":\n          message = `Activity type deleted: ${data.name} (${data.code})`;\n          icon = \"delete\";\n          break;\n        case \"department_teacher_removed\":\n          const removedTeachers = data.teachers && data.teachers.length > 0 ? data.teachers.map((t) => t.name || t.full_name).join(\", \") : \"teachers\";\n          message = `Removed teachers from department \"${data.department_name}\": ${removedTeachers}`;\n          icon = \"person_remove\";\n          break;\n        case \"department_subject_assigned\":\n          const assignedSubjects = data.subjects && data.subjects.length > 0 ? data.subjects.map((s) => s.name).join(\", \") : \"subjects\";\n          message = `Assigned subjects to department \"${data.department_name}\": ${assignedSubjects}`;\n          icon = \"book\";\n          break;\n        case \"department_subject_removed\":\n          const removedSubjects = data.subjects && data.subjects.length > 0 ? data.subjects.map((s) => s.name).join(\", \") : \"subjects\";\n          message = `Removed subjects from department \"${data.department_name}\": ${removedSubjects}`;\n          icon = \"book\";\n          break;\n        case \"room_deleted\":\n          message = `Room deleted: ${data.room_name} (${data.building}, Floor ${data.floor})`;\n          icon = \"delete\";\n          break;\n        case \"room_sections_assigned\":\n          const assignedSectionNames = data.section_names ? data.section_names.join(\", \") : \"sections\";\n          message = `Sections assigned to room \"${data.room_name}\": ${assignedSectionNames}`;\n          icon = \"assignment\";\n          break;\n        case \"room_sections_unassigned\":\n          const unassignedSectionNames = data.unassigned_sections ? data.unassigned_sections.map((s) => s.name).join(\", \") : \"all sections\";\n          message = `Sections unassigned from room \"${data.room_name}\": ${unassignedSectionNames}`;\n          icon = \"assignment_return\";\n          break;\n        case \"section_deleted\":\n          message = `Section deleted: ${data.section_name} (Grade ${data.grade_level})`;\n          icon = \"delete\";\n          break;\n        default:\n          message = `${row.activity_type.replace(/_/g, \" \").replace(/\\b\\w/g, (l) => l.toUpperCase())}`;\n          icon = \"info\";\n      }\n      const now = /* @__PURE__ */ new Date();\n      const activityTime = new Date(row.created_at);\n      const nowUTC = new Date(now.getTime() + now.getTimezoneOffset() * 6e4);\n      const activityTimeUTC = new Date(activityTime.getTime());\n      const diffMs = nowUTC - activityTimeUTC;\n      const diffMins = Math.floor(diffMs / 6e4);\n      const diffHours = Math.floor(diffMins / 60);\n      const diffDays = Math.floor(diffHours / 24);\n      const localTimeString = activityTime.toLocaleString(\"en-CA\", {\n        timeZone: \"Asia/Singapore\",\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\",\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        hour12: false\n      });\n      const timestamp = localTimeString.replace(/(\\d{4})-(\\d{2})-(\\d{2}), (\\d{2}):(\\d{2})/, \"$2/$3/$1 - $4:$5\");\n      return {\n        id: row.id,\n        type: row.activity_type,\n        message,\n        timestamp,\n        icon,\n        created_at: row.created_at,\n        data: row.activity_data,\n        user_name: row.user_full_name,\n        user_account_number: row.user_account_number,\n        performed_by: performedBy\n      };\n    }));\n    return json({\n      success: true,\n      activities,\n      total: result.rows.length,\n      limit,\n      offset\n    });\n  } catch (error) {\n    console.error(\"Error fetching activities:\", error);\n    return json({ error: \"Failed to fetch activities\" }, { status: 500 });\n  }\n}\nexport {\n  GET,\n  POST\n};\n"],"names":[],"mappings":"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"}