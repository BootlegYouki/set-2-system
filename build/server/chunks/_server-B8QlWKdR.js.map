{"version":3,"file":"_server-B8QlWKdR.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/ai-chatbot/_server.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { O as OPENROUTER_AI_KEY } from \"../../../../chunks/private.js\";\nconst KNOWLEDGE_BASE = `\nQ: Can I submit multiple requests at once?\nA: Yes. Most systems allow you to queue up or submit several document requests simultaneously.\n\nQ: What types of documents are typically available?\nA: Available documents usually include official records, certificates, transcripts, diplomas, and grade reports.\n\nQ: Is stating the purpose of the request necessary?\nA: Yes. You are typically required to state the purpose for your request to ensure proper processing and documentation.\n\nQ: How do I cancel a request?\nA: You can usually cancel a request through your personal dashboard or in the dedicated conversation/chat system associated with the request.\n\nQ: What should I do if my request is rejected?\nA: If your request is rejected or you submitted the wrong type, cancel the initial request (if possible) and submit a new, corrected one.\n\nQ: How long does document processing usually take?\nA: Processing times vary significantly, but standard requests typically take 3-5 working days unless otherwise notified.\n\nQ: How can I track the status of my request?\nA: You can monitor your request status in real-time on your user dashboard, notification section, or within the communication thread with the administration.\n\nQ: What does \"For Verifying\" mean?\nA: The admin is reviewing your request details, attached files, and payment confirmation.\n\nQ: What does \"For Processing\" mean?\nA: Your request has been accepted and is currently being prepared by the relevant office.\n\nQ: What does \"On Hold\" mean?\nA: Your request is temporarily paused, often due to an issue that requires the admin to check or verify a file or detail.\n\nQ: What does \"Released\" or \"Ready for Pickup\" mean?\nA: Your document has been finalized and is ready for collection or has been collected.\n\nQ: When will I know the document's release date?\nA: A tentative release date is usually provided once your request has been verified and moves to the \"For Processing\" status. This date may be subject to change.\n\nQ: Do I need to upload any files?\nA: Only if specifically requested by the system or the administrator.\n\nQ: What if the file I need to upload is too big?\nA: You should compress your file or upload a lower-resolution version, ensuring the text remains clear and readable.\n\nQ: Can I communicate directly with the staff processing my document?\nA: Direct contact is usually limited. Communication is typically managed through the official private chat or messaging system.\n\nQ: Is the system/chatbot available 24/7?\nA: System availability for basic functions and chatbot inquiries is often 24/7, though staff assistance will only be available during working hours.\n\nQ: Are online payment options available?\nA: We do not generally allow online payments for document requests. The system will typically generate a receipt or reference number which you must use to complete the payment at a designated payment center or office.\n\nQ: What do I need to bring to claim my document?\nA: You must bring the required proof of payment and request, typically the systemgenerated receipt and the physical \"Paid\" receipt\n\nQ: How much is the document fee?\nA: Fees vary per document type. You can view the price of the document on the document request form.\n`;\nasync function POST({ request }) {\n  try {\n    const { messages } = await request.json();\n    if (!messages || !Array.isArray(messages)) {\n      return json({ success: false, error: \"Invalid messages format\" }, { status: 400 });\n    }\n    const systemMessage = {\n      role: \"system\",\n      content: `You are a helpful assistant for a student document request system. Use the following knowledge base to answer questions accurately and concisely:\n\n${KNOWLEDGE_BASE}\n\nGuidelines:\n- Be friendly, professional, and concise\n- Answer based on the knowledge base provided\n- If a question is not covered in the knowledge base, politely say you don't have that specific information\n- Keep responses brief and to the point (2-3 sentences max unless more detail is needed)\n- Use a conversational tone\n- If asked about specific request details, remind them to check their dashboard or request history`\n    };\n    const fullMessages = [systemMessage, ...messages];\n    const response = await fetch(\"https://openrouter.ai/api/v1/chat/completions\", {\n      method: \"POST\",\n      headers: {\n        \"Authorization\": `Bearer ${OPENROUTER_AI_KEY}`,\n        \"HTTP-Referer\": \"http://localhost:3000\",\n        \"X-Title\": \"SET-2 System\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        model: \"kwaipilot/kat-coder-pro:free\",\n        messages: fullMessages\n      })\n    });\n    if (!response.ok) {\n      throw new Error(\"OpenRouter API request failed\");\n    }\n    const result = await response.json();\n    const reply = result.choices[0].message.content;\n    return json({ success: true, reply });\n  } catch (error) {\n    console.error(\"AI Chatbot Error:\", error);\n    return json({ success: false, error: error.message }, { status: 500 });\n  }\n}\nexport {\n  POST\n};\n"],"names":[],"mappings":";;;AAEA,MAAM,cAAc,GAAG;AACvB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;AACD,eAAe,IAAI,CAAC,EAAE,OAAO,EAAE,EAAE;AACjC,EAAE,IAAI;AACN,IAAI,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE;AAC7C,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;AAC/C,MAAM,OAAO,IAAI,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,yBAAyB,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AACxF,IAAI;AACJ,IAAI,MAAM,aAAa,GAAG;AAC1B,MAAM,IAAI,EAAE,QAAQ;AACpB,MAAM,OAAO,EAAE,CAAC;;AAEhB,EAAE,cAAc;;AAEhB;AACA;AACA;AACA;AACA;AACA;AACA,kGAAkG;AAClG,KAAK;AACL,IAAI,MAAM,YAAY,GAAG,CAAC,aAAa,EAAE,GAAG,QAAQ,CAAC;AACrD,IAAI,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,+CAA+C,EAAE;AAClF,MAAM,MAAM,EAAE,MAAM;AACpB,MAAM,OAAO,EAAE;AACf,QAAQ,eAAe,EAAE,CAAC,OAAO,EAAE,iBAAiB,CAAC,CAAC;AACtD,QAAQ,cAAc,EAAE,uBAAuB;AAC/C,QAAQ,SAAS,EAAE,cAAc;AACjC,QAAQ,cAAc,EAAE;AACxB,OAAO;AACP,MAAM,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC;AAC3B,QAAQ,KAAK,EAAE,8BAA8B;AAC7C,QAAQ,QAAQ,EAAE;AAClB,OAAO;AACP,KAAK,CAAC;AACN,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;AACtB,MAAM,MAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC;AACtD,IAAI;AACJ,IAAI,MAAM,MAAM,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE;AACxC,IAAI,MAAM,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO;AACnD,IAAI,OAAO,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;AACzC,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,mBAAmB,EAAE,KAAK,CAAC;AAC7C,IAAI,OAAO,IAAI,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC1E,EAAE;AACF;;;;"}