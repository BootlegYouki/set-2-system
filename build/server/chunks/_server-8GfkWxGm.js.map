{"version":3,"file":"_server-8GfkWxGm.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/dashboard/_server.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { q as query } from \"../../../../chunks/db.js\";\nasync function GET() {\n  try {\n    const studentsResult = await query(`\n      SELECT COUNT(*) as count \n      FROM users \n      WHERE account_type = 'student' \n      AND (status IS NULL OR status = 'active')\n    `);\n    const teachersResult = await query(`\n      SELECT COUNT(*) as count \n      FROM users \n      WHERE account_type = 'teacher' \n      AND (status IS NULL OR status = 'active')\n    `);\n    const sectionsResult = await query(`\n      SELECT COUNT(*) as count \n      FROM sections \n      WHERE status = 'active'\n    `);\n    const roomsResult = await query(`\n      SELECT COUNT(*) as count \n      FROM rooms\n    `);\n    const statistics = {\n      students: parseInt(studentsResult.rows[0].count),\n      teachers: parseInt(teachersResult.rows[0].count),\n      sections: parseInt(sectionsResult.rows[0].count),\n      rooms: parseInt(roomsResult.rows[0].count)\n    };\n    return json({\n      success: true,\n      data: statistics\n    });\n  } catch (error) {\n    console.error(\"Error fetching dashboard statistics:\", error);\n    return json({\n      success: false,\n      error: \"Failed to fetch dashboard statistics\"\n    }, { status: 500 });\n  }\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;AAEA,eAAe,GAAG,GAAG;AACrB,EAAE,IAAI;AACN,IAAI,MAAM,cAAc,GAAG,MAAM,KAAK,CAAC;AACvC;AACA;AACA;AACA;AACA,IAAI,CAAC,CAAC;AACN,IAAI,MAAM,cAAc,GAAG,MAAM,KAAK,CAAC;AACvC;AACA;AACA;AACA;AACA,IAAI,CAAC,CAAC;AACN,IAAI,MAAM,cAAc,GAAG,MAAM,KAAK,CAAC;AACvC;AACA;AACA;AACA,IAAI,CAAC,CAAC;AACN,IAAI,MAAM,WAAW,GAAG,MAAM,KAAK,CAAC;AACpC;AACA;AACA,IAAI,CAAC,CAAC;AACN,IAAI,MAAM,UAAU,GAAG;AACvB,MAAM,QAAQ,EAAE,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;AACtD,MAAM,QAAQ,EAAE,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;AACtD,MAAM,QAAQ,EAAE,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;AACtD,MAAM,KAAK,EAAE,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK;AAC/C,KAAK;AACL,IAAI,OAAO,IAAI,CAAC;AAChB,MAAM,OAAO,EAAE,IAAI;AACnB,MAAM,IAAI,EAAE;AACZ,KAAK,CAAC;AACN,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,sCAAsC,EAAE,KAAK,CAAC;AAChE,IAAI,OAAO,IAAI,CAAC;AAChB,MAAM,OAAO,EAAE,KAAK;AACpB,MAAM,KAAK,EAAE;AACb,KAAK,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AACvB,EAAE;AACF;;;;"}