{"version":3,"file":"_server-BKgEj5EJ.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/dashboard/sections-per-grade/_server.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { a as connectToDatabase } from \"../../../../../chunks/db.js\";\nasync function GET({ request, url }) {\n  try {\n    const db = await connectToDatabase();\n    const sectionsData = await db.collection(\"sections\").aggregate([\n      {\n        $match: {\n          status: \"active\"\n        }\n      },\n      {\n        $group: {\n          _id: \"$grade_level\",\n          count: { $sum: 1 }\n        }\n      },\n      {\n        $sort: { _id: 1 }\n      }\n    ]).toArray();\n    const transformedData = sectionsData.map((item) => ({\n      grade_level: item._id.toString(),\n      section_count: item.count\n    }));\n    return json({\n      success: true,\n      data: transformedData,\n      metadata: {\n        total_sections: sectionsData.reduce((sum, item) => sum + item.count, 0),\n        grade_levels: sectionsData.length\n      }\n    });\n  } catch (error) {\n    console.error(\"Error fetching sections per grade:\", error);\n    return json({\n      success: false,\n      error: \"Internal server error\",\n      details: error.message\n    }, { status: 500 });\n  }\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;AAEA,eAAe,GAAG,CAAC,EAAE,OAAO,EAAE,GAAG,EAAE,EAAE;AACrC,EAAE,IAAI;AACN,IAAI,MAAM,EAAE,GAAG,MAAM,iBAAiB,EAAE;AACxC,IAAI,MAAM,YAAY,GAAG,MAAM,EAAE,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC;AACnE,MAAM;AACN,QAAQ,MAAM,EAAE;AAChB,UAAU,MAAM,EAAE;AAClB;AACA,OAAO;AACP,MAAM;AACN,QAAQ,MAAM,EAAE;AAChB,UAAU,GAAG,EAAE,cAAc;AAC7B,UAAU,KAAK,EAAE,EAAE,IAAI,EAAE,CAAC;AAC1B;AACA,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,EAAE,GAAG,EAAE,CAAC;AACvB;AACA,KAAK,CAAC,CAAC,OAAO,EAAE;AAChB,IAAI,MAAM,eAAe,GAAG,YAAY,CAAC,GAAG,CAAC,CAAC,IAAI,MAAM;AACxD,MAAM,WAAW,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE;AACtC,MAAM,aAAa,EAAE,IAAI,CAAC;AAC1B,KAAK,CAAC,CAAC;AACP,IAAI,OAAO,IAAI,CAAC;AAChB,MAAM,OAAO,EAAE,IAAI;AACnB,MAAM,IAAI,EAAE,eAAe;AAC3B,MAAM,QAAQ,EAAE;AAChB,QAAQ,cAAc,EAAE,YAAY,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,KAAK,GAAG,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;AAC/E,QAAQ,YAAY,EAAE,YAAY,CAAC;AACnC;AACA,KAAK,CAAC;AACN,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,oCAAoC,EAAE,KAAK,CAAC;AAC9D,IAAI,OAAO,IAAI,CAAC;AAChB,MAAM,OAAO,EAAE,KAAK;AACpB,MAAM,KAAK,EAAE,uBAAuB;AACpC,MAAM,OAAO,EAAE,KAAK,CAAC;AACrB,KAAK,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AACvB,EAAE;AACF;;;;"}