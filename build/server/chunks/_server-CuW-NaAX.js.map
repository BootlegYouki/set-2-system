{"version":3,"file":"_server-CuW-NaAX.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/student-profile/_server.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { a as connectToDatabase } from \"../../../../chunks/db.js\";\nimport { v as verifyAuth } from \"../../../../chunks/auth-helper.js\";\nimport { ObjectId } from \"mongodb\";\nasync function getCurrentSchoolYear(db) {\n  try {\n    const schoolYearSetting = await db.collection(\"admin_settings\").findOne({\n      setting_key: \"current_school_year\"\n    });\n    return schoolYearSetting?.setting_value || \"2025-2026\";\n  } catch (error) {\n    console.error(\"Error fetching current school year:\", error);\n    return \"2025-2026\";\n  }\n}\nasync function GET({ url, request }) {\n  try {\n    const authResult = await verifyAuth(request, [\"student\", \"teacher\", \"adviser\", \"admin\"]);\n    if (!authResult.success) {\n      return json({ error: authResult.error }, { status: 401 });\n    }\n    const currentUser = authResult.user;\n    const studentId = url.searchParams.get(\"studentId\");\n    if (!studentId) {\n      return json({ error: \"Student ID is required\" }, { status: 400 });\n    }\n    if (currentUser.account_type === \"student\" && currentUser.id !== studentId) {\n      return json({\n        error: \"Unauthorized: You can only view your own profile\"\n      }, { status: 403 });\n    }\n    const db = await connectToDatabase();\n    const currentSchoolYear = await getCurrentSchoolYear(db);\n    const sectionStudents = db.collection(\"section_students\");\n    const sections = db.collection(\"sections\");\n    const users = db.collection(\"users\");\n    const sectionEnrollment = await sectionStudents.findOne({\n      student_id: new ObjectId(studentId),\n      status: \"active\"\n    });\n    const student = await users.findOne({\n      _id: new ObjectId(studentId),\n      account_type: \"student\"\n    });\n    if (!student) {\n      return json({ error: \"Student not found\" }, { status: 404 });\n    }\n    if (currentUser.account_type === \"teacher\") {\n      const teacherSchedules = await db.collection(\"schedules\").find({\n        teacher_id: new ObjectId(currentUser.id),\n        schedule_type: \"subject\"\n      }).toArray();\n      const teacherSectionIds = teacherSchedules.map((s) => s.section_id);\n      const studentInTeacherSection = await db.collection(\"section_students\").findOne({\n        student_id: new ObjectId(studentId),\n        section_id: { $in: teacherSectionIds },\n        status: \"active\"\n      });\n      if (!studentInTeacherSection) {\n        return json({\n          error: \"Unauthorized: You can only view profiles of your students\"\n        }, { status: 403 });\n      }\n    }\n    if (currentUser.account_type === \"adviser\") {\n      const advisorySection = await db.collection(\"sections\").findOne({\n        adviser_id: new ObjectId(currentUser.id),\n        status: \"active\"\n      });\n      if (advisorySection) {\n        const studentInAdvisorySection = await db.collection(\"section_students\").findOne({\n          student_id: new ObjectId(studentId),\n          section_id: advisorySection._id,\n          status: \"active\"\n        });\n        if (!studentInAdvisorySection) {\n          return json({\n            error: \"Unauthorized: You can only view profiles of students in your advisory section\"\n          }, { status: 403 });\n        }\n      } else {\n        return json({\n          error: \"Unauthorized: You can only view profiles of students in your advisory section\"\n        }, { status: 403 });\n      }\n    }\n    let sectionInfo = null;\n    let studentGradeLevel = null;\n    if (sectionEnrollment) {\n      const sectionData = await sections.findOne({\n        _id: sectionEnrollment.section_id\n      });\n      if (sectionData) {\n        studentGradeLevel = sectionData.grade_level;\n        let adviserName = \"Not assigned\";\n        if (sectionData.adviser_id) {\n          const adviser = await users.findOne({\n            _id: sectionData.adviser_id\n          });\n          if (adviser) {\n            adviserName = adviser.full_name;\n          }\n        }\n        sectionInfo = {\n          section_id: sectionData._id,\n          section_name: sectionData.name,\n          grade_level: sectionData.grade_level,\n          school_year: sectionData.school_year,\n          // Include section's school year\n          adviser_name: adviserName\n        };\n      }\n    } else {\n      studentGradeLevel = parseInt(student.grade_level);\n    }\n    let subjects = [];\n    if (studentGradeLevel) {\n      const subjectsCollection = db.collection(\"subjects\");\n      const schedulesCollection = db.collection(\"schedules\");\n      const departmentsCollection = db.collection(\"departments\");\n      const subjectsList = await subjectsCollection.find({\n        grade_level: studentGradeLevel\n      }).sort({ name: 1 }).toArray();\n      for (const subject of subjectsList) {\n        let teacherName = \"No teacher\";\n        let departmentName = \"General\";\n        if (sectionInfo) {\n          const schedule = await schedulesCollection.findOne({\n            subject_id: subject._id,\n            section_id: sectionInfo.section_id,\n            school_year: sectionInfo.school_year\n            // Use section's school year for schedules\n          });\n          if (schedule && schedule.teacher_id) {\n            const teacher = await users.findOne({\n              _id: schedule.teacher_id,\n              account_type: \"teacher\"\n            });\n            if (teacher) {\n              teacherName = teacher.full_name;\n            }\n          }\n        }\n        if (subject.department_id) {\n          const department = await departmentsCollection.findOne({\n            _id: subject.department_id\n          });\n          if (department) {\n            departmentName = department.name;\n          }\n        }\n        subjects.push({\n          id: subject._id.toString(),\n          name: subject.name,\n          code: subject.code,\n          department: departmentName,\n          teacher: teacherName,\n          color: getSubjectColor(subject.name)\n        });\n      }\n    }\n    let generalAverage = null;\n    let totalSubjectsWithGrades = 0;\n    if (sectionInfo) {\n      const gradesCollection = db.collection(\"grades\");\n      const studentGrades = await gradesCollection.find({\n        student_id: new ObjectId(studentId),\n        section_id: sectionInfo.section_id,\n        school_year: currentSchoolYear,\n        // Use current school year from admin settings\n        \"averages.final_grade\": { $exists: true, $ne: null },\n        verified: true\n      }).toArray();\n      if (studentGrades.length > 0) {\n        const totalGrades = studentGrades.reduce((sum, grade) => {\n          return sum + (grade.averages?.final_grade || 0);\n        }, 0);\n        generalAverage = Math.round(totalGrades / studentGrades.length * 100) / 100;\n        totalSubjectsWithGrades = studentGrades.length;\n      }\n    }\n    let classRank = null;\n    let totalStudentsInSection = 0;\n    if (sectionInfo && generalAverage !== null) {\n      const gradesCollection = db.collection(\"grades\");\n      const allStudentsInSection = await sectionStudents.find({\n        section_id: sectionInfo.section_id,\n        status: \"active\"\n      }).toArray();\n      const studentAverages = [];\n      for (const student2 of allStudentsInSection) {\n        const studentGrades = await gradesCollection.find({\n          student_id: student2.student_id,\n          section_id: sectionInfo.section_id,\n          school_year: currentSchoolYear,\n          // Use current school year from admin settings\n          \"averages.final_grade\": { $exists: true, $ne: null },\n          verified: true\n        }).toArray();\n        if (studentGrades.length > 0) {\n          const totalGrades = studentGrades.reduce((sum, grade) => {\n            return sum + (grade.averages?.final_grade || 0);\n          }, 0);\n          const average = totalGrades / studentGrades.length;\n          studentAverages.push({\n            student_id: student2.student_id.toString(),\n            average_grade: average\n          });\n        }\n      }\n      studentAverages.sort((a, b) => b.average_grade - a.average_grade);\n      const studentRankIndex = studentAverages.findIndex((s) => s.student_id === studentId);\n      if (studentRankIndex !== -1) {\n        classRank = studentRankIndex + 1;\n        totalStudentsInSection = studentAverages.length;\n      }\n    }\n    if (sectionInfo && totalStudentsInSection === 0) {\n      totalStudentsInSection = await sectionStudents.countDocuments({\n        section_id: sectionInfo.section_id,\n        status: \"active\"\n      });\n    }\n    const profileData = {\n      section: sectionInfo ? {\n        id: sectionInfo.section_id.toString(),\n        name: sectionInfo.section_name,\n        gradeLevel: sectionInfo.grade_level,\n        adviser: sectionInfo.adviser_name || \"Not assigned\"\n      } : {\n        id: null,\n        name: \"No section assigned\",\n        gradeLevel: studentGradeLevel,\n        adviser: \"No adviser\"\n      },\n      subjects,\n      academicSummary: {\n        generalAverage,\n        classRank: classRank || \"N/A\",\n        totalStudentsInSection: totalStudentsInSection || 0,\n        totalSubjectsEnrolled: subjects.length,\n        totalSubjectsWithGrades\n      }\n    };\n    return json({\n      success: true,\n      data: profileData\n    });\n  } catch (error) {\n    console.error(\"Error fetching student profile data:\", error);\n    if (error.code === \"ECONNREFUSED\" || error.code === \"ENOTFOUND\") {\n      return json({ error: \"Database connection failed\" }, { status: 503 });\n    }\n    return json({ error: \"Failed to fetch student profile data\" }, { status: 500 });\n  }\n}\nfunction getSubjectColor(subjectName) {\n  const subjectColors = {\n    \"Mathematics\": [\"#4F46E5\", \"#6366F1\", \"#8B5CF6\", \"#3B82F6\"],\n    // Blues and purples\n    \"Math\": [\"#4F46E5\", \"#6366F1\", \"#8B5CF6\", \"#3B82F6\"],\n    \"Science\": [\"#059669\", \"#10B981\", \"#34D399\", \"#047857\"],\n    // Greens\n    \"English\": [\"#DC2626\", \"#EF4444\", \"#F87171\", \"#B91C1C\"],\n    // Reds\n    \"Physical Education\": [\"#EA580C\", \"#F97316\", \"#FB923C\", \"#C2410C\"],\n    // Oranges\n    \"MAPEH\": [\"#EA580C\", \"#F97316\", \"#FB923C\", \"#C2410C\"],\n    // Oranges\n    \"PE\": [\"#EA580C\", \"#F97316\", \"#FB923C\", \"#C2410C\"],\n    \"Filipino\": [\"#7C2D12\", \"#A16207\", \"#D97706\", \"#92400E\"],\n    // Browns and ambers\n    \"Araling Panlipunan\": [\"#B45309\", \"#D97706\", \"#F59E0B\", \"#A16207\"],\n    // Ambers\n    \"History\": [\"#B45309\", \"#D97706\", \"#F59E0B\", \"#A16207\"],\n    \"Computer\": [\"#6366F1\", \"#8B5CF6\", \"#A855F7\", \"#7C3AED\"],\n    // Purples\n    \"Technology\": [\"#6366F1\", \"#8B5CF6\", \"#A855F7\", \"#7C3AED\"],\n    \"Arts\": [\"#C026D3\", \"#D946EF\", \"#E879F9\", \"#A21CAF\"],\n    // Magentas\n    \"Music\": [\"#EC4899\", \"#F472B6\", \"#F9A8D4\", \"#DB2777\"],\n    // Pinks\n    \"Health\": [\"#16A34A\", \"#22C55E\", \"#4ADE80\", \"#15803D\"],\n    // Light greens\n    \"Values\": [\"#0891B2\", \"#06B6D4\", \"#22D3EE\", \"#0E7490\"],\n    // Cyans\n    \"Research\": [\"#7C2D12\", \"#A16207\", \"#D97706\", \"#92400E\"],\n    // Browns\n    \"TLE\": [\"#9333EA\", \"#A855F7\", \"#C084FC\", \"#7E22CE\"],\n    // Violets\n    \"ESP\": [\"#0891B2\", \"#06B6D4\", \"#22D3EE\", \"#0E7490\"]\n    // Cyans\n  };\n  const fallbackColors = [\n    \"#EF4444\",\n    \"#F97316\",\n    \"#F59E0B\",\n    \"#84CC16\",\n    \"#22C55E\",\n    \"#10B981\",\n    \"#14B8A6\",\n    \"#06B6D4\",\n    \"#0EA5E9\",\n    \"#3B82F6\",\n    \"#6366F1\",\n    \"#8B5CF6\",\n    \"#A855F7\",\n    \"#D946EF\",\n    \"#EC4899\",\n    \"#F43F5E\",\n    \"#E11D48\",\n    \"#BE123C\",\n    \"#9F1239\",\n    \"#881337\"\n  ];\n  function simpleHash(str) {\n    let hash2 = 0;\n    for (let i = 0; i < str.length; i++) {\n      const char = str.charCodeAt(i);\n      hash2 = (hash2 << 5) - hash2 + char;\n      hash2 = hash2 & hash2;\n    }\n    return Math.abs(hash2);\n  }\n  const normalizedName = subjectName.toLowerCase().trim();\n  for (const [key, colorArray] of Object.entries(subjectColors)) {\n    if (normalizedName.includes(key.toLowerCase())) {\n      const hash2 = simpleHash(subjectName);\n      const colorIndex2 = hash2 % colorArray.length;\n      return colorArray[colorIndex2];\n    }\n  }\n  const hash = simpleHash(subjectName);\n  const colorIndex = hash % fallbackColors.length;\n  return fallbackColors[colorIndex];\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":"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"}