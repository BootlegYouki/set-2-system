{"version":3,"file":"_server-DhwKxLjA.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/archived-accounts/_server.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { a as connectToDatabase } from \"../../../../chunks/db.js\";\nimport { g as getUserFromRequest } from \"../../../../chunks/auth-helper.js\";\nimport { ObjectId } from \"mongodb\";\nasync function GET({ url, request }) {\n  try {\n    const user = await getUserFromRequest(request);\n    if (!user) {\n      return json({ error: \"Authentication required\" }, { status: 401 });\n    }\n    if (user.account_type !== \"admin\") {\n      return json({ error: \"Admin access required\" }, { status: 403 });\n    }\n    const limit = url.searchParams.get(\"limit\");\n    const search = url.searchParams.get(\"search\") || \"\";\n    const gradeLevel = url.searchParams.get(\"gradeLevel\") || \"\";\n    const gender = url.searchParams.get(\"gender\") || \"\";\n    const accountType = url.searchParams.get(\"type\") || \"\";\n    const db = await connectToDatabase();\n    const usersCollection = db.collection(\"users\");\n    const query = {\n      account_type: { $in: [\"student\", \"teacher\"] },\n      status: \"archived\"\n    };\n    if (accountType && (accountType === \"student\" || accountType === \"teacher\")) {\n      query.account_type = accountType;\n    }\n    if (search) {\n      query.$or = [\n        { full_name: { $regex: search, $options: \"i\" } },\n        { account_number: { $regex: search, $options: \"i\" } },\n        { first_name: { $regex: search, $options: \"i\" } },\n        { last_name: { $regex: search, $options: \"i\" } }\n      ];\n    }\n    if (gradeLevel) {\n      query.grade_level = gradeLevel;\n    }\n    if (gender) {\n      query.gender = gender;\n    }\n    let queryBuilder = usersCollection.find(query).sort({ archived_at: -1 });\n    if (limit && !isNaN(parseInt(limit))) {\n      queryBuilder = queryBuilder.limit(parseInt(limit));\n    }\n    const archivedAccounts = await queryBuilder.toArray();\n    const accountsWithDepartments = await Promise.all(\n      archivedAccounts.map(async (account) => {\n        if (account.account_type === \"teacher\") {\n          const teacherDepartmentsCollection = db.collection(\"teacher_departments\");\n          const departmentsCollection = db.collection(\"departments\");\n          const teacherDept = await teacherDepartmentsCollection.findOne({\n            teacher_id: account._id\n          });\n          let departmentName = null;\n          if (teacherDept) {\n            const department = await departmentsCollection.findOne({\n              _id: teacherDept.department_id\n            });\n            departmentName = department ? department.name : null;\n          }\n          return { ...account, department_name: departmentName };\n        }\n        return account;\n      })\n    );\n    const formattedAccounts = accountsWithDepartments.map((account) => ({\n      id: account._id.toString(),\n      name: account.full_name,\n      firstName: account.first_name,\n      lastName: account.last_name,\n      middleInitial: account.middle_initial,\n      email: account.email,\n      number: account.account_number,\n      accountType: account.account_type,\n      gradeLevel: account.grade_level,\n      department: account.department_name || null,\n      birthdate: account.birthdate,\n      address: account.address,\n      age: account.age,\n      guardian: account.guardian,\n      contactNumber: account.contact_number,\n      gender: account.gender,\n      archivedDate: account.archived_at ? new Date(account.archived_at).toLocaleDateString(\"en-US\") : \"\",\n      createdDate: new Date(account.created_at).toLocaleDateString(\"en-US\"),\n      updatedDate: new Date(account.updated_at).toLocaleDateString(\"en-US\"),\n      status: \"archived\"\n    }));\n    return json({ accounts: formattedAccounts });\n  } catch (error) {\n    console.error(\"Error fetching archived accounts:\", error);\n    if (error.message === \"Authentication required\" || error.message === \"Admin access required\") {\n      return json({ error: error.message }, { status: error.message === \"Authentication required\" ? 401 : 403 });\n    }\n    if (error.name === \"MongoNetworkError\" || error.name === \"MongoServerError\") {\n      return json({ error: \"Database connection failed\" }, { status: 503 });\n    }\n    return json({ error: \"Failed to fetch archived accounts\" }, { status: 500 });\n  }\n}\nasync function PUT({ request, getClientAddress }) {\n  try {\n    const user = await getUserFromRequest(request);\n    if (!user) {\n      return json({ error: \"Authentication required\" }, { status: 401 });\n    }\n    if (user.account_type !== \"admin\") {\n      return json({ error: \"Admin access required\" }, { status: 403 });\n    }\n    const { id } = await request.json();\n    if (!id) {\n      return json({ error: \"Account ID is required\" }, { status: 400 });\n    }\n    const db = await connectToDatabase();\n    const usersCollection = db.collection(\"users\");\n    const account = await usersCollection.findOne({\n      _id: new ObjectId(id),\n      account_type: { $in: [\"student\", \"teacher\"] }\n    });\n    if (!account) {\n      return json({ error: \"Account not found\" }, { status: 404 });\n    }\n    if (account.status !== \"archived\") {\n      return json({ error: \"Account is not archived\" }, { status: 400 });\n    }\n    const updateResult = await usersCollection.updateOne(\n      { _id: new ObjectId(id) },\n      {\n        $set: {\n          status: \"active\",\n          updated_at: /* @__PURE__ */ new Date()\n        },\n        $unset: {\n          archived_at: \"\"\n        }\n      }\n    );\n    if (updateResult.matchedCount === 0) {\n      return json({ error: \"Account not found\" }, { status: 404 });\n    }\n    const restoredAccount = await usersCollection.findOne({ _id: new ObjectId(id) });\n    const accountTypeLabel = restoredAccount.account_type === \"student\" ? \"Student\" : \"Teacher\";\n    const activityType = restoredAccount.account_type === \"student\" ? \"student_restored\" : \"teacher_restored\";\n    try {\n      const ip_address = getClientAddress();\n      const user_agent = request.headers.get(\"user-agent\");\n      const activityCollection = db.collection(\"activity_logs\");\n      await activityCollection.insertOne({\n        activity_type: activityType,\n        user_id: user?.id ? new ObjectId(user.id) : null,\n        user_account_number: user?.account_number || null,\n        activity_data: {\n          account_type: restoredAccount.account_type,\n          full_name: restoredAccount.full_name,\n          account_number: restoredAccount.account_number\n        },\n        ip_address,\n        user_agent,\n        created_at: /* @__PURE__ */ new Date()\n      });\n    } catch (logError) {\n      console.error(\"Error logging account restoration activity:\", logError);\n    }\n    return json({\n      success: true,\n      message: `${accountTypeLabel} ${restoredAccount.full_name} (${restoredAccount.account_number}) has been restored from archive`,\n      account: {\n        id: restoredAccount._id.toString(),\n        name: restoredAccount.full_name,\n        number: restoredAccount.account_number,\n        type: restoredAccount.account_type\n      }\n    });\n  } catch (error) {\n    console.error(\"Error restoring account:\", error);\n    if (error.message === \"Authentication required\" || error.message === \"Admin access required\") {\n      return json({ error: error.message }, { status: error.message === \"Authentication required\" ? 401 : 403 });\n    }\n    if (error.name === \"MongoNetworkError\" || error.name === \"MongoServerError\") {\n      return json({ error: \"Database connection failed\" }, { status: 503 });\n    }\n    return json({ error: \"Failed to restore account from archive\" }, { status: 500 });\n  }\n}\nexport {\n  GET,\n  PUT\n};\n"],"names":[],"mappings":"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"}