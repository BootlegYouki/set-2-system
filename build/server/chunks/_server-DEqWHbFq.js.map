{"version":3,"file":"_server-DEqWHbFq.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/users/_server.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { a as connectToDatabase } from \"../../../../chunks/db.js\";\nasync function GET({ url }) {\n  try {\n    const action = url.searchParams.get(\"action\");\n    switch (action) {\n      case \"teachers\":\n        const db = await connectToDatabase();\n        const teachers = await db.collection(\"users\").find({\n          account_type: \"teacher\",\n          $or: [\n            { status: { $exists: false } },\n            { status: \"active\" }\n          ]\n        }).sort({ first_name: 1, last_name: 1 }).toArray();\n        const formattedTeachers = teachers.map((teacher) => ({\n          id: teacher._id,\n          accountNumber: teacher.account_number,\n          fullName: teacher.full_name,\n          first_name: teacher.first_name,\n          last_name: teacher.last_name,\n          middleInitial: teacher.middle_initial,\n          email: teacher.email,\n          accountType: teacher.account_type,\n          createdAt: teacher.created_at,\n          updatedAt: teacher.updated_at\n        }));\n        return json({ success: true, data: formattedTeachers });\n      default:\n        return json({ error: \"Invalid action parameter\" }, { status: 400 });\n    }\n  } catch (error) {\n    console.error(\"Error in /api/users:\", error);\n    if (error.code === \"ECONNREFUSED\" || error.code === \"ENOTFOUND\") {\n      return json({ error: \"Database connection failed\" }, { status: 503 });\n    }\n    return json({ error: \"Failed to fetch user data\" }, { status: 500 });\n  }\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;AAEA,eAAe,GAAG,CAAC,EAAE,GAAG,EAAE,EAAE;AAC5B,EAAE,IAAI;AACN,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC;AACjD,IAAI,QAAQ,MAAM;AAClB,MAAM,KAAK,UAAU;AACrB,QAAQ,MAAM,EAAE,GAAG,MAAM,iBAAiB,EAAE;AAC5C,QAAQ,MAAM,QAAQ,GAAG,MAAM,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC;AAC3D,UAAU,YAAY,EAAE,SAAS;AACjC,UAAU,GAAG,EAAE;AACf,YAAY,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE;AAC1C,YAAY,EAAE,MAAM,EAAE,QAAQ;AAC9B;AACA,SAAS,CAAC,CAAC,IAAI,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC,OAAO,EAAE;AAC1D,QAAQ,MAAM,iBAAiB,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,OAAO,MAAM;AAC7D,UAAU,EAAE,EAAE,OAAO,CAAC,GAAG;AACzB,UAAU,aAAa,EAAE,OAAO,CAAC,cAAc;AAC/C,UAAU,QAAQ,EAAE,OAAO,CAAC,SAAS;AACrC,UAAU,UAAU,EAAE,OAAO,CAAC,UAAU;AACxC,UAAU,SAAS,EAAE,OAAO,CAAC,SAAS;AACtC,UAAU,aAAa,EAAE,OAAO,CAAC,cAAc;AAC/C,UAAU,KAAK,EAAE,OAAO,CAAC,KAAK;AAC9B,UAAU,WAAW,EAAE,OAAO,CAAC,YAAY;AAC3C,UAAU,SAAS,EAAE,OAAO,CAAC,UAAU;AACvC,UAAU,SAAS,EAAE,OAAO,CAAC;AAC7B,SAAS,CAAC,CAAC;AACX,QAAQ,OAAO,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,iBAAiB,EAAE,CAAC;AAC/D,MAAM;AACN,QAAQ,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,0BAA0B,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC3E;AACA,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAE,KAAK,CAAC;AAChD,IAAI,IAAI,KAAK,CAAC,IAAI,KAAK,cAAc,IAAI,KAAK,CAAC,IAAI,KAAK,WAAW,EAAE;AACrE,MAAM,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,4BAA4B,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC3E,IAAI;AACJ,IAAI,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,2BAA2B,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AACxE,EAAE;AACF;;;;"}