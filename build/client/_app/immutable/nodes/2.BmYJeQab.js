const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../assets/odometer-theme-default.DMiGbRSv.css"])))=>i.map(i=>d[i]);
import"../chunks/DsnmJJEf.js";import{h as Yr,aL as Ts,q as Nt,ae as xa,_ as Os,ad as Bt,Q as s,t as o,z as t,A as a,B as r,aV as Ea,l as e,w as p,C as d,aS as N,x as i,y as $t,ah as Wt,v as na,R as ti,i as Js,ag as ya,O as u,aX as Ns,aY as Na,aZ as ns,m as us,aT as Ps,Z as ws,j as n,a_ as Sr,ai as wt,a$ as wr,b0 as si,b1 as ri,aK as cr,b2 as ii,aU as ni,b3 as oi}from"../chunks/CzqljEhS.js";import{i as m,p as Ct,b as zr,a as Rs,c as Is,d as Qr}from"../chunks/C8VmeVqX.js";import{d as li,c as Es,f as ar,g as Cs,r as ka,s as B,h as xr,a as la,e as ea,t as qe,m as ms,i as ds,b as Ta,j as di,T as ci,k as vi}from"../chunks/bkyvbsfU.js";import{i as os}from"../chunks/BfPXC66o.js";import{_ as Vr}from"../chunks/D9Z9MdNV.js";const ui=!0;function vs(re,_,f,S){var T=re.__style;if(Yr||T!==_){var D=li(_);(!Yr||D!==re.getAttribute("style"))&&(D==null?re.removeAttribute("style"):re.style.cssText=D),re.__style=_}return S}function Vs(re){return function(..._){var f=_[0];return f.stopPropagation(),re?.apply(this,_)}}function Ss(re){return function(..._){var f=_[0];return f.preventDefault(),re?.apply(this,_)}}const mi=ui,Zr=re=>{const _=/^[A-Z]{3}-\d{4}-\d{4}$/;return re?_.test(re)?"":"Please enter a valid ID Number (e.g., STU-2025-0001)":"ID Number is required"},Kr=re=>re?"":"Password is required",Xr=()=>document.documentElement.getAttribute("data-theme")||"light",pi=re=>{document.documentElement.setAttribute("data-theme",re),localStorage.setItem("theme",re)},_i=()=>{const _=Xr()==="dark"?"light":"dark";return pi(_),_},fi=async({accountNumber:re,password:_})=>{try{const S=await(await fetch("/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountNumber:re,password:_})})).json();if(S.success){const T={id:S.user.id,name:S.user.name,firstName:S.user.firstName,gender:S.user.gender,accountNumber:S.user.accountNumber,accountType:S.user.accountType,isAuthenticated:!0};return Es.login(T.accountType,T),ar(`Login successful! Welcome back, ${T.name}.`),console.log("Login successful:",{accountNumber:re,userType:T.accountType}),T}else throw new Error(S.error||"Invalid credentials. Please try again.")}catch(f){const S=f.message||"Network error. Please try again.";throw Cs(S),new Error(S)}};function gi(re,_){const f=_i();s(_,f==="dark")}const bi=(re,_,f)=>{s(_,re.target.value,!0),e(f).idNumber&&s(f,{...e(f),idNumber:Zr(e(_))},!0)},hi=(re,_,f)=>{s(_,re.target.value,!0),e(f).password&&s(f,{...e(f),password:Kr(e(_))},!0)},Jr=(re,_)=>{re.key==="Enter"&&(re.preventDefault(),_(re))};var yi=o('<div class="error-text"> </div>'),wi=(re,_)=>{re.preventDefault(),re.stopPropagation(),s(_,!e(_))},Si=(re,_)=>{re.key==="Enter"&&(re.preventDefault(),re.stopPropagation(),s(_,!e(_)))},xi=o('<div class="error-text"> </div>'),ki=(re,_)=>{re.key==="Enter"&&(re.preventDefault(),_(re))},Di=o('<div class="loading-spinner"></div>'),Ti=o("<span>Login</span>"),Ai=o('<div class="login-container"><button class="theme-toggle-btn" aria-label="Toggle dark mode"><span class="material-symbols-outlined"> </span></button> <div class="left-side"><div class="login-header"><h1 class="login-title">Login</h1> <h2 class="login-subtitle">Enter your account details</h2></div> <form class="login-form" novalidate="" autocomplete="off"><div class="form-field"><div><span class="leading-icon material-symbols-outlined">badge</span> <input type="text" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" class="text-input" placeholder=" "/> <label class="text-label" for="idnumber-input">ID Number</label></div> <!></div> <div class="form-field"><div><span class="leading-icon material-symbols-outlined">lock</span> <input autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" class="text-input" placeholder=" "/> <label class="text-label" for="password-input">Password</label> <button type="button" class="trailing-icon-button"><span class="material-symbols-outlined"> </span></button></div> <!></div> <button id="login-submit-btn" type="submit" class="custom-filled-button login-submit" aria-label="Sign in"><!></button> <button type="button" id="forgot-password-btn" class="custom-text-button forgot-password" aria-label="forgot-password">Forgot Password?</button></form></div> <div class="right-side"><div class="welcome-text"><h1 class="welcome-title">Welcome</h1> <p class="welcome-subtitle">Login to access your account</p></div></div></div>');function ji(re,_){Nt(_,!0);let f=xa(""),S=xa(""),T=xa(!1),D=xa(!1),y=xa(Os({idNumber:"",password:"",general:""})),h=xa(!1);Bt(()=>{const fe=Xr();s(h,fe==="dark")});const R=async fe=>{fe.preventDefault(),s(y,{idNumber:"",password:"",general:""},!0);const E=Zr(e(f)),$=Kr(e(S));if(E||$){s(y,{idNumber:E,password:$,general:""},!0);return}s(T,!0);try{await fi({accountNumber:e(f),password:e(S)})}catch(Y){s(y,{...e(y),general:Y.message},!0)}finally{s(T,!1)}};var H=Ai(),O=t(H);O.__click=[gi,h];var te=t(O),me=t(te,!0);a(te),a(O);var b=r(O,2),W=r(t(b),2),A=t(W),q=t(A),J=r(t(q),2);ka(J),J.__input=[bi,f,y],J.__keydown=[Jr,R],Ea(2),a(q);var x=r(q,2);{var F=fe=>{var E=yi(),$=t(E,!0);a(E),p(()=>d($,e(y).idNumber)),i(fe,E)};m(x,fe=>{e(y).idNumber&&fe(F)})}a(A);var ve=r(A,2),K=t(ve),Le=r(t(K),2);ka(Le),Le.__input=[hi,S,y],Le.__keydown=[Jr,R];var ge=r(Le,4);ge.__click=[wi,D],ge.__keydown=[Si,D];var P=t(ge),oe=t(P,!0);a(P),a(ge),a(K);var se=r(K,2);{var Z=fe=>{var E=xi(),$=t(E,!0);a(E),p(()=>d($,e(y).password)),i(fe,E)};m(se,fe=>{e(y).password&&fe(Z)})}a(ve);var Ce=r(ve,2);Ce.__keydown=[ki,R];var X=t(Ce);{var C=fe=>{var E=Di();i(fe,E)},he=fe=>{var E=Ti();i(fe,E)};m(X,fe=>{e(T)?fe(C):fe(he,!1)})}a(Ce),Ea(2),a(W),a(b),Ea(2),a(H),p(()=>{d(me,e(h)?"light_mode":"dark_mode"),B(q,1,`custom-text-field ${e(y).idNumber?"error":""}`),xr(J,e(f)),B(K,1,`custom-text-field ${e(y).password?"error":""}`),la(Le,"type",e(D)?"text":"password"),xr(Le,e(S)),la(ge,"aria-label",e(D)?"Hide password":"Show password"),d(oe,e(D)?"visibility":"visibility_off"),Ce.disabled=e(T)}),N("submit",W,R),i(re,H),$t()}Ts(["click","input","keydown"]);function Ci(re,_){s(_,!e(_))}function Ni(re,_,f){s(_,!e(_)),f()}var $i=o('<img alt="Profile" class="avatar-image"/>'),qi=o('<div class="avatar-placeholder"> </div>'),Li=(re,_,f)=>{_(),f.onnavigate("profile")},Ei=async(re,_,f)=>{_(),await f.onlogout(),ar("Logged out successfully. See you next time!")},Fi=o('<div class="user-dropdown-menu"><button class="dropdown-item"><span class="material-symbols-outlined">person</span> Profile</button> <button class="dropdown-item"><span class="material-symbols-outlined">logout</span> Logout</button></div>'),Mi=o('<nav class="student-navbar"><div class="navbar-container"><div class="navbar-left"><button class="icon-button hamburger-menu" aria-label="Toggle navigation menu"><span class="material-symbols-outlined">menu</span></button> <div class="logo-section"><span class="material-symbols-outlined logo-icon">school</span> <span class="app-title"> </span></div></div> <div class="navbar-right"><button class="icon-button dark-mode-toggle" aria-label="Toggle dark mode"><span class="material-symbols-outlined"> </span></button> <div class="user-profile-container"><button class="user-profile"><div class="user-info"><span class="user-name"> </span> <span class="user-id"> </span></div> <div class="user-avatar"><!></div></button> <!></div></div></div></nav>');function Gi(re,_){Nt(_,!0);let f=Ct(_,"studentName",3,"John Does"),S=Ct(_,"firstName",3,"John"),T=Ct(_,"gender",3,"male"),D=Ct(_,"accountNumber",3,"STU-2025-0001"),y=Ct(_,"profileImage",3,null);function h(M){return M==="female"?"Ms.":"Mr."}let R=Wt(()=>`${h(T())} ${S()}`),H=xa(!0),O=xa(!1);function te(){s(O,!1)}function me(M){e(O)&&!M.target.closest(".user-profile-container")&&te()}Bt(()=>{const M=localStorage.getItem("theme");return s(H,M!=="light"),b(),document.addEventListener("click",me),()=>{document.removeEventListener("click",me)}});function b(){e(H)?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))}function W(M){return M.split(" ").map(le=>le.charAt(0)).join("").toUpperCase().slice(0,2)}var A=Mi(),q=t(A),J=t(q),x=t(J);x.__click=function(...M){_.onToggleNavRail?.apply(this,M)};var F=r(x,2),ve=r(t(F),2),K=t(ve);a(ve),a(F),a(J);var Le=r(J,2),ge=t(Le);ge.__click=[Ni,H,b];var P=t(ge),oe=t(P,!0);a(P),a(ge);var se=r(ge,2),Z=t(se);Z.__click=[Ci,O];var Ce=t(Z),X=t(Ce),C=t(X,!0);a(X);var he=r(X,2),fe=t(he);a(he),a(Ce);var E=r(Ce,2),$=t(E);{var Y=M=>{var le=$i();p(()=>la(le,"src",y())),i(M,le)},ee=M=>{var le=qi(),Pe=t(le,!0);a(le),p(Oe=>d(Pe,Oe),[()=>W(S())]),i(M,le)};m($,M=>{y()?M(Y):M(ee,!1)})}a(E),a(Z);var L=r(Z,2);{var De=M=>{var le=Fi(),Pe=t(le);Pe.__click=[Li,te,_];var Oe=r(Pe,2);Oe.__click=[Ei,te,_],a(le),i(M,le)};m(L,M=>{e(O)&&M(De)})}a(se),a(Le),a(q),a(A),p(()=>{d(K,`Welcome, ${e(R)??""}`),d(oe,e(H)?"light_mode":"dark_mode"),d(C,f()),d(fe,`Account: ${D()??""}`)}),i(re,A),$t()}Ts(["click"]);var Ii=(re,_,f)=>_(e(f).id),Pi=o('<button><div class="rail-icon-container"><span class="material-symbols-outlined rail-icon"> </span></div> <span class="rail-label"> </span></button>'),Ri=(re,_,f)=>_(e(f).id),Oi=o('<button><div class="nav-icon-container"><span class="material-symbols-outlined nav-icon"> </span></div></button>'),Ui=(re,_)=>_("todo"),Wi=(re,_,f)=>_(e(f).id),Yi=o('<button><div class="nav-icon-container"><span class="material-symbols-outlined nav-icon"> </span></div></button>'),Qi=o(`<nav role="navigation" aria-label="Student portal navigation"><div class="rail-container"></div></nav> <nav class="bottom-navigation" role="	navigation" aria-label="Student portal navigation"><div class="nav-container"><!> <button aria-label="Todo List"><div class="nav-icon-container"><span class="material-symbols-outlined nav-icon" style="font-variation-settings: 'FILL' 1; font-size: 28px;">checklist</span></div></button> <!></div></nav>`,1);function Vi(re,_){Nt(_,!0);let f=Ct(_,"activeSection",15,"grades"),S=Ct(_,"isNavRailVisible",3,!0);const T=[{id:"grades",label:"My Grades",icon:"grade"},{id:"schedule",label:"Schedule",icon:"schedule"},{id:"documents",label:"Documents",icon:"description"},{id:"notifications",label:"Notifications",icon:"notifications"},{id:"todo",label:"Todo List",icon:"checklist"}];function D(q){f(q),_.onnavigate&&_.onnavigate({detail:{section:q}})}var y=Qi(),h=na(y);let R;var H=t(h);ea(H,21,()=>T,q=>q.id,(q,J)=>{var x=Pi();let F;x.__click=[Ii,D,J];var ve=t(x),K=t(ve),Le=t(K,!0);a(K),a(ve);var ge=r(ve,2),P=t(ge,!0);a(ge),a(x),p(oe=>{F=B(x,1,"rail-item",null,F,oe),la(x,"aria-label",e(J).label),la(x,"aria-current",e(J).id===f()?"page":void 0),d(Le,e(J).icon),d(P,e(J).label)},[()=>({active:e(J).id===f()})]),i(q,x)}),a(H),a(h);var O=r(h,2),te=t(O),me=t(te);ea(me,17,()=>T.slice(0,2),q=>q.id,(q,J)=>{var x=Oi();let F;x.__click=[Ri,D,J];var ve=t(x),K=t(ve),Le=t(K,!0);a(K),a(ve),a(x),p(ge=>{F=B(x,1,"nav-item",null,F,ge),la(x,"aria-label",e(J).label),la(x,"aria-current",e(J).id===f()?"page":void 0),d(Le,e(J).icon)},[()=>({active:e(J).id===f()})]),i(q,x)});var b=r(me,2);let W;b.__click=[Ui,D];var A=r(b,2);ea(A,17,()=>T.slice(2,4),q=>q.id,(q,J)=>{var x=Yi();let F;x.__click=[Wi,D,J];var ve=t(x),K=t(ve),Le=t(K,!0);a(K),a(ve),a(x),p(ge=>{F=B(x,1,"nav-item",null,F,ge),la(x,"aria-label",e(J).label),la(x,"aria-current",e(J).id===f()?"page":void 0),d(Le,e(J).icon)},[()=>({active:e(J).id===f()})]),i(q,x)}),a(te),a(O),p((q,J)=>{R=B(h,1,"navigation-rail",null,R,q),W=B(b,1,"nav-item",null,W,J),la(b,"aria-current",f()==="todo"?"page":void 0)},[()=>({collapsed:!S()}),()=>({active:f()==="todo"})]),i(re,y),$t()}Ts(["click"]);async function Gs(re,_={}){const f=ti(Es),S={"Content-Type":"application/json",..._.headers};f.isAuthenticated&&f.userData&&(S["x-user-id"]=f.userData.id.toString(),S["x-user-account-number"]=f.userData.accountNumber,S["x-user-name"]=encodeURIComponent(f.userData.name));const T={..._,headers:S},D=await fetch(re,T);if(!D.ok){const h=await D.json(),R=new Error(h.message||h.error||"Request failed");throw R.response=h,R.status=D.status,R}return await D.json()}const ut={get:async(re,_={})=>Gs(re,{..._,method:"GET"}),post:async(re,_,f={})=>Gs(re,{...f,method:"POST",body:JSON.stringify(_)}),put:async(re,_,f={})=>Gs(re,{...f,method:"PUT",body:JSON.stringify(_)}),delete:async(re,_,f={})=>Gs(re,{...f,method:"DELETE",body:_?JSON.stringify(_):void 0}),patch:async(re,_,f={})=>Gs(re,{...f,method:"PATCH",body:JSON.stringify(_)})};function Ji(){window.handleModalClose=()=>{ms.closeAll()},ms.open("CustomModal",{title:"Change Profile Photo",content:`<div class="profile-picture-modal">
				<div class="modal-button-group">
					<button class="modal-action-btn upload-btn" onclick="handleUpload()">
						Upload Photo
					</button>
					<button class="modal-action-btn remove-btn" onclick="handleRemove()">
						Remove Current Photo
					</button>
					<button class="modal-action-btn cancel-btn" onclick="handleModalClose()">
						Cancel
					</button>
				</div>
			</div>`},{size:"small",closable:!1})}var Hi=o('<div class="error-container"><div class="error-icon"><span class="material-symbols-outlined">error</span></div> <p class="error-message"> </p> <button class="retry-btn"><span class="material-symbols-outlined">refresh</span> Retry</button></div>'),Bi=o('<div class="profile-loading-container"><span class="profile-loader"></span> <p class="profile-loading-text">Loading student information...</p></div>'),zi=o('<div class="info-row row-five"><div class="info-card"><div class="info-icon"><span class="material-symbols-outlined">badge</span></div> <div class="info-content"><div class="info-label">Student ID</div> <div class="info-value"> </div></div></div> <div class="info-card"><div class="info-icon"><span class="material-symbols-outlined">person</span></div> <div class="info-content"><div class="info-label">Full Name</div> <div class="info-value"> </div></div></div> <div class="info-card"><div class="info-icon"><span class="material-symbols-outlined">school</span></div> <div class="info-content"><div class="info-label">Year Level</div> <div class="info-value"> </div></div></div> <div class="info-card"><div class="info-icon"><span class="material-symbols-outlined">group</span></div> <div class="info-content"><div class="info-label">Section</div> <div class="info-value"> </div></div></div> <div class="info-card"><div class="info-icon"><span class="material-symbols-outlined">menu_book</span></div> <div class="info-content"><div class="info-label">Total Subjects</div> <div class="info-value"> </div></div></div></div> <div class="info-row row-three"><div class="info-card"><div class="info-icon"><span class="material-symbols-outlined">email</span></div> <div class="info-content"><div class="info-label">Email</div> <div class="info-value"> </div></div></div> <div class="info-card"><div class="info-icon"><span class="material-symbols-outlined">phone</span></div> <div class="info-content"><div class="info-label">Contact Number</div> <div class="info-value"> </div></div></div> <div class="info-card"><div class="info-icon"><span class="material-symbols-outlined">family_restroom</span></div> <div class="info-content"><div class="info-label">Guardian</div> <div class="info-value"> </div></div></div></div> <div class="info-row row-one"><div class="info-card address-card"><div class="info-icon"><span class="material-symbols-outlined">home</span></div> <div class="info-content"><div class="info-label">Address</div> <div class="info-value"> </div></div></div></div> <div class="info-row row-two"><div class="info-card"><div class="info-icon"><span class="material-symbols-outlined">cake</span></div> <div class="info-content"><div class="info-label">Birth Date</div> <div class="info-value"> </div></div></div> <div class="info-card"><div class="info-icon"><span class="material-symbols-outlined">person_outline</span></div> <div class="info-content"><div class="info-label">Age</div> <div class="info-value"> </div></div></div></div>',1),Zi=o('<div class="profile-loading-container"><span class="profile-loader"></span> <p class="profile-loading-text">Loading academic performance...</p></div>'),Ki=o('<div class="info-row row-two"><div class="info-card"><div class="info-icon"><span class="material-symbols-outlined">grade</span></div> <div class="info-content"><div class="info-label">General Average</div> <div class="info-value"> </div></div></div> <div class="info-card"><div class="info-icon"><span class="material-symbols-outlined">leaderboard</span></div> <div class="info-content"><div class="info-label">Class Rank</div> <div class="info-value"> </div></div></div></div>'),Xi=o('<div class="profile-loading-container"><span class="profile-loader"></span> <p class="profile-loading-text">Loading enrolled subjects...</p></div>'),en=o('<div class="subject-card"><div class="subject-icon-column"><div class="subject-icon"><span class="material-symbols-outlined">book</span></div></div> <div class="subject-details-column"><h3 class="subject-name"> </h3> <p class="teacher-name"> </p> <div class="subject-id"><span class="material-symbols-outlined">tag</span> <span class="subject-id-text"> </span></div></div></div>'),an=o('<div class="subjects-grid"></div>'),tn=o('<div class="subjects-empty"><span class="material-symbols-outlined">menu_book</span> <p>No subjects enrolled yet</p></div>'),sn=o('<div class="profile-header"><div class="header-content"><h1 class="page-title">Student Profile</h1> <p class="page-subtitle">Personal Information & Academic Details</p></div> <div class="profile-avatar"><div class="avatar-circle"><span class="material-symbols-outlined">person</span> <div class="avatar-overlay"><span class="material-symbols-outlined edit-icon">edit</span></div></div></div></div> <div class="profile-info-section"><h2 class="section-title">Student Information</h2> <!></div> <div class="profile-academic-section"><h2 class="section-title">Academic Performance</h2> <!></div> <div class="profile-subjects-section"><h2 class="section-title">Enrolled Subjects</h2> <!></div>',1),rn=o('<div class="profile-container"><!></div>');function nn(re,_){Nt(_,!0);let f=xa(void 0),S=xa(null),T=xa(!0),D=xa(null);Js(()=>Es.subscribe(W=>{s(f,W,!0)}));async function y(){try{if(s(T,!0),s(D,null),!e(f)?.userData?.id)throw new Error("User not authenticated");const b=await ut.get("/api/accounts?type=student&limit=1000");if(!b.success)throw new Error(b.message||"Failed to fetch student data");console.log("API Response:",b),console.log("Auth State User Data:",e(f).userData),console.log("Looking for user ID:",e(f).userData.id),console.log("Looking for account number:",e(f).userData.accountNumber),console.log("Available accounts:",b.accounts.map(A=>({id:A.id,name:A.name,number:A.number})));const W=b.accounts.find(A=>A.id===e(f).userData.id||A.number===e(f).userData.accountNumber);if(!W)throw console.error("User not found in accounts list"),console.error("Auth user ID:",e(f).userData.id),console.error("Auth account number:",e(f).userData.accountNumber),console.error("Available account IDs:",b.accounts.map(A=>A.id)),console.error("Available account numbers:",b.accounts.map(A=>A.number)),new Error("Student data not found");s(S,W,!0)}catch(b){console.error("Error fetching student data:",b),s(D,b.message,!0),qe.error(`Failed to load profile data: ${b.message}`)}finally{s(T,!1)}}Js(()=>{e(f)?.userData?.id&&y()});let h=Wt(()=>({id:e(S)?.number||e(f)?.userData?.accountNumber||"N/A",name:e(S)?.name||e(f)?.userData?.name||"Student Name",firstName:e(S)?.firstName||e(f)?.userData?.firstName||"",lastName:e(S)?.lastName||"",middleInitial:e(S)?.middleInitial||"",yearLevel:e(S)?.gradeLevel?`Grade ${e(S).gradeLevel}`:"Not assigned",section:e(S)?.section||"Not assigned",email:e(S)?.email||"Not available",phone:e(S)?.contactNumber||"Not available",address:e(S)?.address||"Not available",birthDate:e(S)?.birthdate?new Date(e(S).birthdate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not available",age:e(S)?.age||"Not available",guardian:e(S)?.guardian||"Not available",gender:e(S)?.gender||e(f)?.userData?.gender||"male",academicSummary:{gpa:"Not available",rank:"Not available",totalStudents:"Not available"},subjects:[]})),R=Wt(()=>e(h).subjects.length||"Not available");var H=rn(),O=t(H);{var te=b=>{var W=Hi(),A=r(t(W),2),q=t(A);a(A);var J=r(A,2);J.__click=y,a(W),p(()=>d(q,`Failed to load profile data: ${e(D)??""}`)),i(b,W)},me=b=>{var W=sn(),A=na(W),q=r(t(A),2),J=t(q);J.__click=[Ji],a(q),a(A);var x=r(A,2),F=r(t(x),2);{var ve=C=>{var he=Bi();i(C,he)},K=C=>{var he=zi(),fe=na(he),E=t(fe),$=r(t(E),2),Y=r(t($),2),ee=t(Y,!0);a(Y),a($),a(E);var L=r(E,2),De=r(t(L),2),M=r(t(De),2),le=t(M,!0);a(M),a(De),a(L);var Pe=r(L,2),Oe=r(t(Pe),2),We=r(t(Oe),2),Ee=t(We,!0);a(We),a(Oe),a(Pe);var Ye=r(Pe,2),He=r(t(Ye),2),Fe=r(t(He),2),_e=t(Fe,!0);a(Fe),a(He),a(Ye);var we=r(Ye,2),Ne=r(t(we),2),Re=r(t(Ne),2),ye=t(Re,!0);a(Re),a(Ne),a(we),a(fe);var ue=r(fe,2),g=t(ue),v=r(t(g),2),l=r(t(v),2),c=t(l,!0);a(l),a(v),a(g);var w=r(g,2),G=r(t(w),2),ce=r(t(G),2),Ae=t(ce,!0);a(ce),a(G),a(w);var ke=r(w,2),I=r(t(ke),2),Se=r(t(I),2),xe=t(Se,!0);a(Se),a(I),a(ke),a(ue);var ze=r(ue,2),sa=t(ze),va=r(t(sa),2),La=r(t(va),2),ae=t(La,!0);a(La),a(va),a(sa),a(ze);var U=r(ze,2),Q=t(U),Ue=r(t(Q),2),ra=r(t(Ue),2),ca=t(ra,!0);a(ra),a(Ue),a(Q);var oa=r(Q,2),_a=r(t(oa),2),ha=r(t(_a),2),fa=t(ha,!0);a(ha),a(_a),a(oa),a(U),p(()=>{d(ee,e(h).id),d(le,e(h).name),d(Ee,e(h).yearLevel),d(_e,e(h).section||"Not assigned"),d(ye,e(R)||"Not available"),d(c,e(h).email||"Not provided"),d(Ae,e(h).phone||"Not provided"),d(xe,e(h).guardian||"Not provided"),d(ae,e(h).address||"Not provided"),d(ca,e(h).birthDate||"Not provided"),d(fa,e(h).age?`${e(h).age} years old`:"Not available")}),i(C,he)};m(F,C=>{e(T)?C(ve):C(K,!1)})}a(x);var Le=r(x,2),ge=r(t(Le),2);{var P=C=>{var he=Zi();i(C,he)},oe=C=>{var he=Ki(),fe=t(he),E=r(t(fe),2),$=r(t(E),2),Y=t($,!0);a($),a(E),a(fe);var ee=r(fe,2),L=r(t(ee),2),De=r(t(L),2),M=t(De,!0);a(De),a(L),a(ee),a(he),p(()=>{d(Y,e(h).academicSummary.gpa||"Not available"),d(M,e(h).academicSummary.rank&&e(h).academicSummary.totalStudents&&e(h).academicSummary.rank!=="Not available"&&e(h).academicSummary.totalStudents!=="Not available"?`${e(h).academicSummary.rank} of ${e(h).academicSummary.totalStudents}`:"Not available")}),i(C,he)};m(ge,C=>{e(T)?C(P):C(oe,!1)})}a(Le);var se=r(Le,2),Z=r(t(se),2);{var Ce=C=>{var he=Xi();i(C,he)},X=C=>{var he=ya(),fe=na(he);{var E=Y=>{var ee=an();ea(ee,21,()=>e(h).subjects,L=>L.id,(L,De)=>{var M=en(),le=t(M),Pe=t(le);a(le);var Oe=r(le,2),We=t(Oe),Ee=t(We,!0);a(We);var Ye=r(We,2),He=t(Ye,!0);a(Ye);var Fe=r(Ye,2),_e=r(t(Fe),2),we=t(_e,!0);a(_e),a(Fe),a(Oe),a(M),p(()=>{vs(Pe,`background-color: ${e(De).color??""}20; color: ${e(De).color??""}`),d(Ee,e(De).name),d(He,e(De).teacher),d(we,e(De).id)}),i(L,M)}),a(ee),i(Y,ee)},$=Y=>{var ee=tn();i(Y,ee)};m(fe,Y=>{e(h).subjects.length>0?Y(E):Y($,!1)},!0)}i(C,he)};m(Z,C=>{e(T)?C(Ce):C(X,!1)})}a(se),i(b,W)};m(O,b=>{e(D)?b(te):b(me,!1)})}a(H),i(re,H),$t()}Ts(["click"]);var on=o('<div class="odometer-container svelte-1ve39fg"><!></div>');function vr(re,_){Nt(_,!1);let f=Ct(_,"value",8,0),S=Ct(_,"format",8,"d"),T=Ct(_,"theme",8,"default"),D=Ct(_,"duration",8,2e3),y=Ct(_,"auto",8,!0);Ct(_,"selector",8,null);let h=Ct(_,"useCommaDecimal",8,!1),R=Ct(_,"animation",8,"ease"),H=u(),O=u();Bt(async()=>{try{const b=(await Vr(async()=>{const{default:W}=await import("../chunks/7634Yfgp.js").then(A=>A.o);return{default:W}},[],import.meta.url)).default;await Vr(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url),s(O,new b({el:e(H),format:S(),theme:T(),duration:D(),auto:y(),animation:R(),value:0})),h()&&new MutationObserver(()=>{const A=e(H).textContent;A&&A.includes(".")&&Ns(H,e(H).textContent=A.replace(".",","))}).observe(e(H),{childList:!0,subtree:!0,characterData:!0}),setTimeout(()=>{e(O)&&e(O).update(f())},100)}catch(b){console.error("Failed to load odometer:",b)}}),Na(()=>(e(O),us(f())),()=>{e(O)&&mi&&e(O).update(f())}),ns(),os();var te=on(),me=t(te);m(me,b=>{}),a(te),zr(te,b=>s(H,b),()=>e(H)),i(re,te),$t()}var ln=o("<button> </button>"),dn=o('<div class="dropdown-menu-quarter"></div>'),cn=o('<div class="progress-bar"><div class="progress-fill"></div></div>'),vn=o('<div class="grade-large"><!></div>'),un=o('<div class="no-grade-large"><span class="material-symbols-outlined">remove</span> <span class="no-grade-text">No Grade</span></div>'),mn=o('<div class="subject-card"><div class="subject-icon-column"><div class="subject-icon"><span class="material-symbols-outlined">book</span></div></div> <div class="subject-details-column"><h3 class="subject-name"> </h3> <p class="teacher-name"> </p> <!></div> <div class="grade-column"><!></div></div>'),pn=o('<div class="grades-container"><div class="grades-header"><div class="header-content"><h1 class="page-title">My Grades</h1> <p class="page-subtitle">Academic Performance Overview</p></div> <div class="quarter-selector"><div class="custom-dropdown"><button class="dropdown-button"><span class="material-symbols-outlined">calendar_today</span> <span class="dropdown-text"> </span> <span>expand_more</span></button> <!></div></div></div> <div class="performance-card"><h2 class="performance-title">Overall Performance</h2> <div class="performance-content"><div class="performance-main"><div class="average-section"><div class="average-value"><div><!></div></div> <div class="average-label">Current Average</div></div> <div class="subjects-section-card"><div class="subjects-value"><div><!></div></div> <div class="subjects-label">Total Subjects</div></div></div></div></div> <div class="subjects-section"><h2 class="section-title">Subject Performance</h2> <div class="subjects-grid"></div></div></div>');function _n(re,_){Nt(_,!1);let f=u("1st Quarter"),S=["1st Quarter","2nd Quarter","3rd Quarter","4th Quarter"],T=u(!1);function D(){s(T,!e(T))}function y(ee){s(f,ee),s(T,!1)}function h(ee){e(T)&&!ee.target.closest(".custom-dropdown")&&s(T,!1)}let R=5;function H(ee){return ee>=85?"var(--grade-excellent)":ee>=80?"var(--grade-good)":ee>=75?"var(--grade-satisfactory)":ee>=65?"var(--grade-needs-improvement)":"var(--grade-no-grade)"}let O=u([{id:1,name:"Mathematics",teacher:"Prof. Maria Santos",credits:3,numericGrade:95,color:"var(--grade-excellent)"},{id:2,name:"Physics",teacher:"Dr. John Rodriguez",credits:3,numericGrade:88,color:"var(--grade-good)"},{id:3,name:"Chemistry",teacher:"Prof. Ana Dela Cruz",credits:3,numericGrade:76,color:"var(--grade-satisfactory)"},{id:4,name:"Computer Science",teacher:"Dr. Michael Tan",credits:4,numericGrade:94,color:"var(--grade-excellent)"},{id:5,name:"English Literature",teacher:"Prof. Sarah Johnson",credits:2,numericGrade:0,color:"var(--grade-no-grade)"}]),te=u();Na(()=>e(O),()=>{s(O,e(O).map(ee=>({...ee,color:H(ee.numericGrade)})))}),Na(()=>e(O),()=>{const ee=e(O).filter(L=>L.numericGrade!=null&&typeof L.numericGrade=="number"&&L.numericGrade>0);if(ee.length>0){const L=ee.reduce((De,M)=>De+M.numericGrade,0);s(te,(L/ee.length).toFixed(2))}else s(te,"0.00")}),ns(),os();var me=pn();N("click",Ps,h);var b=t(me),W=r(t(b),2),A=t(W),q=t(A),J=r(t(q),2),x=t(J,!0);a(J);var F=r(J,2);let ve;a(q);var K=r(q,2);{var Le=ee=>{var L=dn();ea(L,5,()=>S,ds,(De,M)=>{var le=ln();let Pe;var Oe=t(le,!0);a(le),p(We=>{Pe=B(le,1,"dropdown-item-quarter",null,Pe,We),d(Oe,e(M))},[()=>({active:e(M)===e(f)})]),N("click",le,()=>y(e(M))),i(De,le)}),a(L),i(ee,L)};m(K,ee=>{e(T)&&ee(Le)})}a(A),a(W),a(b);var ge=r(b,2),P=r(t(ge),2),oe=t(P),se=t(oe),Z=t(se),Ce=t(Z),X=t(Ce);{let ee=ws(()=>(e(te),n(()=>parseFloat(e(te)))));vr(X,{get value(){return e(ee)},format:"d.dd",duration:3e3,animation:"ease-out"})}a(Ce),a(Z),Ea(2),a(se);var C=r(se,2),he=t(C),fe=t(he),E=t(fe);vr(E,{value:R,format:"d",duration:3e3,animation:"ease-out"}),a(fe),a(he),Ea(2),a(C),a(oe),a(P),a(ge);var $=r(ge,2),Y=r(t($),2);ea(Y,5,()=>e(O),ee=>ee.id,(ee,L)=>{var De=mn(),M=t(De),le=t(M);a(M);var Pe=r(M,2),Oe=t(Pe),We=t(Oe,!0);a(Oe);var Ee=r(Oe,2),Ye=t(Ee,!0);a(Ee);var He=r(Ee,2);{var Fe=ye=>{var ue=cn(),g=t(ue);a(ue),p(()=>vs(g,`width: ${e(L),n(()=>e(L).numericGrade)??""}%; background-color: ${e(L),n(()=>e(L).color)??""}`)),i(ye,ue)};m(He,ye=>{e(L),n(()=>e(L).numericGrade>0)&&ye(Fe)})}a(Pe);var _e=r(Pe,2),we=t(_e);{var Ne=ye=>{var ue=vn(),g=t(ue);vr(g,{get value(){return e(L),n(()=>e(L).numericGrade)},format:"d",duration:3e3,animation:"ease-out"}),a(ue),p(()=>vs(ue,`color: ${e(L),n(()=>e(L).color)??""}`)),i(ye,ue)},Re=ye=>{var ue=un();p(()=>vs(ue,`color: ${e(L),n(()=>e(L).color)??""}`)),i(ye,ue)};m(we,ye=>{e(L),n(()=>e(L).numericGrade>0)?ye(Ne):ye(Re,!1)})}a(_e),a(De),p(()=>{vs(le,`background-color: ${e(L),n(()=>e(L).color)??""}20; color: ${e(L),n(()=>e(L).color)??""}`),d(We,(e(L),n(()=>e(L).name))),d(Ye,(e(L),n(()=>e(L).teacher)))}),i(ee,De)}),a(Y),a($),a(me),p((ee,L)=>{d(x,e(f)),ve=B(F,1,"material-symbols-outlined dropdown-arrow",null,ve,ee),vs(Z,`color: ${L??""}`)},[()=>({rotated:e(T)}),()=>(e(te),n(()=>H(parseFloat(e(te)))))]),N("click",q,D),i(re,me),$t()}var fn=o('<button><div class="day-name"> </div> <div class="day-name-full"> </div></button>'),gn=o("<button> </button>"),bn=o('<div class="schedule-dropdown-menu"></div>'),hn=o('<div class="loading-message"><div class="loading-icon"><span class="material-symbols-outlined">schedule</span></div> <h3>Loading Schedule...</h3> <p>Please wait while we fetch your class schedule.</p></div>'),yn=o('<div class="error-message"><div class="error-icon"><span class="material-symbols-outlined">error</span></div> <h3>Error Loading Schedule</h3> <p> </p> <button class="retry-button"><span class="material-symbols-outlined">refresh</span> Try Again</button></div>'),wn=o('<div class="class-teacher"><span class="material-symbols-outlined">person_book</span> <span> </span></div>'),Sn=o('<div><div class="class-header"><h3 class="class-name"> </h3> <span class="class-time"> </span></div> <div class="class-details"><div class="class-location"><span class="material-symbols-outlined">location_on</span> <span> </span></div> <!></div></div>'),xn=o('<div class="classes-list"></div>'),kn=o('<div class="no-classes-message"><div class="no-classes-icon"><span class="material-symbols-outlined">event_available</span></div> <h3>No Classes Scheduled</h3> <p> </p></div>'),Dn=o('<div class="schedule-container" role="button" tabindex="0"><div class="schedule-header"><h1 class="page-title">Schedule</h1> <p class="page-subtitle">Your weekly class schedule</p></div> <div class="week-navigation"><div class="week-title"><span> </span></div> <div class="day-selector"></div> <div class="schedule-mobile-dropdown"><button class="schedule-dropdown-toggle-date"><span> </span> <span>expand_more</span></button> <!></div></div> <div class="classes-section"><h2> </h2> <!></div></div>');function Tn(re,_){Nt(_,!1);const[f,S]=Rs(),T=()=>Is(Es,"$authStore",f),D=u(),y=u(),h=new Date,R=["January","February","March","April","May","June","July","August","September","October","November","December"],H=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],O=R[h.getMonth()],te=h.getDate(),me=H[h.getDay()],b={1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri"},W=h.getDay();let A=u(b[W]||"Mon");const q=["blue","green","purple","yellow","orange"];function J(we){return q[we%q.length]}let x=u([]),F=u(!0),ve=u(null);function K(we){const Ne={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[]},Re={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri"},ye={Mon:0,Tue:0,Wed:0,Thu:0,Fri:0};return we.forEach(ue=>{const g=Re[ue.day_of_week.toLowerCase()];if(g){const v=Le(ue.start_time),l=Le(ue.end_time);let c,w;ue.schedule_type==="subject"?(c=ue.subject_name||"Unknown Subject",w=ue.teacher_name||"No Teacher Assigned"):ue.schedule_type==="activity"&&(c=ue.activity_type_name||"Activity",w=ue.teacher_name||"");const G={name:c,time:`${v} - ${l}`,room:ue.room_name||"TBA",teacher:w,scheduleType:ue.schedule_type,color:J(ye[g])};Ne[g].push(G),ye[g]++}}),Ne}function Le(we){const[Ne,Re]=we.split(":"),ye=parseInt(Ne),ue=ye>=12?"PM":"AM";return`${(ye===0?12:ye>12?ye-12:ye).toString().padStart(2,"0")}:${Re} ${ue}`}async function ge(){try{s(F,!0),s(ve,null);const we=T();if(!we.isAuthenticated||!we.userData?.id)throw new Error("User not authenticated");const Re=await(await fetch(`/api/schedules?action=student-schedules&studentId=${we.userData.id}&schoolYear=2024-2025`)).json();if(!Re.success)throw new Error(Re.error||"Failed to fetch schedule data");s(x,K(Re.data))}catch(we){console.error("Error fetching schedule data:",we),s(ve,we.message),s(x,{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[]})}finally{s(F,!1)}}Bt(()=>{ge()});const P=[{day:"Mon"},{day:"Tue"},{day:"Wed"},{day:"Thu"},{day:"Fri"}],oe={Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday"};let se=u(!1);function Z(we){we.target.closest(".schedule-mobile-dropdown")||s(se,!1)}function Ce(){s(se,!e(se))}function X(we){s(A,we),s(se,!1)}Na(()=>(e(x),e(A)),()=>{s(D,e(x)[e(A)]||[])}),Na(()=>e(A),()=>{s(y,oe[e(A)]||e(A))}),ns(),os();var C=Dn(),he=r(t(C),2),fe=t(he),E=t(fe),$=t(E);a(E),a(fe);var Y=r(fe,2);ea(Y,5,()=>P,ds,(we,Ne)=>{let Re=()=>e(Ne).day;var ye=fn(),ue=t(ye),g=t(ue,!0);a(ue);var v=r(ue,2),l=t(v,!0);a(v),a(ye),p(()=>{B(ye,1,`day-btn ${Re()===e(A)?"active":""}`),d(g,Re()),d(l,(Re(),n(()=>oe[Re()])))}),N("click",ye,()=>X(Re())),i(we,ye)}),a(Y);var ee=r(Y,2),L=t(ee),De=t(L),M=t(De,!0);a(De);var le=r(De,2);a(L);var Pe=r(L,2);{var Oe=we=>{var Ne=bn();ea(Ne,5,()=>P,ds,(Re,ye)=>{let ue=()=>e(ye).day;var g=gn(),v=t(g,!0);a(g),p(()=>{B(g,1,`schedule-dropdown-item ${ue()===e(A)?"selected":""}`),d(v,(ue(),n(()=>oe[ue()])))}),N("click",g,()=>X(ue())),i(Re,g)}),a(Ne),i(we,Ne)};m(Pe,we=>{e(se)&&we(Oe)})}a(ee),a(he);var We=r(he,2),Ee=t(We),Ye=t(Ee);a(Ee);var He=r(Ee,2);{var Fe=we=>{var Ne=hn();i(we,Ne)},_e=we=>{var Ne=ya(),Re=na(Ne);{var ye=g=>{var v=yn(),l=r(t(v),4),c=t(l,!0);a(l);var w=r(l,2);a(v),p(()=>d(c,e(ve))),N("click",w,ge),i(g,v)},ue=g=>{var v=ya(),l=na(v);{var c=G=>{var ce=xn();ea(ce,5,()=>e(D),ds,(Ae,ke)=>{var I=Sn(),Se=t(I),xe=t(Se),ze=t(xe,!0);a(xe);var sa=r(xe,2),va=t(sa,!0);a(sa),a(Se);var La=r(Se,2),ae=t(La),U=r(t(ae),2),Q=t(U,!0);a(U),a(ae);var Ue=r(ae,2);{var ra=ca=>{var oa=wn(),_a=r(t(oa),2),ha=t(_a,!0);a(_a),a(oa),p(()=>d(ha,(e(ke),n(()=>e(ke).teacher)))),i(ca,oa)};m(Ue,ca=>{e(ke),n(()=>e(ke).teacher)&&ca(ra)})}a(La),a(I),p(()=>{B(I,1,`class-card ${e(ke),n(()=>e(ke).color)??""}`),d(ze,(e(ke),n(()=>e(ke).name))),d(va,(e(ke),n(()=>e(ke).time))),d(Q,(e(ke),n(()=>e(ke).scheduleType==="activity"?"No room":e(ke).room)))}),i(Ae,I)}),a(ce),i(G,ce)},w=G=>{var ce=kn(),Ae=r(t(ce),4),ke=t(Ae);a(Ae),a(ce),p(()=>d(ke,`You don't have any classes scheduled for ${e(y)??""}. Enjoy your free day!`)),i(G,ce)};m(l,G=>{e(D),n(()=>e(D).length>0)?G(c):G(w,!1)},!0)}i(g,v)};m(Re,g=>{e(ve)?g(ye):g(ue,!1)},!0)}i(we,Ne)};m(He,we=>{e(F)?we(Fe):we(_e,!1)})}a(We),a(C),p(()=>{d($,`${me??""}, ${O??""} ${te??""}`),d(M,(e(A),n(()=>oe[e(A)]||"Select Day"))),B(le,1,`material-symbols-outlined schedule-dropdown-icon ${e(se)?"open":""}`),d(Ye,`${e(y)??""} Classes`)}),N("click",L,Ce),N("click",C,Z),N("keydown",C,Z),i(re,C),$t(),S()}var An=o('<button><div class="dropdown-item-content"><span class="dropdown-item-name"> </span> <span class="dropdown-item-desc"> </span></div></button>'),jn=o('<div class="dropdown-menu-document"></div>'),Cn=o('<span class="material-symbols-outlined spinning">hourglass_empty</span> Submitting...',1),Nn=o('<div class="request-form-section"><div class="form-container"><div class="form-header"><h2 class="form-title">New Document Request</h2> <p class="form-subtitle">Fill out the form below to request a document</p></div> <div class="form-content"><div class="form-group"><label class="form-label" for="document-type-dropdown"><span class="material-symbols-outlined form-icon">description</span> Document Type</label> <div class="custom-dropdown"><button id="document-type-dropdown" class="dropdown-toggle"><span><!></span> <span>expand_more</span></button> <!></div></div> <div class="form-group"><label class="form-label" for="description"><span class="material-symbols-outlined form-icon">edit_note</span> Purpose & Details</label> <textarea id="description" class="form-textarea enhanced" placeholder="Please describe the purpose of your request and any specific requirements..." rows="5"></textarea> <div class="form-help"><span class="material-symbols-outlined help-icon">info</span> Be specific about your needs to help us process your request efficiently</div></div> <div class="form-actions"><button class="cancel-button">Cancel</button> <button class="submit-button"><!></button></div></div></div></div>'),$n=o('<div class="request-footer completed-footer"><span class="footer-info"> </span></div>'),qn=o('<div class="request-footer processing-footer"><span class="footer-info"> </span></div>'),Ln=o(`<div class="request-footer pending-footer"><span class="footer-info">Awaiting review - We'll process your request soon</span> <button class="cancel-request-button"><span class="material-symbols-outlined">close</span> Cancel</button></div>`),En=o('<div class="request-footer cancelled-footer"><span class="footer-info"> </span></div>'),Fn=o('<div class="request-footer rejected-footer"><span class="footer-info"> </span></div>'),Mn=o('<div><div class="request-main-content"><div class="request-status-icon"><span class="material-symbols-outlined"> </span></div> <div class="request-content"><div class="request-header"><div class="request-info"><h3 class="request-title"> </h3> <p class="request-date"> </p></div> <div> </div></div> <p class="request-description"> </p></div></div> <!></div>'),Gn=o('<div class="document-request-container" role="button" tabindex="0"><div class="document-header"><div class="header-content"><h1 class="page-title">Document Requests</h1> <p class="page-subtitle">Request new documents or check existing requests</p></div></div> <div class="quick-actions-section"><div class="quick-actions-header"><h2 class="section-title">Quick Actions</h2> <p class="section-subtitle">Request new documents or check existing requests</p></div> <button class="request-new-button"><span class="material-symbols-outlined"> </span> </button></div> <!> <div class="request-history-section"><h2 class="section-title">Request History</h2> <div class="request-history-grid"></div></div></div>');function In(re,_){Nt(_,!1);let f=u(!1),S=u(""),T=u(""),D=u(!1),y=u(!1);function h(se){se.target.closest(".custom-dropdown")||s(y,!1)}function R(){s(y,!e(y))}function H(se){s(S,se.id),s(y,!1)}const O=[{id:"transcript",name:"Transcript",description:"Official academic record"},{id:"enrollment",name:"Enrollment Certificate",description:"Proof of enrollment"},{id:"grade-report",name:"Grade Report",description:"Semester grade report"},{id:"diploma",name:"Diploma",description:"Official graduation certificate"},{id:"certificate",name:"Certificate",description:"Academic achievement certificate"}];let te=u([{id:1,type:"Transcript",purpose:"Official transcript for graduate school application",requestedDate:"10/20/2023",completedDate:"10/22/2023",status:"completed"},{id:2,type:"Enrollment Certificate",purpose:"Current enrollment verification for scholarship",requestedDate:"10/18/2023",estimatedCompletion:"10/25/2023",status:"processing"},{id:3,type:"Grade Report",purpose:"Semester grade report",requestedDate:"10/15/2023",rejectionReason:"Incomplete coursework - final grades not yet submitted by instructors",status:"rejected"},{id:4,type:"Certificate",purpose:"Academic achievement certificate for internship application",requestedDate:"10/12/2023",status:"pending"}]);function me(se){s(te,e(te).map(Z=>Z.id===se&&Z.status==="pending"?{...Z,status:"cancelled",cancelledDate:new Date().toLocaleDateString("en-US")}:Z))}function b(){s(f,!e(f)),e(f)?setTimeout(()=>{const se=document.querySelector(".request-form-section");se&&se.scrollIntoView({behavior:"smooth",block:"center"})},100):(s(S,""),s(T,""),s(y,!1))}function W(){!e(S)||!e(T).trim()||(s(D,!0),setTimeout(()=>{const se={id:e(te).length+1,type:O.find(Z=>Z.id===e(S))?.name||e(S),purpose:e(T),requestedDate:new Date().toLocaleDateString("en-US"),status:"processing"};s(te,[se,...e(te)]),s(D,!1),b()},2e3))}function A(se){switch(se){case"completed":return"check_circle";case"processing":return"sync";case"pending":return"hourglass_empty";case"rejected":return"cancel";case"cancelled":return"block";default:return"help"}}os();var q=Gn(),J=r(t(q),2),x=r(t(J),2),F=t(x),ve=t(F,!0);a(F);var K=r(F);a(x),a(J);var Le=r(J,2);{var ge=se=>{var Z=Nn(),Ce=t(Z),X=r(t(Ce),2),C=t(X),he=r(t(C),2),fe=t(he),E=t(fe),$=t(E);{var Y=_e=>{var we=wt();p(Ne=>d(we,Ne),[()=>O.find(Ne=>Ne.id===e(S))?.name||"Select Document Type"]),i(_e,we)},ee=_e=>{var we=wt("Choose the document you need");i(_e,we)};m($,_e=>{e(S)?_e(Y):_e(ee,!1)})}a(E);var L=r(E,2);a(fe);var De=r(fe,2);{var M=_e=>{var we=jn();ea(we,5,()=>O,ds,(Ne,Re)=>{var ye=An(),ue=t(ye),g=t(ue),v=t(g,!0);a(g);var l=r(g,2),c=t(l,!0);a(l),a(ue),a(ye),p(()=>{B(ye,1,`dropdown-item ${e(Re).id===e(S)?"selected":""}`),d(v,e(Re).name),d(c,e(Re).description)}),N("click",ye,()=>H(e(Re))),i(Ne,ye)}),a(we),i(_e,we)};m(De,_e=>{e(y)&&_e(M)})}a(he),a(C);var le=r(C,2),Pe=r(t(le),2);Sr(Pe),Ea(2),a(le);var Oe=r(le,2),We=t(Oe),Ee=r(We,2),Ye=t(Ee);{var He=_e=>{var we=Cn();Ea(),i(_e,we)},Fe=_e=>{var we=wt("Submit Request");i(_e,we)};m(Ye,_e=>{e(D)?_e(He):_e(Fe,!1)})}a(Ee),a(Oe),a(X),a(Ce),a(Z),p(_e=>{B(L,1,`material-symbols-outlined dropdown-icon ${e(y)?"open":""}`),We.disabled=e(D),Ee.disabled=_e},[()=>!e(S)||!e(T).trim()||e(D)]),N("click",fe,R),Ta(Pe,()=>e(T),_e=>s(T,_e)),N("click",We,b),N("click",Ee,W),i(se,Z)};m(Le,se=>{e(f)&&se(ge)})}var P=r(Le,2),oe=r(t(P),2);ea(oe,7,()=>e(te),se=>se.id,(se,Z,Ce)=>{var X=Mn(),C=t(X),he=t(C),fe=t(he),E=t(fe,!0);a(fe),a(he);var $=r(he,2),Y=t($),ee=t(Y),L=t(ee),De=t(L,!0);a(L);var M=r(L,2),le=t(M);a(M),a(ee);var Pe=r(ee,2),Oe=t(Pe,!0);a(Pe),a(Y);var We=r(Y,2),Ee=t(We,!0);a(We),a($),a(C);var Ye=r(C,2);{var He=_e=>{var we=$n(),Ne=t(we),Re=t(Ne);a(Ne),a(we),p(()=>d(Re,`Completed on ${e(Z).completedDate??""}`)),i(_e,we)},Fe=_e=>{var we=ya(),Ne=na(we);{var Re=ue=>{var g=qn(),v=t(g),l=t(v);a(v),a(g),p(()=>d(l,`Estimated completion: ${e(Z).estimatedCompletion??""}`)),i(ue,g)},ye=ue=>{var g=ya(),v=na(g);{var l=w=>{var G=Ln(),ce=r(t(G),2);a(G),N("click",ce,()=>me(e(Z).id)),i(w,G)},c=w=>{var G=ya(),ce=na(G);{var Ae=I=>{var Se=En(),xe=t(Se),ze=t(xe);a(xe),a(Se),p(()=>d(ze,`Cancelled on ${e(Z).cancelledDate??""}`)),i(I,Se)},ke=I=>{var Se=ya(),xe=na(Se);{var ze=sa=>{var va=Fn(),La=t(va),ae=t(La);a(La),a(va),p(()=>d(ae,`Reason: ${e(Z).rejectionReason??""}`)),i(sa,va)};m(xe,sa=>{e(Z).status==="rejected"&&sa(ze)},!0)}i(I,Se)};m(ce,I=>{e(Z).status==="cancelled"?I(Ae):I(ke,!1)},!0)}i(w,G)};m(v,w=>{e(Z).status==="pending"?w(l):w(c,!1)},!0)}i(ue,g)};m(Ne,ue=>{e(Z).status==="processing"?ue(Re):ue(ye,!1)},!0)}i(_e,we)};m(Ye,_e=>{e(Z).status==="completed"?_e(He):_e(Fe,!1)})}a(X),p(_e=>{B(X,1,`request-card ${e(Z).status??""}`),vs(X,`--card-index: ${e(Ce)+1};`),d(E,_e),d(De,e(Z).type),d(le,`Requested on ${e(Z).requestedDate??""}`),B(Pe,1,`student-status-badge status-${e(Z).status??""}`),d(Oe,e(Z).status==="completed"?"Completed":e(Z).status==="processing"?"Processing":e(Z).status==="pending"?"Pending":e(Z).status==="rejected"?"Rejected":e(Z).status==="cancelled"?"Cancelled":"Unknown"),d(Ee,e(Z).purpose)},[()=>A(e(Z).status)]),i(se,X)}),a(oe),a(P),a(q),p(()=>{d(ve,e(f)?"remove":"add"),d(K,` ${e(f)?"Cancel Request":"Request New Document"}`)}),N("click",x,b),N("click",q,h),N("keydown",q,h),i(re,q),$t()}var Pn=o('<span class="count-badge"> </span>'),Rn=o('<button><span class="material-symbols-outlined"> </span> <span> </span> <!></button>'),On=o('<div class="filter-dropdown-menu"></div>'),Un=o('<button class="notifications-action-btn mark-all-read" title="Mark All Read"><span class="material-symbols-outlined">done_all</span></button>'),Wn=o('<button class="notifications-action-btn clear-read" title="Clear Read"><span class="material-symbols-outlined">clear_all</span></button>'),Yn=o('<div role="button" tabindex="0"><div class="notification-header-card"><h3 class="notification-title"> </h3> <span class="notification-time"> </span></div> <div class="notification-details"><p class="notification-message"> </p> <div class="notification-actions"><button class="action-btn-small read-toggle"><span class="material-symbols-outlined"> </span></button> <button class="action-btn-small delete-btn" title="Delete notification"><span class="material-symbols-outlined">delete</span></button></div></div></div>'),Qn=o('<div class="notifications-list"></div>'),Vn=o('<div class="no-notifications"><div class="no-notifications-icon"><span class="material-symbols-outlined"> </span></div> <h3> </h3> <p> </p></div>'),Jn=o('<div class="notification-container"><div class="notification-header"><div class="header-content"><h1 class="page-title">Notifications</h1> <p class="page-subtitle">Stay updated with your academic activities <span class="notification-badge"> </span></p></div></div> <div class="filter-actions-section"><div class="filter-section"><div class="filter-dropdown"><button class="filter-toggle"><div class="filter-toggle-content"><span class="material-symbols-outlined filter-icon"> </span> <span class="filter-label"> </span></div> <span>expand_more</span></button> <!></div></div> <div class="actions-section"><!> <!></div></div> <div class="notifications-section"><!></div></div>');function Hn(re,_){Nt(_,!1);const f=u(),S=u(),T=u();let D=u([{id:1,type:"todo",title:"Physics Lab Report Due Tomorrow",message:"Complete the lab report on gravity experiments - due tomorrow",timestamp:"2024-01-15T14:00:00Z",isRead:!1,priority:"high"},{id:2,title:"Grade Posted",message:"Your grade for Mathematics Quiz #3 has been posted. Check your grades section for details.",type:"grade",timestamp:"2024-01-15T09:15:00Z",isRead:!1,priority:"medium"},{id:3,title:"Document Ready",message:"Your requested transcript is ready for pickup at the admin office.",type:"document",timestamp:"2024-01-14T16:45:00Z",isRead:!0,priority:"high"},{id:4,type:"todo",title:"Math Quiz Today",message:"Study for Math Quiz - Review chapters 5-7 for today's quiz",timestamp:"2024-01-15T11:00:00Z",isRead:!1,priority:"high"},{id:5,title:"Final Grade Available",message:"Your final grade for English Literature has been posted. Check your academic record.",type:"grade",timestamp:"2024-01-13T11:00:00Z",isRead:!0,priority:"medium"},{id:6,title:"Enrollment Verification Ready",message:"Your enrollment verification document is ready for download from the student portal.",type:"document",timestamp:"2024-01-12T13:30:00Z",isRead:!1,priority:"medium"},{id:7,type:"todo",title:"Assignment Deadline Approaching",message:"College Application submission due next week - don't forget to complete",timestamp:"2024-01-14T10:00:00Z",isRead:!1,priority:"medium"}]);const y=[{value:"all",label:"All Notifications",icon:"notifications"},{value:"unread",label:"Unread Only",icon:"mark_email_unread"},{value:"todo",label:"To-Do Due Dates",icon:"assignment"},{value:"grade",label:"Grades",icon:"grade"},{value:"document",label:"Document Requests",icon:"description"}];let h=u("all"),R=u(!1);function H(){s(R,!e(R))}function O(Fe){s(h,Fe),s(R,!1)}function te(Fe){Fe.target.closest(".filter-dropdown")||s(R,!1)}function me(Fe){s(D,e(D).map(_e=>_e.id===Fe?{..._e,isRead:!_e.isRead}:_e))}function b(Fe){s(D,e(D).filter(_e=>_e.id!==Fe))}function W(){s(D,e(D).map(Fe=>({...Fe,isRead:!0})))}function A(){s(D,e(D).filter(Fe=>!Fe.isRead))}function q(Fe){const _e=new Date(Fe),we=new Date,Ne=Math.floor((we-_e)/(1e3*60*60));if(Ne<1){const Re=Math.floor((we-_e)/6e4);return Re<=1?"Just now":`${Re} minutes ago`}else{if(Ne<24)return`${Ne} hour${Ne>1?"s":""} ago`;{const Re=Math.floor(Ne/24);return Re<7?`${Re} day${Re>1?"s":""} ago`:_e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:_e.getFullYear()!==we.getFullYear()?"numeric":void 0})}}}function J(Fe){const _e=y.find(we=>we.value===Fe);return _e?_e.label:"All Notifications"}function x(Fe){const _e=y.find(we=>we.value===Fe);return _e?_e.icon:"notifications"}Na(()=>(e(h),e(D)),()=>{s(f,e(h)==="all"?e(D):e(h)==="unread"?e(D).filter(Fe=>!Fe.isRead):e(D).filter(Fe=>Fe.type===e(h)))}),Na(()=>e(D),()=>{s(S,e(D).filter(Fe=>!Fe.isRead).length)}),Na(()=>e(D),()=>{s(T,e(D).length)}),ns(),os();var F=Jn();N("click",Ps,te);var ve=t(F),K=t(ve),Le=r(t(K),2),ge=r(t(Le)),P=t(ge);a(ge),a(Le),a(K),a(ve);var oe=r(ve,2),se=t(oe),Z=t(se),Ce=t(Z),X=t(Ce),C=t(X),he=t(C,!0);a(C);var fe=r(C,2),E=t(fe,!0);a(fe),a(X);var $=r(X,2);let Y;a(Ce);var ee=r(Ce,2);{var L=Fe=>{var _e=On();ea(_e,5,()=>y,ds,(we,Ne)=>{var Re=Rn();let ye;var ue=t(Re),g=t(ue,!0);a(ue);var v=r(ue,2),l=t(v,!0);a(v);var c=r(v,2);{var w=G=>{var ce=Pn(),Ae=t(ce,!0);a(ce),p(()=>d(Ae,e(S))),i(G,ce)};m(c,G=>{e(Ne),n(()=>e(Ne).value==="unread")&&G(w)})}a(Re),p(G=>{ye=B(Re,1,"filter-dropdown-item",null,ye,G),d(g,(e(Ne),n(()=>e(Ne).icon))),d(l,(e(Ne),n(()=>e(Ne).label)))},[()=>({active:e(Ne).value===e(h)})]),N("click",Re,()=>O(e(Ne).value)),i(we,Re)}),a(_e),i(Fe,_e)};m(ee,Fe=>{e(R)&&Fe(L)})}a(Z),a(se);var De=r(se,2),M=t(De);{var le=Fe=>{var _e=Un();N("click",_e,W),i(Fe,_e)};m(M,Fe=>{e(S)>0&&Fe(le)})}var Pe=r(M,2);{var Oe=Fe=>{var _e=Wn();N("click",_e,A),i(Fe,_e)};m(Pe,Fe=>{e(D),n(()=>e(D).some(_e=>_e.isRead))&&Fe(Oe)})}a(De),a(oe);var We=r(oe,2),Ee=t(We);{var Ye=Fe=>{var _e=Qn();ea(_e,7,()=>e(f),we=>we.id,(we,Ne,Re)=>{var ye=Yn(),ue=t(ye),g=t(ue),v=t(g,!0);a(g);var l=r(g,2),c=t(l,!0);a(l),a(ue);var w=r(ue,2),G=t(w),ce=t(G,!0);a(G);var Ae=r(G,2),ke=t(Ae),I=t(ke),Se=t(I,!0);a(I),a(ke);var xe=r(ke,2);a(Ae),a(w),a(ye),p(ze=>{B(ye,1,`notification-card ${e(Ne),n(()=>e(Ne).isRead?"read":"unread")??""}`),vs(ye,`--card-index: ${e(Re)??""}`),d(v,(e(Ne),n(()=>e(Ne).title))),d(c,ze),d(ce,(e(Ne),n(()=>e(Ne).message))),la(ke,"title",(e(Ne),n(()=>e(Ne).isRead?"Mark as unread":"Mark as read"))),d(Se,(e(Ne),n(()=>e(Ne).isRead?"mark_email_unread":"mark_email_read")))},[()=>(e(Ne),n(()=>q(e(Ne).timestamp)))]),N("click",ke,Vs(()=>me(e(Ne).id))),N("click",xe,Vs(()=>b(e(Ne).id))),N("click",ye,()=>me(e(Ne).id)),N("keydown",ye,ze=>ze.key==="Enter"&&me(e(Ne).id)),i(we,ye)}),a(_e),i(Fe,_e)},He=Fe=>{var _e=Vn(),we=t(_e),Ne=t(we),Re=t(Ne,!0);a(Ne),a(we);var ye=r(we,2),ue=t(ye,!0);a(ye);var g=r(ye,2),v=t(g,!0);a(g),a(_e),p(l=>{d(Re,e(h)==="unread"?"mark_email_read":"notifications_off"),d(ue,e(h)==="unread"?"All Caught Up!":"No Notifications"),d(v,l)},[()=>(e(h),n(()=>e(h)==="unread"?"You have no unread notifications. Great job staying on top of things!":e(h)==="all"?"You don't have any notifications yet.":`No ${J(e(h)).toLowerCase()} notifications found.`))]),i(Fe,_e)};m(Ee,Fe=>{e(f),n(()=>e(f).length>0)?Fe(Ye):Fe(He,!1)})}a(We),a(F),p((Fe,_e,we)=>{d(P,`${e(S)??""} unread`),d(he,Fe),d(E,_e),Y=B($,1,"material-symbols-outlined dropdown-arrow",null,Y,we)},[()=>(e(h),n(()=>x(e(h)))),()=>(e(h),n(()=>J(e(h)))),()=>({rotated:e(R)})]),N("click",Ce,H),i(re,F),$t()}var Bn=o('<button type="button"><span class="material-symbols-outlined"> </span> <span> </span></button>'),zn=o('<div class="dropdown-menu-category"></div>'),Zn=o('<button class="clear-date-btn" type="button" title="Clear date"><span class="material-symbols-outlined">close</span></button>'),Kn=o('<div class="day-header"> </div>'),Xn=o('<div class="empty-day"></div>'),eo=o('<button type="button"> </button>'),ao=o('<div class="date-picker-dropdown"><div class="date-picker-header"><button class="nav-btn" type="button"><span class="material-symbols-outlined">chevron_left</span></button> <div class="month-year-display"><span class="month-name"> </span> <span class="year-name"> </span></div> <button class="nav-btn" type="button"><span class="material-symbols-outlined">chevron_right</span></button></div> <div class="calendar-grid"><!> <!> <!></div></div>'),to=o('<div class="add-todo-section"><h2 class="section-title">Add New Task</h2> <div class="add-todo-form"><input type="text" placeholder="Enter task title..." class="todo-input"/> <textarea placeholder="Enter description (optional)..." class="todo-input todo-textarea" rows="3"></textarea> <div class="form-row"><div class="form-field"><label class="form-label" for="category-dropdown">Category</label> <div class="custom-dropdown"><button class="dropdown-toggle" id="category-dropdown" type="button"><div class="dropdown-toggle-content"><span class="material-symbols-outlined dropdown-icon-left"> </span> <span class="dropdown-label"> </span></div> <span>expand_more</span></button> <!></div></div> <div class="form-field"><label class="form-label" for="due-date-picker">Due Date (optional)</label> <div class="custom-date-picker"><div class="date-picker-toggle-wrapper"><button class="date-picker-toggle" id="due-date-picker" type="button"><div class="date-picker-toggle-content"><span class="material-symbols-outlined date-picker-icon-left">calendar_today</span> <span class="date-picker-label"> </span></div> <div class="date-picker-actions"><!> <span>expand_more</span></div></button></div> <!></div></div></div> <button class="add-todo-btn"><span class="material-symbols-outlined">add</span> Add Task</button></div></div>'),so=o('<p class="todo-description"> </p>'),ro=o('<div><div class="todo-checkbox"><input type="checkbox"/> <label class="checkbox-label"></label></div> <div class="todo-content"><h3> </h3> <!> <div class="todo-meta"><span class="todo-category"> </span> <span class="todo-due-date"> </span></div></div> <div class="todo-actions"><button class="action-btn delete-btn" title="Delete task"><span class="material-symbols-outlined">delete</span></button></div></div>'),io=o('<div class="todos-list"></div>'),no=o(`<div class="no-todos"><div class="no-todos-icon"><span class="material-symbols-outlined">check_circle</span></div> <h3>No Tasks</h3> <p>You don't have any tasks yet. Add one above to get started!</p></div>`),oo=o('<div class="todo-container"><div class="todo-header"><div class="header-content"><h1 class="page-title">Todo List</h1> <p class="page-subtitle">Keep track of your tasks and assignments <span class="progress-badge"> </span></p></div></div> <div class="add-todo-button-section"><button class="add-todo-toggle-btn"><span class="material-symbols-outlined"> </span> </button></div> <!> <div class="todos-section"><!></div></div>');function lo(re,_){Nt(_,!1);const f=u(),S=u(),T=u();let D=u([{id:1,title:"Complete Physics Lab Report",description:"Finish the lab report on gravity experiments",dueDate:"Tomorrow",completed:!1,category:"assignment"},{id:2,title:"Study for Math Quiz",description:"Review chapters 5-7 for tomorrow's quiz",dueDate:"Today",completed:!1,category:"study"},{id:3,title:"Submit College Application",description:"Complete and submit application for University",dueDate:"Next Week",completed:!0,category:"personal"},{id:4,title:"Buy groceries",description:"Buy milk, bread, and eggs",dueDate:"Next Week",completed:!1,category:"personal"},{id:5,title:"Read a book",description:"Read a book on Svelte",dueDate:"Next Week",completed:!1,category:"personal"}]),y=u(""),h=u(""),R=u("personal"),H=u(""),O=u(!1);const te=[{value:"assignment",label:"Assignment",icon:"assignment"},{value:"study",label:"Study",icon:"book"},{value:"personal",label:"Personal",icon:"person"},{value:"project",label:"Project",icon:"folder"},{value:"exam",label:"Exam",icon:"quiz"}];let me=u(!1),b=u(!1);const W=new Date;let A=u(W.getFullYear()),q=u(W.getMonth());const J=["January","February","March","April","May","June","July","August","September","October","November","December"],x=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function F(){if(e(y).trim()){const v={id:Date.now(),title:e(y).trim(),description:e(h).trim(),dueDate:e(H)||"No due date",completed:!1,category:e(R)};s(D,[v,...e(D)]),s(y,""),s(h,""),s(R,"personal"),s(H,""),s(O,!1)}}function ve(){s(O,!e(O)),e(O)||(s(y,""),s(h,""),s(R,"personal"),s(H,""),s(me,!1),s(b,!1))}function K(){s(me,!e(me))}function Le(v){s(R,v),s(me,!1)}function ge(v){v.target.closest(".custom-dropdown")||s(me,!1),v.target.closest(".custom-date-picker")||s(b,!1)}Bt(()=>(document.addEventListener("click",ge),()=>{document.removeEventListener("click",ge)}));function P(v){const l=te.find(c=>c.value===v);return l?l.label:"Select Category"}function oe(v){const l=te.find(c=>c.value===v);return l?l.icon:"category"}function se(){if(s(b,!e(b)),e(b))if(e(H)){const v=new Date(e(H)+"T00:00:00");s(A,v.getFullYear()),s(q,v.getMonth()),v.getDate()}else{const v=new Date;s(A,v.getFullYear()),s(q,v.getMonth())}}function Z(v){const l=e(A),c=e(q)+1,w=v.toString().padStart(2,"0"),G=c.toString().padStart(2,"0");s(H,`${l}-${G}-${w}`),s(b,!1)}function Ce(){s(H,""),s(b,!1)}function X(){e(q)===0?(s(q,11),wr(A,-1)):wr(q,-1)}function C(){e(q)===11?(s(q,0),wr(A)):wr(q)}function he(v,l){return new Date(v,l+1,0).getDate()}function fe(v,l){return new Date(v,l,1).getDay()}function E(v){const l=new Date;return v===l.getDate()&&e(q)===l.getMonth()&&e(A)===l.getFullYear()}function $(v){if(!e(H))return!1;const l=new Date(e(H)+"T00:00:00");return v===l.getDate()&&e(q)===l.getMonth()&&e(A)===l.getFullYear()}function Y(v){s(D,e(D).map(l=>l.id===v?{...l,completed:!l.completed}:l))}function ee(v){s(D,e(D).filter(l=>l.id!==v))}function L(v){if(!v||v==="No due date")return"No due date";if(v==="Today"||v==="Tomorrow"||v==="Next Week")return v;const l=new Date(v);if(isNaN(l.getTime()))return v;const c=new Date,w=new Date(c);w.setDate(w.getDate()+1);const G=new Date(l.getFullYear(),l.getMonth(),l.getDate()),ce=new Date(c.getFullYear(),c.getMonth(),c.getDate()),Ae=new Date(w.getFullYear(),w.getMonth(),w.getDate());return G.getTime()===ce.getTime()?"Today":G.getTime()===Ae.getTime()?"Tomorrow":l.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}Na(()=>e(H),()=>{s(f,e(H)?new Date(e(H)+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Select due date")}),Na(()=>e(D),()=>{s(S,e(D).filter(v=>v.completed).length)}),Na(()=>e(D),()=>{s(T,e(D).length)}),ns(),os();var De=oo(),M=t(De),le=t(M),Pe=r(t(le),2),Oe=r(t(Pe)),We=t(Oe);a(Oe),a(Pe),a(le),a(M);var Ee=r(M,2),Ye=t(Ee),He=t(Ye),Fe=t(He,!0);a(He);var _e=r(He);a(Ye),a(Ee);var we=r(Ee,2);{var Ne=v=>{var l=to(),c=r(t(l),2),w=t(c);ka(w);var G=r(w,2);Sr(G);var ce=r(G,2),Ae=t(ce),ke=r(t(Ae),2),I=t(ke),Se=t(I),xe=t(Se),ze=t(xe,!0);a(xe);var sa=r(xe,2),va=t(sa,!0);a(sa),a(Se);var La=r(Se,2);a(I);var ae=r(I,2);{var U=V=>{var be=zn();ea(be,5,()=>te,ds,(Je,ga)=>{var qa=Bn(),aa=t(qa),Ke=t(aa,!0);a(aa);var ie=r(aa,2),Me=t(ie,!0);a(ie),a(qa),p(()=>{B(qa,1,`dropdown-item ${e(ga),e(R),n(()=>e(ga).value===e(R)?"selected":"")??""}`),d(Ke,(e(ga),n(()=>e(ga).icon))),d(Me,(e(ga),n(()=>e(ga).label)))}),N("click",qa,()=>Le(e(ga).value)),i(Je,qa)}),a(be),i(V,be)};m(ae,V=>{e(me)&&V(U)})}a(ke),a(Ae);var Q=r(Ae,2),Ue=r(t(Q),2),ra=t(Ue),ca=t(ra),oa=t(ca),_a=r(t(oa),2),ha=t(_a,!0);a(_a),a(oa);var fa=r(oa,2),Oa=t(fa);{var Ba=V=>{var be=Zn();N("click",be,Vs(Ce)),i(V,be)};m(Oa,V=>{e(H)&&V(Ba)})}var tt=r(Oa,2);a(fa),a(ca),a(ra);var it=r(ra,2);{var mt=V=>{var be=ao(),Je=t(be),ga=t(Je),qa=r(ga,2),aa=t(qa),Ke=t(aa,!0);a(aa);var ie=r(aa,2),Me=t(ie,!0);a(ie),a(qa);var j=r(qa,2);a(Je);var $e=r(Je,2),Ie=t($e);ea(Ie,1,()=>x,ds,(je,Ze)=>{var ua=Kn(),wa=t(ua,!0);a(ua),p(()=>d(wa,e(Ze))),i(je,ua)});var Ve=r(Ie,2);ea(Ve,1,()=>(e(A),e(q),n(()=>Array(fe(e(A),e(q))))),ds,(je,Ze)=>{var ua=Xn();i(je,ua)});var pe=r(Ve,2);ea(pe,1,()=>(e(A),e(q),n(()=>Array(he(e(A),e(q))))),ds,(je,Ze,ua)=>{const wa=ws(()=>ua+1);var ma=eo(),Ra=t(ma,!0);a(ma),p((za,Wa)=>{B(ma,1,`day-cell ${za??""} ${Wa??""}`),d(Ra,e(wa))},[()=>(us(e(wa)),n(()=>E(e(wa))?"today":"")),()=>(us(e(wa)),n(()=>$(e(wa))?"selected":""))]),N("click",ma,()=>Z(e(wa))),i(je,ma)}),a($e),a(be),p(()=>{d(Ke,(e(q),n(()=>J[e(q)]))),d(Me,e(A))}),N("click",ga,X),N("click",j,C),i(V,be)};m(it,V=>{e(b)&&V(mt)})}a(Ue),a(Q),a(ce);var st=r(ce,2);a(c),a(l),p((V,be,Je)=>{d(ze,V),d(va,be),B(La,1,`material-symbols-outlined dropdown-icon ${e(me)?"open":""}`),d(ha,e(f)),B(tt,1,`material-symbols-outlined dropdown-icon ${e(b)?"open":""}`),st.disabled=Je},[()=>(e(R),n(()=>oe(e(R)))),()=>(e(R),n(()=>P(e(R)))),()=>(e(y),n(()=>!e(y).trim()))]),Ta(w,()=>e(y),V=>s(y,V)),N("keydown",w,V=>V.key==="Enter"&&F()),Ta(G,()=>e(h),V=>s(h,V)),N("click",I,K),N("click",ca,se),N("click",st,F),i(v,l)};m(we,v=>{e(O)&&v(Ne)})}var Re=r(we,2),ye=t(Re);{var ue=v=>{var l=io();ea(l,7,()=>e(D),c=>c.id,(c,w,G)=>{var ce=ro();let Ae;var ke=t(ce),I=t(ke);ka(I);var Se=r(I,2);a(ke);var xe=r(ke,2),ze=t(xe);let sa;var va=t(ze,!0);a(ze);var La=r(ze,2);{var ae=ha=>{var fa=so(),Oa=t(fa,!0);a(fa),p(()=>d(Oa,(e(w),n(()=>e(w).description)))),i(ha,fa)};m(La,ha=>{e(w),n(()=>e(w).description)&&ha(ae)})}var U=r(La,2),Q=t(U),Ue=t(Q,!0);a(Q);var ra=r(Q,2),ca=t(ra,!0);a(ra),a(U),a(xe);var oa=r(xe,2),_a=t(oa);a(oa),a(ce),p((ha,fa,Oa)=>{Ae=B(ce,1,"todo-card",null,Ae,ha),vs(ce,`--card-index: ${e(G)+1};`),di(I,(e(w),n(()=>e(w).completed))),la(I,"id",`todo-${e(w),n(()=>e(w).id)??""}`),la(Se,"for",`todo-${e(w),n(()=>e(w).id)??""}`),sa=B(ze,1,"todo-title",null,sa,fa),d(va,(e(w),n(()=>e(w).title))),d(Ue,(e(w),n(()=>e(w).category))),d(ca,Oa)},[()=>({completed:e(w).completed}),()=>({completed:e(w).completed}),()=>(e(w),n(()=>L(e(w).dueDate)))]),N("change",I,()=>Y(e(w).id)),N("click",_a,()=>ee(e(w).id)),i(c,ce)}),a(l),i(v,l)},g=v=>{var l=no();i(v,l)};m(ye,v=>{e(D),n(()=>e(D).length>0)?v(ue):v(g,!1)})}a(Re),a(De),p(()=>{d(We,`${e(S)??""}/${e(T)??""} completed`),d(Fe,e(O)?"remove":"add"),d(_e,` ${e(O)?"Cancel":"Add New Task"}`)}),N("click",Ye,ve),i(re,De),$t()}function co(re,_){s(_,!e(_))}function vo(re,_,f){s(_,!e(_)),f()}var uo=o('<img alt="Profile" class="avatar-image"/>'),mo=o('<div class="avatar-placeholder"> </div>'),po=(re,_,f)=>{_(),f.onNavigateToSettings()},_o=async(re,_,f)=>{_(),await f.onlogout(),ar("Logged out successfully. See you next time!")},fo=o('<div class="teacher-navbar-dropdown-menu"><button class="teacher-navbar-dropdown-item"><span class="material-symbols-outlined">settings</span> Settings</button> <button class="teacher-navbar-dropdown-item"><span class="material-symbols-outlined">logout</span> Logout</button></div>'),go=o('<nav class="teacher-navbar" role="navigation" aria-label="Teacher navigation"><div class="teacher-navbar-container"><div class="teacher-navbar-left"><button class="teacher-navbar-icon-button hamburger-menu" aria-label="Toggle navigation menu"><span class="material-symbols-outlined">menu</span></button> <div class="logo-section"><span class="material-symbols-outlined logo-icon">person_book</span> <span class="app-title"> </span></div></div> <div class="teacher-navbar-right"><button class="teacher-navbar-icon-button dark-mode-toggle" aria-label="Toggle dark mode"><span class="material-symbols-outlined"> </span></button> <div class="user-profile-container"><button class="teacher-navbar-user-profile"><div class="teacher-navbar-user-info"><span class="teacher-navbar-user-name"> </span> <span class="user-id"> </span></div> <div class="teacher-navbar-user-avatar"><!></div></button> <!></div></div></div></nav>');function bo(re,_){Nt(_,!0);let f=Ct(_,"teacherName",3,"John Does"),S=Ct(_,"firstName",3,"John"),T=Ct(_,"gender",3,"male"),D=Ct(_,"accountNumber",3,"TCH-2025-0001"),y=Ct(_,"profileImage",3,null);function h(M){return M==="female"?"Ms.":"Mr."}let R=Wt(()=>`${h(T())} ${S()}`),H=xa(!0),O=xa(!1);function te(){s(O,!1)}function me(M){e(O)&&!M.target.closest(".user-profile-container")&&te()}Bt(()=>{const M=localStorage.getItem("theme");return s(H,M!=="light"),b(),document.addEventListener("click",me),()=>{document.removeEventListener("click",me)}});function b(){e(H)?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))}function W(M){return M.split(" ").map(le=>le.charAt(0)).join("").toUpperCase().slice(0,2)}var A=go(),q=t(A),J=t(q),x=t(J);x.__click=function(...M){_.onToggleNavRail?.apply(this,M)};var F=r(x,2),ve=r(t(F),2),K=t(ve);a(ve),a(F),a(J);var Le=r(J,2),ge=t(Le);ge.__click=[vo,H,b];var P=t(ge),oe=t(P,!0);a(P),a(ge);var se=r(ge,2),Z=t(se);Z.__click=[co,O];var Ce=t(Z),X=t(Ce),C=t(X,!0);a(X);var he=r(X,2),fe=t(he);a(he),a(Ce);var E=r(Ce,2),$=t(E);{var Y=M=>{var le=uo();p(()=>la(le,"src",y())),i(M,le)},ee=M=>{var le=mo(),Pe=t(le,!0);a(le),p(Oe=>d(Pe,Oe),[()=>W(S())]),i(M,le)};m($,M=>{y()?M(Y):M(ee,!1)})}a(E),a(Z);var L=r(Z,2);{var De=M=>{var le=fo(),Pe=t(le);Pe.__click=[po,te,_];var Oe=r(Pe,2);Oe.__click=[_o,te,_],a(le),i(M,le)};m(L,M=>{e(O)&&M(De)})}a(se),a(Le),a(q),a(A),p(()=>{d(K,`Welcome, ${e(R)??""}`),d(oe,e(H)?"light_mode":"dark_mode"),d(C,f()),d(fe,`Account: ${D()??""}`)}),i(re,A),$t()}Ts(["click"]);var ho=(re,_,f)=>_(e(f).id),yo=o('<button><div class="teacher-menu-rail-icon-container"><span class="material-symbols-outlined teacher-menu-rail-icon"> </span></div> <span class="teacher-menu-rail-label"> </span></button>'),wo=(re,_,f)=>_(e(f).id),So=o('<button><div class="teacher-menu-nav-icon-container"><span class="material-symbols-outlined teacher-menu-nav-icon"> </span></div></button>'),xo=o('<nav role="navigation" aria-label="Teacher portal navigation"><div class="teacher-menu-rail-container"></div></nav> <nav class="teacher-menu-bottom-navigation" role="navigation" aria-label="Teacher portal navigation"><div class="teacher-menu-nav-container"></div></nav>',1);function ko(re,_){Nt(_,!0);let f=Ct(_,"teacherActiveSection",15,"schedule"),S=Ct(_,"teacherNavRailVisible",3,!0);const T=[{id:"schedule",label:"Schedule",icon:"schedule"},{id:"students",label:"Class Management",icon:"group"},{id:"advisory",label:"Advisory Class",icon:"supervisor_account"}];function D(me){f(me),_.onnavigate&&_.onnavigate({detail:{section:me}})}var y=xo(),h=na(y);let R;var H=t(h);ea(H,21,()=>T,me=>me.id,(me,b)=>{var W=yo();let A;W.__click=[ho,D,b];var q=t(W),J=t(q),x=t(J,!0);a(J),a(q);var F=r(q,2),ve=t(F,!0);a(F),a(W),p(K=>{A=B(W,1,"teacher-menu-rail-item",null,A,K),la(W,"aria-label",e(b).label),la(W,"aria-current",e(b).id===f()?"page":void 0),d(x,e(b).icon),d(ve,e(b).label)},[()=>({active:e(b).id===f()})]),i(me,W)}),a(H),a(h);var O=r(h,2),te=t(O);ea(te,21,()=>T,me=>me.id,(me,b)=>{var W=So();let A;W.__click=[wo,D,b];var q=t(W),J=t(q),x=t(J,!0);a(J),a(q),a(W),p(F=>{A=B(W,1,"teacher-menu-nav-item",null,A,F),la(W,"aria-label",e(b).label),la(W,"aria-current",e(b).id===f()?"page":void 0),d(x,e(b).icon)},[()=>({active:e(b).id===f()})]),i(me,W)}),a(te),a(O),p(me=>R=B(h,1,"teacher-menu-navigation-rail",null,R,me),[()=>({collapsed:!S()})]),i(re,y),$t()}Ts(["click"]);var Do=o('<button><div class="day-name"> </div> <div class="day-name-full"> </div></button>'),To=o("<button> </button>"),Ao=o('<div class="teacher-dropdown-menu"></div>'),jo=o('<div class="loading-message"><div class="loading-icon"><span class="material-symbols-outlined">schedule</span></div> <h3>Loading Schedule...</h3> <p>Please wait while we fetch your teaching schedule.</p></div>'),Co=o('<div class="error-message"><div class="error-icon"><span class="material-symbols-outlined">error</span></div> <h3>Error Loading Schedule</h3> <p> </p> <button class="retry-button"><span class="material-symbols-outlined">refresh</span> Try Again</button></div>'),No=o('<div class="schedule-class-location"><span class="material-symbols-outlined">schedule</span> <span>Available Time</span></div>'),$o=o('<div class="schedule-class-teacher"><span class="material-symbols-outlined">book</span> <span> </span></div>'),qo=o('<div class="schedule-class-grade"><span class="material-symbols-outlined">school</span> <span> </span></div>'),Lo=o('<div class="schedule-class-location"><span class="material-symbols-outlined">location_on</span> <span> </span></div> <!> <!>',1),Eo=o('<div><div class="class-header"><h3 class="schedule-class-name"> </h3> <span class="schedule-class-time"> </span></div> <div class="class-details"><!></div></div>'),Fo=o('<div class="schedule-classes-grid"></div>'),Mo=o('<div class="no-classes-message"><div class="no-classes-icon"><span class="material-symbols-outlined">event_available</span></div> <h3>No Classes Scheduled</h3> <p> </p></div>'),Go=o('<div class="schedule-container" role="button" tabindex="0"><div class="schedule-schedule-header"><h1 class="schedule-page-title">Teaching Schedule</h1> <p class="schedule-page-subtitle">Your weekly teaching schedule</p></div> <div class="week-navigation"><div class="week-title"><span> </span></div> <div class="schedule-day-selector"></div> <div class="teacher-mobile-dropdown"><button class="teacher-dropdown-toggle-date"><span> </span> <span>expand_more</span></button> <!></div></div> <div class="classes-section"><h2> </h2> <!></div></div>');function Io(re,_){Nt(_,!1);const[f,S]=Rs(),T=()=>Is(Es,"$authStore",f),D=u(),y=u(),h=new Date,R=["January","February","March","April","May","June","July","August","September","October","November","December"],H=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],O=R[h.getMonth()],te=h.getDate(),me=H[h.getDay()],b={1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri"},W=h.getDay();let A=u(b[W]||"Mon");const q=["blue","green","purple","yellow","orange"];function J(ye){return q[ye%q.length]}let x=u([]),F=u(!0),ve=u(null);function K(ye){const ue={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[]},g={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri"},v={Mon:0,Tue:0,Wed:0,Thu:0,Fri:0};return ye.forEach(l=>{const c=g[l.day_of_week.toLowerCase()];if(c){const w=Le(l.start_time),G=Le(l.end_time);let ce,Ae;l.schedule_type==="subject"?(ce=l.section_name,Ae=l.subject_name||"Unknown Subject"):l.schedule_type==="activity"&&(ce=l.activity_type_name||"Activity",Ae=l.activity_type_name||"Activity");const ke={name:ce,time:`${w} - ${G}`,room:l.room_name||"TBA",subject:Ae,gradeLevel:l.grade_level,scheduleType:l.schedule_type,color:J(v[c])};ue[c].push(ke),v[c]++}}),Object.keys(ue).forEach(l=>{const c=ue[l],w=oe(c),G=[...c,...w].sort((ce,Ae)=>{const ke=ge(ce.time.split(" - ")[0]),I=ge(Ae.time.split(" - ")[0]);return ke-I});ue[l]=G}),ue}function Le(ye){const[ue,g]=ye.split(":"),v=parseInt(ue),l=v>=12?"PM":"AM";return`${(v===0?12:v>12?v-12:v).toString().padStart(2,"0")}:${g} ${l}`}function ge(ye){const[ue,g]=ye.split(" "),[v,l]=ue.split(":").map(Number);let c=l;return g==="PM"&&v!==12?c+=(v+12)*60:g==="AM"&&v===12?c+=0:c+=v*60,c}function P(ye){const ue=Math.floor(ye/60),g=ye%60,v=ue>=12?"PM":"AM";return`${(ue===0?12:ue>12?ue-12:ue).toString().padStart(2,"0")}:${g.toString().padStart(2,"0")} ${v}`}function oe(ye){if(ye.length<=1)return[];const ue=[...ye].sort((v,l)=>{const c=ge(v.time.split(" - ")[0]),w=ge(l.time.split(" - ")[0]);return c-w}),g=[];for(let v=0;v<ue.length-1;v++){const l=ue[v],c=ue[v+1],w=ge(l.time.split(" - ")[1]),G=ge(c.time.split(" - ")[0]);if(G>w){const ce=P(w),Ae=P(G);g.push({name:"Vacant Time",time:`${ce} - ${Ae}`,room:"Available",subject:"Free Period",color:"gray",isVacant:!0})}}return g}async function se(){try{s(F,!0),s(ve,null);const ye=T();if(!ye.isAuthenticated||!ye.userData?.id)throw new Error("User not authenticated");const g=await(await fetch(`/api/schedules?action=teacher-schedules&teacherId=${ye.userData.id}&schoolYear=2024-2025`)).json();if(!g.success)throw new Error(g.error||"Failed to fetch schedule data");s(x,K(g.data))}catch(ye){console.error("Error fetching schedule data:",ye),s(ve,ye.message),s(x,{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[]})}finally{s(F,!1)}}Bt(()=>{se()});const Z={Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday"},Ce=[{day:"Mon"},{day:"Tue"},{day:"Wed"},{day:"Thu"},{day:"Fri"}];let X=u(!1);function C(ye){ye.target.closest(".teacher-mobile-dropdown")||s(X,!1)}function he(){s(X,!e(X))}function fe(ye){s(A,ye),s(X,!1)}Na(()=>(e(x),e(A)),()=>{s(D,e(x)[e(A)]||[])}),Na(()=>e(A),()=>{s(y,Z[e(A)]||"Monday")}),ns(),os();var E=Go(),$=r(t(E),2),Y=t($),ee=t(Y),L=t(ee);a(ee),a(Y);var De=r(Y,2);ea(De,5,()=>Ce,ds,(ye,ue)=>{let g=()=>e(ue).day;var v=Do(),l=t(v),c=t(l,!0);a(l);var w=r(l,2),G=t(w,!0);a(w),a(v),p(()=>{B(v,1,`schedule-day-btn ${g()===e(A)?"active":""}`),d(c,g()),d(G,(g(),n(()=>Z[g()])))}),N("click",v,()=>fe(g())),i(ye,v)}),a(De);var M=r(De,2),le=t(M),Pe=t(le),Oe=t(Pe,!0);a(Pe);var We=r(Pe,2);a(le);var Ee=r(le,2);{var Ye=ye=>{var ue=Ao();ea(ue,5,()=>Ce,ds,(g,v)=>{let l=()=>e(v).day;var c=To(),w=t(c,!0);a(c),p(()=>{B(c,1,`teacher-dropdown-item ${l()===e(A)?"selected":""}`),d(w,(l(),n(()=>Z[l()])))}),N("click",c,()=>fe(l())),i(g,c)}),a(ue),i(ye,ue)};m(Ee,ye=>{e(X)&&ye(Ye)})}a(M),a($);var He=r($,2),Fe=t(He),_e=t(Fe);a(Fe);var we=r(Fe,2);{var Ne=ye=>{var ue=jo();i(ye,ue)},Re=ye=>{var ue=ya(),g=na(ue);{var v=c=>{var w=Co(),G=r(t(w),4),ce=t(G,!0);a(G);var Ae=r(G,2);a(w),p(()=>d(ce,e(ve))),N("click",Ae,se),i(c,w)},l=c=>{var w=ya(),G=na(w);{var ce=ke=>{var I=Fo();ea(I,5,()=>e(D),ds,(Se,xe)=>{var ze=Eo(),sa=t(ze),va=t(sa),La=t(va,!0);a(va);var ae=r(va,2),U=t(ae,!0);a(ae),a(sa);var Q=r(sa,2),Ue=t(Q);{var ra=oa=>{var _a=No();i(oa,_a)},ca=oa=>{var _a=Lo(),ha=na(_a),fa=r(t(ha),2),Oa=t(fa,!0);a(fa),a(ha);var Ba=r(ha,2);{var tt=st=>{var V=$o(),be=r(t(V),2),Je=t(be,!0);a(be),a(V),p(()=>d(Je,(e(xe),n(()=>e(xe).subject)))),i(st,V)};m(Ba,st=>{e(xe),n(()=>e(xe).subject)&&st(tt)})}var it=r(Ba,2);{var mt=st=>{var V=qo(),be=r(t(V),2),Je=t(be);a(be),a(V),p(()=>d(Je,`Grade ${e(xe),n(()=>e(xe).gradeLevel)??""}`)),i(st,V)};m(it,st=>{e(xe),n(()=>e(xe).gradeLevel&&e(xe).scheduleType==="subject")&&st(mt)})}p(()=>d(Oa,(e(xe),n(()=>e(xe).room)))),i(oa,_a)};m(Ue,oa=>{e(xe),n(()=>e(xe).scheduleType==="vacant")?oa(ra):oa(ca,!1)})}a(Q),a(ze),p(()=>{B(ze,1,`schedule-class-card ${e(xe),n(()=>e(xe).color)??""}`),d(La,(e(xe),n(()=>e(xe).name))),d(U,(e(xe),n(()=>e(xe).time)))}),i(Se,ze)}),a(I),i(ke,I)},Ae=ke=>{var I=Mo(),Se=r(t(I),4),xe=t(Se);a(Se),a(I),p(()=>d(xe,`You don't have any classes scheduled for ${e(y)??""}. Enjoy your free day!`)),i(ke,I)};m(G,ke=>{e(D),n(()=>e(D).length>0)?ke(ce):ke(Ae,!1)},!0)}i(c,w)};m(g,c=>{e(ve)?c(v):c(l,!1)},!0)}i(ye,ue)};m(we,ye=>{e(F)?ye(Ne):ye(Re,!1)})}a(He),a(E),p(()=>{d(L,`${me??""}, ${O??""} ${te??""}`),d(Oe,(e(A),n(()=>Z[e(A)]||"Select Day"))),B(We,1,`material-symbols-outlined teacher-dropdown-icon ${e(X)?"open":""}`),d(_e,`${e(y)??""} Classes`)}),N("click",le,he),N("click",E,C),N("keydown",E,C),i(re,E),$t(),S()}var Po=o('<div class="class-mgmt-stat-card"><div class="class-mgmt-stat-icon"><span class="material-symbols-outlined"> </span></div> <div class="stat-content"><div class="class-mgmt-stat-value"><!></div> <div class="class-mgmt-stat-label"> </div></div></div>'),Ro=o('<div class="loading-container"><div class="teacher-loading-spinner"></div> <p>Loading your teaching assignments...</p></div>'),Oo=o('<div class="error-container"><div class="error-icon"><span class="material-symbols-outlined">error</span></div> <p class="error-message"> </p> <button class="retry-button"><span class="material-symbols-outlined">refresh</span> Retry</button></div>'),Uo=o(`<div class="empty-state"><div class="empty-icon"><span class="material-symbols-outlined">school</span></div> <h3>No Teaching Assignments</h3> <p>You don't have any sections assigned for this school year.</p></div>`),Wo=(re,_,f,S)=>_(e(f).yearLevel,e(S).name,e(S).id),Yo=o('<span class="more-subjects"> </span>'),Qo=o('<div class="section-subjects"> <!></div>'),Vo=o('<button class="section-card"><div class="section-name"> </div> <!></button>'),Jo=o('<div class="year-level-container"><div class="year-level-header"><div class="year-level-info"><div class="year-level-icon"><span class="material-symbols-outlined">school</span></div> <div class="year-level-details"><h3 class="year-level-title"> </h3> <p class="year-level-summary"> </p></div></div></div> <div class="sections-grid"></div></div>'),Ho=o('<div class="year-levels-grid"></div>'),Bo=o('<div class="class-management-container"><div class="class-mgmt-page-header"><div class="header-content"><h1 class="class-mgmt-page-title">Class Management Dashboard</h1> <p class="class-mgmt-page-subtitle">Overview of your teaching assignments and student distribution</p></div></div> <div class="class-mgmt-stats-section"><div class="class-mgmt-stats-grid"></div></div> <div class="classes-section-container"><h2 class="class-mgmt-section-title">Year Levels & Sections</h2> <!></div></div>');function Hr(re,_){Nt(_,!0);const[f,S]=Rs(),T=()=>Is(Es,"$authStore",f);let D=xa(Os({name:"Loading...",yearLevels:[],totalSections:0,totalStudents:0,averagePerSection:0})),y=xa(Os([])),h=xa(!0),R=xa(null);function H(F,ve,K){_.onNavigateToClassList&&_.onNavigateToClassList({detail:{yearLevel:F,sectionName:ve,sectionId:K}})}let O=[{id:"year-levels",label:"Year Levels",getValue:()=>e(D).yearLevels.length,icon:"school",color:"var(--school-primary)"},{id:"sections",label:"Total Sections",getValue:()=>e(D).totalSections,icon:"class",color:"var(--school-secondary)"},{id:"students",label:"Total Students",getValue:()=>e(D).totalStudents,icon:"people",color:"var(--success)"},{id:"average",label:"Average Per Section",getValue:()=>e(D).averagePerSection,icon:"analytics",color:"var(--school-accent)"}];async function te(){try{s(h,!0),s(R,null);const F=T();if(!F.isAuthenticated||!F.userData?.id)throw new Error("User not authenticated");const ve=F.userData.id,ge=await(await fetch(`/api/teacher-sections?teacherId=${ve}&schoolYear=2024-2025`)).json();if(!ge.success)throw new Error(ge.error||"Failed to fetch teacher sections");s(y,ge.data.classData,!0),s(D,{name:F.userData.name||"Teacher",yearLevels:ge.data.stats.yearLevels,totalSections:ge.data.stats.totalSections,totalStudents:ge.data.stats.totalStudents,averagePerSection:ge.data.stats.averagePerSection},!0)}catch(F){console.error("Error fetching teacher sections:",F),s(R,F.message,!0),s(y,[],!0),s(D,{name:"Teacher",yearLevels:[],totalSections:0,totalStudents:0,averagePerSection:0},!0)}finally{s(h,!1)}}Bt(()=>{te()});var me=Bo(),b=r(t(me),2),W=t(b);ea(W,21,()=>O,F=>F.id,(F,ve)=>{var K=Po(),Le=t(K),ge=t(Le),P=t(ge,!0);a(ge),a(Le);var oe=r(Le,2),se=t(oe),Z=t(se);{let C=Wt(()=>e(ve).getValue());vr(Z,{get value(){return e(C)},format:"d",duration:2e3,animation:"ease-out"})}a(se);var Ce=r(se,2),X=t(Ce,!0);a(Ce),a(oe),a(K),p(()=>{vs(Le,`background-color: ${e(ve).color??""}20; color: ${e(ve).color??""}`),d(P,e(ve).icon),vs(se,`color: ${e(ve).color??""}`),d(X,e(ve).label)}),i(F,K)}),a(W),a(b);var A=r(b,2),q=r(t(A),2);{var J=F=>{var ve=Ro();i(F,ve)},x=F=>{var ve=ya(),K=na(ve);{var Le=P=>{var oe=Oo(),se=r(t(oe),2),Z=t(se);a(se);var Ce=r(se,2);Ce.__click=te,a(oe),p(()=>d(Z,`Error: ${e(R)??""}`)),i(P,oe)},ge=P=>{var oe=ya(),se=na(oe);{var Z=X=>{var C=Uo();i(X,C)},Ce=X=>{var C=Ho();ea(C,21,()=>e(y),he=>he.yearLevel,(he,fe)=>{var E=Jo(),$=t(E),Y=t($),ee=r(t(Y),2),L=t(ee),De=t(L,!0);a(L);var M=r(L,2),le=t(M);a(M),a(ee),a(Y),a($);var Pe=r($,2);ea(Pe,21,()=>e(fe).sections,Oe=>Oe.name,(Oe,We)=>{var Ee=Vo();Ee.__click=[Wo,H,fe,We];var Ye=t(Ee),He=t(Ye,!0);a(Ye);var Fe=r(Ye,2);{var _e=we=>{var Ne=Qo(),Re=t(Ne),ye=r(Re);{var ue=g=>{var v=Yo(),l=t(v);a(v),p(()=>d(l,`+${e(We).subjects.length-2} more`)),i(g,v)};m(ye,g=>{e(We).subjects.length>2&&g(ue)})}a(Ne),p(g=>d(Re,`${g??""} `),[()=>e(We).subjects.slice(0,2).join(", ")]),i(we,Ne)};m(Fe,we=>{e(We).subjects&&e(We).subjects.length>0&&we(_e)})}a(Ee),p(()=>{la(Ee,"aria-label",`View class list for ${e(We).name??""}`),d(He,e(We).name)}),i(Oe,Ee)}),a(Pe),a(E),p(Oe=>{d(De,e(fe).gradeName),d(le,`${e(fe).sections.length??""} section${e(fe).sections.length!==1?"s":""} • ${Oe??""} students`)},[()=>e(fe).sections.reduce((Oe,We)=>Oe+We.students,0)]),i(he,E)}),a(C),i(X,C)};m(se,X=>{e(y).length===0?X(Z):X(Ce,!1)},!0)}i(P,oe)};m(K,P=>{e(R)?P(Le):P(ge,!1)},!0)}i(F,ve)};m(q,F=>{e(h)?F(J):F(x,!1)})}a(A),a(me),i(re,me),$t(),S()}Ts(["click"]);async function zo(re,_,f,S,T,D,y,h,R,H,O,te){if(!_.sectionId||!_.subjectId){qe.error("Missing section or subject information");return}s(f,!0),s(S,""),s(T,!1);try{const me=D().map(W=>({student_id:W.accountNumber||W.account_number||W.id,writtenWork:W.writtenWork,performanceTasks:W.performanceTasks,quarterlyAssessment:W.quarterlyAssessment})),b=await Gs("/api/grades/save",{method:"POST",body:JSON.stringify({section_id:_.sectionId,subject_id:_.subjectId,grading_period_id:y(),grading_config:h(),grades:me})});s(T,!0),qe.success("All grades have been saved to the database"),s(R,H(),!0),s(O,!1),s(te,!0),setTimeout(()=>{s(S,"")},3e3)}catch(me){console.error("Error saving grades:",me),s(T,!1),s(S,me.message||"Failed to save grades",!0),qe.error(e(S)),setTimeout(()=>{s(S,"")},5e3)}finally{s(f,!1)}}var Zo=o('<span class="material-symbols-outlined spinning">sync</span> <span>Saving...</span>',1),Ko=o('<span class="material-symbols-outlined">check_circle</span> <span>Grades Saved</span>',1),Xo=o('<span class="material-symbols-outlined">save</span> <span>Save Grades</span>',1),el=o('<div class="header-overlay"><span class="header-icon material-symbols-outlined">settings</span></div>'),al=o('<th><span class="header-text"> </span> <!></th>'),tl=o('<input type="text" class="cell-input"/>'),sl=o('<span class="cell-content"> </span>'),rl=o("<td><!></td>"),il=o('<tr class="spreadsheet-row"></tr>'),nl=o('<div class="grading-spreadsheet"><div class="save-section"><button><!></button></div> <div class="spreadsheet-container"><table class="spreadsheet-table"><thead><tr></tr></thead><tbody></tbody></table></div></div>');function ol(re,_){Nt(_,!0);const[f,S]=Rs();let T=Ct(_,"students",23,()=>[]),D=Ct(_,"gradingPeriodId",3,1),y=Ct(_,"gradingConfig",23,()=>({writtenWork:{count:3,weight:.3,totals:[]},performanceTasks:{count:3,weight:.5,totals:[]},quarterlyAssessment:{count:1,weight:.2,totals:[]}})),h=xa(!1),R=xa(""),H=xa(!1),O=null,te=null,me=xa(!1),b=xa(!0),W=xa(null),A,q=xa(null),J=xa(!1),x=xa(""),F=xa(!1),ve=xa(Os(new Set)),K=xa(Os([])),Le=Os([]);function ge(g){if(g==null||g==="")return"";const v=parseFloat(g);return isNaN(v)?g:(v%1===0,v.toString())}function P(){return JSON.parse(JSON.stringify(T().map(g=>({id:g.id,writtenWork:[...g.writtenWork],performanceTasks:[...g.performanceTasks],quarterlyAssessment:[...g.quarterlyAssessment]}))))}function oe(){if(!e(W))return!1;const g=P(),v=JSON.stringify(g)!==JSON.stringify(e(W));return s(me,v),s(b,!v),v}function se(){const g=["Student ID","Student Name"];for(let v=1;v<=y().writtenWork.count;v++)g.push(Y("writtenWork",v-1));g.push("WW Avg");for(let v=1;v<=y().performanceTasks.count;v++)g.push(Y("performanceTasks",v-1));g.push("PT Avg");for(let v=1;v<=y().quarterlyAssessment.count;v++)g.push(Y("quarterlyAssessment",v-1));g.push("QA Avg"),g.push("Final Grade"),s(K,[g],!0),T().forEach(v=>{const l=[v.id,v.name];for(let c=0;c<y().writtenWork.count;c++)l.push(ge(v.writtenWork[c]));l.push(Z(v.writtenWork,y().writtenWork.totals,"writtenWork"));for(let c=0;c<y().performanceTasks.count;c++)l.push(ge(v.performanceTasks[c]));l.push(Z(v.performanceTasks,y().performanceTasks.totals,"performanceTasks"));for(let c=0;c<y().quarterlyAssessment.count;c++)l.push(ge(v.quarterlyAssessment[c]));l.push(Z(v.quarterlyAssessment,y().quarterlyAssessment.totals,"quarterlyAssessment")),l.push(Ce(v)),e(K).push(l)}),!e(W)&&T().length>0&&(s(W,P(),!0),s(b,!0),s(me,!1))}function Z(g,v=null,l=null){const c=g.filter(G=>G!=null&&G!=="");if(c.length===0)return"";let w=0;if(v&&v.length>0){for(let ce=0;ce<c.length;ce++){const Ae=parseFloat(c[ce]),ke=v[ce]||100,I=Ae/ke*100;w+=I}const G=Math.round(w/c.length*100)/100;return ge(G)}else{w=c.reduce((ce,Ae)=>ce+parseFloat(Ae),0);const G=Math.round(w/c.length*100)/100;return ge(G)}}function Ce(g){const v=Z(g.writtenWork,y().writtenWork.totals,"writtenWork"),l=Z(g.performanceTasks,y().performanceTasks.totals,"performanceTasks"),c=Z(g.quarterlyAssessment,y().quarterlyAssessment.totals,"quarterlyAssessment");if(v===""||l===""||c==="")return"";const w=parseFloat(v)||0,G=parseFloat(l)||0,ce=parseFloat(c)||0,Ae=w*y().writtenWork.weight+G*y().performanceTasks.weight+ce*y().quarterlyAssessment.weight,ke=Math.round(Ae*100)/100;return ge(ke)}function X(g,v,l){v<2||(s(q,{row:g,col:v},!0),s(J,!1))}function C(g){if(!e(q)||e(J))return;const{row:v,col:l}=e(q);if(e(J)){if(g.key==="Enter")g.preventDefault(),s(J,!1),L(),v<e(K).length-1&&(s(q,{row:v+1,col:l},!0),!he(l)&&l>1&&(s(J,!0),s(x,"")));else if(g.key==="Escape")g.preventDefault(),s(J,!1),s(x,"");else if(g.key==="Tab"){g.preventDefault(),s(J,!1),L();let c=l+1;for(;c<e(K)[0].length&&he(c);)c++;c<e(K)[0].length?(s(q,{row:v,col:c},!0),he(c)||(s(J,!0),s(x,""))):v<e(K).length-1&&(s(q,{row:v+1,col:2},!0),s(J,!0),s(x,""))}else if(/^[0-9.]$/.test(g.key))g.preventDefault(),e(F)?(s(x,g.key,!0),s(F,!1)):s(x,e(x)+g.key);else if(g.key==="Backspace"||g.key==="Delete"){s(F,!1);return}else g.key.length===1&&(g.preventDefault(),e(F)?(s(x,g.key,!0),s(F,!1)):s(x,e(x)+g.key));return}switch(g.key){case"ArrowUp":g.preventDefault(),v>1&&s(q,{row:v-1,col:l},!0);break;case"ArrowDown":g.preventDefault(),v<e(K).length-1&&s(q,{row:v+1,col:l},!0);break;case"ArrowLeft":g.preventDefault(),l>0&&s(q,{row:v,col:l-1},!0);break;case"ArrowRight":g.preventDefault(),l<e(K)[0].length-1&&s(q,{row:v,col:l+1},!0);break;case"Enter":g.preventDefault(),!he(l)&&l>1&&(s(J,!0),s(x,g.key,!0),s(F,!1));break;case"Tab":g.preventDefault();let c=l+1;for(;c<e(K)[0].length&&he(c);)c++;c<e(K)[0].length?s(q,{row:v,col:c},!0):v<e(K).length-1&&s(q,{row:v+1,col:2},!0);break;default:/^[0-9.]$/.test(g.key)&&!he(l)&&l>1?(g.preventDefault(),s(J,!0),s(x,g.key,!0),s(F,!1)):g.key.length===1&&!he(l)&&l>1&&(g.preventDefault(),s(J,!0),s(x,g.key,!0),s(F,!1));break}}function he(g){const l=e(K)[0][g];return l?.includes("Avg")||l==="Final Grade"}function fe(g){return $(g)!==null}function E(g,v){v.preventDefault(),v.stopPropagation(),fe(g)&&Pe(g)}function $(g){let v=2;for(let l=0;l<y().writtenWork.count;l++){if(v===g)return{assessmentType:"writtenWork",columnIndex:l};v++}v++;for(let l=0;l<y().performanceTasks.count;l++){if(v===g)return{assessmentType:"performanceTasks",columnIndex:l};v++}v++;for(let l=0;l<y().quarterlyAssessment.count;l++){if(v===g)return{assessmentType:"quarterlyAssessment",columnIndex:l};v++}return null}function Y(g,v){const l=ee(g,v),c=y()[g].totals[v]||100;return`${l} - ${c}`}function ee(g,v){if(y()[g].columnNames&&y()[g].columnNames[v])return y()[g].columnNames[v];const l=g==="writtenWork"?"WW":g==="performanceTasks"?"PT":"QA";return y()[g].columnPositions&&y()[g].columnPositions[v]!==void 0?`${l}${y()[g].columnPositions[v]}`:`${l}${v+1}`}function L(){if(!e(q)||e(q).row===0)return;const{row:g,col:v}=e(q),l=g-1,c=T()[l];if(!c)return;const w=$(v);if(!w)return;const{assessmentType:G,columnIndex:ce}=w;let Ae=e(x).trim(),ke=null;Ae!==""?(ke=parseFloat(Ae),isNaN(ke)||ke<0?(ke=0,e(ve).add(`${g}-${v}`),setTimeout(()=>{e(ve).delete(`${g}-${v}`),s(ve,new Set(e(ve)),!0)},3e3)):e(ve).delete(`${g}-${v}`)):(ke=null,e(ve).delete(`${g}-${v}`)),c[G][ce]=ke,T([...T()]),se(),oe(),le()}function De(g,v,l){if(e(q)&&e(J)){if(g.key==="ArrowUp"){g.preventDefault(),g.stopPropagation(),L(),s(J,!1),v>1&&s(q,{row:v-1,col:l},!0);return}else if(g.key==="ArrowDown"){g.preventDefault(),g.stopPropagation(),L(),s(J,!1),v<e(K).length-1&&s(q,{row:v+1,col:l},!0);return}else if(g.key==="ArrowLeft"){g.preventDefault(),g.stopPropagation(),L(),s(J,!1),l>0&&s(q,{row:v,col:l-1},!0);return}else if(g.key==="ArrowRight"){g.preventDefault(),g.stopPropagation(),L(),s(J,!1),l<e(K)[0].length-1&&s(q,{row:v,col:l+1},!0);return}if(g.key==="Enter")g.preventDefault(),s(J,!1),L(),v<e(K).length-1&&(s(q,{row:v+1,col:l},!0),!he(l)&&l>1&&(s(J,!0),s(x,""),s(F,!0)));else if(g.key==="Escape")g.preventDefault(),s(J,!1),s(x,"");else if(g.key==="Tab"){g.preventDefault(),s(J,!1),L();let c=l+1;for(;c<Le.length&&he(c);)c++;c<Le.length?(s(q,{row:v,col:c},!0),he(c)||(s(J,!0),s(x,""),s(F,!0))):v<e(K).length-1&&(s(q,{row:v+1,col:2},!0),s(J,!0),s(x,""),s(F,!0))}}}Bt(()=>{se()});async function M(){if(!(e(h)||!T().length||!_.sectionId||!_.subjectId))try{const g=T().map(v=>({student_id:v.accountNumber||v.account_number||v.id,writtenWork:v.writtenWork,performanceTasks:v.performanceTasks,quarterlyAssessment:v.quarterlyAssessment}));await Gs("/api/grades/save",{method:"POST",body:JSON.stringify({section_id:_.sectionId,subject_id:_.subjectId,grading_period_id:D(),grading_config:y(),grades:g})}),s(W,P(),!0),s(me,!1),s(b,!0)}catch(g){console.error("Auto-save failed:",g.message)}}function le(){te&&clearTimeout(te),te=setTimeout(()=>{M()},3e3)}Js(()=>{const g=T().length,v=y();n(()=>{(g>0||v)&&se()})}),Js(()=>(O=setInterval(M,3e4),()=>{O&&clearInterval(O),te&&clearTimeout(te)}));function Pe(g){const v=$(g);if(!v){qe.error("Cannot edit this column");return}const{assessmentType:l,columnIndex:c}=v,w=ee(l,c),G=y()[l].totals[c]||100,ce=y()[l].gradeItemIds?.[c];if(!ce){qe.error("Cannot edit column: Grade item ID not found");return}ms.form("Edit Column","Edit the column name and total score for this assessment:",{label:"Column Name",type:"text",placeholder:"Enter column name",value:w},{label:"Total Score",type:"number",placeholder:"Enter total score",value:G,min:1,max:1e3},async(Ae,ke)=>{if(!Ae||!Ae.trim()){qe.error("Column name cannot be empty");return}const I=parseInt(ke);if(isNaN(I)||I<1||I>1e3){qe.error("Total score must be between 1 and 1000");return}try{const Se=await Gs("/api/grades/grade-items",{method:"PUT",body:JSON.stringify({grade_item_id:ce,name:Ae.trim(),total_score:I})});y()[l].columnNames||(y()[l].columnNames=[]),y()[l].columnNames[c]=Ae.trim(),y()[l].totals[c]=I,y({...y()}),se(),qe.success("Column updated successfully")}catch(Se){console.error("Error updating column:",Se),qe.error("Failed to update column. Please try again.")}},()=>{},async()=>{try{const Ae=await Gs("/api/grades/grade-items",{method:"DELETE",body:JSON.stringify({grade_item_id:ce})});y()[l].count-=1,y()[l].columnNames&&y()[l].columnNames.splice(c,1),y()[l].totals&&y()[l].totals.splice(c,1),y()[l].columnPositions&&y()[l].columnPositions.splice(c,1),y()[l].gradeItemIds&&y()[l].gradeItemIds.splice(c,1),y({...y()}),T(T().map(ke=>{const I={...ke};return l==="writtenWork"&&I.writtenWork?I.writtenWork.splice(c,1):l==="performanceTasks"&&I.performanceTasks?I.performanceTasks.splice(c,1):l==="quarterlyAssessment"&&I.quarterlyAssessment&&I.quarterlyAssessment.splice(c,1),I})),se(),qe.success("Column deleted successfully")}catch(Ae){console.error("Error deleting column:",Ae),qe.error("Failed to delete column. Please try again.")}},{size:"small"})}var Oe=nl();N("keydown",Ps,C);var We=t(Oe),Ee=t(We);let Ye;Ee.__click=[zo,_,h,R,H,T,D,y,W,P,me,b];var He=t(Ee);{var Fe=g=>{var v=Zo();Ea(2),i(g,v)},_e=g=>{var v=ya(),l=na(v);{var c=G=>{var ce=Ko();Ea(2),i(G,ce)},w=G=>{var ce=Xo();Ea(2),i(G,ce)};m(l,G=>{e(b)&&!e(me)?G(c):G(w,!1)},!0)}i(g,v)};m(He,g=>{e(h)?g(Fe):g(_e,!1)})}a(Ee),a(We);var we=r(We,2),Ne=t(we),Re=t(Ne),ye=t(Re);ea(ye,21,()=>e(K)[0]||[],ds,(g,v,l)=>{var c=al();let w;c.__click=I=>E(l,I);var G=t(c),ce=t(G,!0);a(G);var Ae=r(G,2);{var ke=I=>{var Se=el();i(I,Se)};m(Ae,I=>{fe(l)&&I(ke)})}a(c),p((I,Se)=>{w=B(c,1,"spreadsheet-header",null,w,I),la(c,"title",Se),d(ce,e(v))},[()=>({"student-info":l<2,calculated:he(l),clickable:fe(l)}),()=>fe(l)?"Click to set total scores":""]),i(g,c)}),a(ye),a(Re);var ue=r(Re);ea(ue,21,()=>e(K).slice(1),ds,(g,v,l)=>{var c=il();ea(c,21,()=>e(v),ds,(w,G,ce)=>{var Ae=rl();let ke;Ae.__click=ze=>X(l+1,ce);var I=t(Ae);{var Se=ze=>{var sa=tl();ka(sa),sa.__keydown=va=>De(va,l+1,ce),si(sa),N("blur",sa,()=>{s(J,!1),L()}),Ta(sa,()=>e(x),va=>s(x,va)),i(ze,sa)},xe=ze=>{var sa=sl(),va=t(sa,!0);a(sa),p(()=>d(va,e(G))),i(ze,sa)};m(I,ze=>{e(J)&&e(q)?.row===l+1&&e(q)?.col===ce?ze(Se):ze(xe,!1)})}a(Ae),p(ze=>ke=B(Ae,1,"spreadsheet-cell",null,ke,ze),[()=>({selected:e(q)?.row===l+1&&e(q)?.col===ce,editing:e(J)&&e(q)?.row===l+1&&e(q)?.col===ce,"student-info":ce<2,calculated:he(ce),editable:!he(ce)&&ce>1,invalid:e(ve).has(`${l+1}-${ce}`)})]),i(w,Ae)}),a(c),i(g,c)}),a(ue),a(Ne),a(we),a(Oe),zr(Oe,g=>A=g,()=>A),p(g=>{Ye=B(Ee,1,"save-button",null,Ye,g),Ee.disabled=e(h)||e(b)&&!e(me),la(Ee,"title",e(b)&&!e(me)?"All grades are saved":"Save all grades to database")},[()=>({saved:e(b)&&!e(me)})]),i(re,Oe),$t(),S()}Ts(["click","keydown"]);var ll=(re,_)=>_.onBackToClassManagement&&_.onBackToClassManagement(),dl=o('<div class="loading-container"><div class="teacher-loading-spinner"></div> <p>Loading class data...</p></div>'),cl=o('<div class="error-container"><div class="error-icon"><span class="material-symbols-outlined">error</span></div> <p class="error-message"> </p> <button class="retry-button"><span class="material-symbols-outlined">refresh</span> Retry</button></div>'),vl=o(`<div class="empty-state"><div class="empty-icon"><span class="material-symbols-outlined">school</span></div> <h3>No Students Found</h3> <p>This section doesn't have any enrolled students yet.</p></div>`),ul=(re,_)=>_("writtenWork"),ml=(re,_)=>_("performanceTasks"),pl=(re,_)=>_("quarterlyAssessment"),_l=o('<div class="grading-config-section"><h2 class="config-title">Grading Configuration</h2> <div class="config-grid"><div class="config-item"><label class="config-label"> </label> <div class="classlist-column-controls"><div class="classlist-column-count"><span class="classlist-column-text"> </span></div> <div class="classlist-action-buttons"><button type="button" class="classlist-add-column-button" title="Add Column"><span class="material-symbols-outlined">add</span></button></div></div></div> <div class="config-item"><label class="config-label"> </label> <div class="classlist-column-controls"><div class="classlist-column-count"><span class="classlist-column-text"> </span></div> <div class="classlist-action-buttons"><button type="button" class="classlist-add-column-button" title="Add Column"><span class="material-symbols-outlined">add</span></button></div></div></div> <div class="config-item"><label class="config-label"> </label> <div class="classlist-column-controls"><div class="classlist-column-count"><span class="classlist-column-text"> </span></div> <div class="classlist-action-buttons"><button type="button" class="classlist-add-column-button" title="Add Column"><span class="material-symbols-outlined">add</span></button></div></div></div></div></div> <div class="classlist-submit-section"><div class="classlist-stats"><div class="student-list-stat-item"><span class="material-symbols-outlined">group</span> <span> </span></div></div> <button class="classlist-submit-button" type="button"><span class="material-symbols-outlined">send</span> <span>Submit to Section Adviser</span></button></div> <!>',1),fl=o('<div class="class-management-container"><div class="classlist-page-header"><div class="header-content"><div class="header-navigation"><button class="back-button"><span class="material-symbols-outlined">arrow_back</span> <span>Back to Class Management</span></button></div> <h1 class="classlist-page-title">Class Grading Sheet</h1> <p class="classlist-page-subtitle"> </p></div></div> <!></div> <!>',1);function gl(re,_){Nt(_,!0);const[f,S]=Rs(),T=()=>Is(Es,"$authStore",f);let D=xa(!0),y=xa(null),h=xa(!1),R=xa(null),H=Wt(()=>e(R)?{yearLevel:e(R).section.gradeLevel,sectionName:e(R).section.name,gradeName:`Grade ${e(R).section.gradeLevel}`,subject:e(R).subjects.length>0?e(R).subjects[0].name:"No Subject",section:`Grade ${e(R).section.gradeLevel} - ${e(R).section.name}`,quarter:"1st Quarter",totalStudents:e(R).totalStudents,adviser:e(R).section.adviser,room:e(R).section.room}:_.selectedClass?{yearLevel:_.selectedClass.yearLevel,sectionName:_.selectedClass.sectionName,gradeName:`Grade ${_.selectedClass.yearLevel}`,subject:"Loading...",section:`Grade ${_.selectedClass.yearLevel} - ${_.selectedClass.sectionName}`,quarter:"1st Quarter",totalStudents:0}:{yearLevel:7,sectionName:"Section A",gradeName:"Grade 7",subject:"Mathematics",section:"Grade 7 - Section A",quarter:"1st Quarter",totalStudents:0}),O=xa(Os([]));async function te(){if(!_.selectedClass||!e(R)?.subjects?.[0]?.id||e(h))return;const E=e(R).subjects[0].id;try{const $=await fetch(`/api/grades/grade-items?section_id=${_.selectedClass.sectionId}&subject_id=${E}&grading_period_id=1`,{method:"GET",headers:{"Content-Type":"application/json","x-user-id":T().userData.id.toString(),"x-user-account-number":T().userData.accountNumber||"","x-user-name":encodeURIComponent(T().userData.name||"")}});if($.ok){const Y=await $.json();if(Y.success&&Y.gradeItems){const ee={writtenWork:{count:Y.gradeItems.writtenWork.length,weight:.3,label:"WW",totals:Y.gradeItems.writtenWork.map(L=>L.total_score),columnNames:Y.gradeItems.writtenWork.map(L=>L.name),columnPositions:Y.gradeItems.writtenWork.map((L,De)=>De+1),gradeItemIds:Y.gradeItems.writtenWork.map(L=>L.id)},performanceTasks:{count:Y.gradeItems.performanceTasks.length,weight:.5,label:"PT",totals:Y.gradeItems.performanceTasks.map(L=>L.total_score),columnNames:Y.gradeItems.performanceTasks.map(L=>L.name),columnPositions:Y.gradeItems.performanceTasks.map((L,De)=>De+1),gradeItemIds:Y.gradeItems.performanceTasks.map(L=>L.id)},quarterlyAssessment:{count:Y.gradeItems.quarterlyAssessment.length,weight:.2,label:"QA",totals:Y.gradeItems.quarterlyAssessment.map(L=>L.total_score),columnNames:Y.gradeItems.quarterlyAssessment.map(L=>L.name),columnPositions:Y.gradeItems.quarterlyAssessment.map((L,De)=>De+1),gradeItemIds:Y.gradeItems.quarterlyAssessment.map(L=>L.id)}};s(b,ee,!0)}}else console.error("Failed to fetch grading configuration:",$.status,$.statusText)}catch($){console.error("Error fetching grading configuration:",$)}}async function me(){if(!e(h))try{if(s(D,!0),s(y,null),!_.selectedClass?.sectionId)throw new Error("No section selected");const E=T(),$=E.isAuthenticated?E.userData?.id:null,Y=new URLSearchParams({sectionId:_.selectedClass.sectionId.toString(),schoolYear:"2024-2025"});$&&Y.append("teacherId",$.toString());const L=await(await fetch(`/api/class-students?${Y}`)).json();if(!L.success)throw new Error(L.error||"Failed to fetch class students");s(R,L.data,!0),s(O,L.data.students,!0)}catch(E){console.error("Error fetching class students:",E),s(y,E.message,!0),s(R,null),s(O,[],!0)}finally{s(D,!1)}}let b=xa(Os({writtenWork:{count:0,weight:.3,label:"Written Work",totals:[],columnNames:[],columnPositions:[],gradeItemIds:[]},performanceTasks:{count:0,weight:.5,label:"Performance Tasks",totals:[],columnNames:[],columnPositions:[],gradeItemIds:[]},quarterlyAssessment:{count:0,weight:.2,label:"Quarterly Assessment",totals:[],columnNames:[],columnPositions:[],gradeItemIds:[]}})),W=xa(""),A=xa("error"),q=xa(!1);function J(E){}async function x(E){if(e(b)[E].count<10&&!e(D)&&!e(h))try{s(D,!0);const Y={writtenWork:1,performanceTasks:2,quarterlyAssessment:3}[E];if(!Y){console.error("Invalid category:",E);return}if(!T().isAuthenticated||!T().userData?.id){console.error("User not authenticated");return}const ee=await fetch("/api/grades/grade-items",{method:"POST",headers:{"Content-Type":"application/json","x-user-id":T().userData.id.toString(),"x-user-account-number":T().userData.accountNumber||"","x-user-name":encodeURIComponent(T().userData.name||"")},body:JSON.stringify({action:"add",section_id:_.selectedClass?.sectionId||e(R)?.section?.id,subject_id:_.selectedClass?.subjectId||e(R)?.subjects?.[0]?.id,grading_period_id:1,category_id:Y})});if(!ee.ok){const le=await ee.json();console.error("Failed to add grade item:",le.error);return}const L=await ee.json();if(console.log("Grade item added successfully:",L),e(b)[E].count+=1,e(b)[E].gradeItemIds||(e(b)[E].gradeItemIds=[]),e(b)[E].gradeItemIds.push(L.grade_item.id),e(b)[E].columnNames||(e(b)[E].columnNames=[]),e(b)[E].columnNames.push(L.grade_item.name),!e(b)[E].columnPositions){e(b)[E].columnPositions=[];for(let le=0;le<e(b)[E].count-1;le++)e(b)[E].columnPositions[le]=le+1}const De=e(b)[E].columnPositions||[];let M=1;for(;De.includes(M);)M++;e(b)[E].columnPositions.push(M),F()}catch($){console.error("Error adding column:",$)}finally{s(D,!1)}}function F(){s(O,e(O).map(E=>({...E,writtenWork:Array(e(b).writtenWork.count).fill(0).map((Y,ee)=>E.writtenWork?.[ee]||0),performanceTasks:Array(e(b).performanceTasks.count).fill(0).map((Y,ee)=>E.performanceTasks?.[ee]||0),quarterlyAssessment:Array(e(b).quarterlyAssessment.count).fill(0).map((Y,ee)=>E.quarterlyAssessment?.[ee]||0)})),!0)}Bt(async()=>{e(h)||(await me(),await te())}),ri(()=>{s(h,!0),s(D,!1)});var ve=fl();N("click",Ps,J);var K=na(ve),Le=t(K),ge=t(Le),P=t(ge),oe=t(P);oe.__click=[ll,_],a(P);var se=r(P,4),Z=t(se);a(se),a(ge),a(Le);var Ce=r(Le,2);{var X=E=>{var $=dl();i(E,$)},C=E=>{var $=ya(),Y=na($);{var ee=De=>{var M=cl(),le=r(t(M),2),Pe=t(le);a(le);var Oe=r(le,2);Oe.__click=me,a(M),p(()=>d(Pe,`Error: ${e(y)??""}`)),i(De,M)},L=De=>{var M=ya(),le=na(M);{var Pe=We=>{var Ee=vl();i(We,Ee)},Oe=We=>{var Ee=_l(),Ye=na(Ee),He=r(t(Ye),2),Fe=t(He),_e=t(Fe),we=t(_e);a(_e);var Ne=r(_e,2),Re=t(Ne),ye=t(Re),ue=t(ye);a(ye),a(Re);var g=r(Re,2),v=t(g);v.__click=[ul,x],a(g),a(Ne),a(Fe);var l=r(Fe,2),c=t(l),w=t(c);a(c);var G=r(c,2),ce=t(G),Ae=t(ce),ke=t(Ae);a(Ae),a(ce);var I=r(ce,2),Se=t(I);Se.__click=[ml,x],a(I),a(G),a(l);var xe=r(l,2),ze=t(xe),sa=t(ze);a(ze);var va=r(ze,2),La=t(va),ae=t(La),U=t(ae);a(ae),a(La);var Q=r(La,2),Ue=t(Q);Ue.__click=[pl,x],a(Q),a(va),a(xe),a(He),a(Ye);var ra=r(Ye,2),ca=t(ra),oa=t(ca),_a=r(t(oa),2),ha=t(_a);a(_a),a(oa),a(ca),Ea(2),a(ra);var fa=r(ra,2);{let Oa=Wt(()=>_.selectedClass?.sectionId),Ba=Wt(()=>e(R)?.subjects?.[0]?.id);ol(fa,{get sectionId(){return e(Oa)},get subjectId(){return e(Ba)},gradingPeriodId:1,get students(){return e(O)},set students(tt){s(O,tt,!0)},get gradingConfig(){return e(b)},set gradingConfig(tt){s(b,tt,!0)}})}p((Oa,Ba,tt)=>{d(we,`Written Work (${Oa??""}%)`),d(ue,`${e(b).writtenWork.count??""} Column${e(b).writtenWork.count!==1?"s":""}`),v.disabled=e(b).writtenWork.count>=10,d(w,`Performance Tasks (${Ba??""}%)`),d(ke,`${e(b).performanceTasks.count??""} Column${e(b).performanceTasks.count!==1?"s":""}`),Se.disabled=e(b).performanceTasks.count>=10,d(sa,`Quarterly Assessment (${tt??""}%)`),d(U,`${e(b).quarterlyAssessment.count??""} Column${e(b).quarterlyAssessment.count!==1?"s":""}`),Ue.disabled=e(b).quarterlyAssessment.count>=10,d(ha,`${e(H).totalStudents??""} Students`)},[()=>Math.round(e(b).writtenWork.weight*100),()=>Math.round(e(b).performanceTasks.weight*100),()=>Math.round(e(b).quarterlyAssessment.weight*100)]),i(We,Ee)};m(le,We=>{e(O).length===0?We(Pe):We(Oe,!1)},!0)}i(De,M)};m(Y,De=>{e(y)?De(ee):De(L,!1)},!0)}i(E,$)};m(Ce,E=>{e(D)?E(X):E(C,!1)})}a(K);var he=r(K,2);{var fe=E=>{ci(E,{get message(){return e(W)},get type(){return e(A)},onClose:()=>s(q,!1)})};m(he,E=>{e(q)&&E(fe)})}p(()=>d(Z,`${e(H).section??""} • ${e(H).subject??""} • ${e(H).quarter??""}`)),i(re,ve),$t(),S()}Ts(["click"]);var bl=o('<div class="advisory-stat-card"><div class="advisory-stat-icon"><span class="material-symbols-outlined"> </span></div> <div class="stat-content"><div class="advisory-stat-value"><!> <!></div> <div class="advisory-stat-label"> </div></div></div>'),hl=o('<button class="unverify-btn"><span class="material-symbols-outlined">cancel</span> Unverify All</button>'),yl=o('<button class="verify-btn"><span class="material-symbols-outlined">verified</span> Verify All</button>'),wl=o('<small class="submitted-date"> </small>'),Sl=o('<button class="unverify-grade-btn"><span class="material-symbols-outlined">cancel</span></button>'),xl=o('<button class="verify-grade-btn"><span class="material-symbols-outlined">verified</span></button>'),kl=o('<div><div class="grade-item-header"><div class="grade-info"><div class="subject-name"> </div> <div class="subject-teacher"> </div> <!></div> <div class="grade-controls"><div class="grade-score-display"> </div> <!></div></div></div>'),Dl=o('<div class="student-grades"><div class="grades-header"><h4 class="grades-title">Subject Grades (1st Quarter)</h4> <div class="student-verification-controls"><!></div></div> <div class="grades-grid"></div></div>'),Tl=o('<div><div class="student-header"><div class="student-header-content"><div class="student-title-section"><h3 class="student-title"> </h3></div> <div class="student-info-row"><div class="student-info-item"><span class="material-symbols-outlined">person</span> <span> </span></div> <div class="student-info-item"><span class="material-symbols-outlined"> </span> <span> </span></div> <div class="student-info-item"><span class="material-symbols-outlined">assignment</span> <span> </span></div></div></div> <div class="student-average"><div class="average-score"> </div></div> <div class="expand-icon"><span class="material-symbols-outlined"> </span></div></div> <!></div>'),Al=o('<div class="advisory-class-container"><div class="advisory-page-header"><div class="header-content"><h1 class="advisory-page-title">Advisory Class Dashboard</h1> <div class="advisory-class-info"><div class="class-detail"><span class="material-symbols-outlined">school</span> <span> </span></div> <div class="class-detail"><span class="material-symbols-outlined">meeting_room</span> <span> </span></div></div> <div class="verification-info"><span class="material-symbols-outlined">info</span> <div class="verification-text"><span>Use verification controls to approve grades for student portal visibility</span></div></div></div></div> <div class="advisory-stats-section"><div class="advisory-stats-grid"></div></div> <div class="students-section"><div class="section-header"><h2 class="advisory-section-title">Students & Grade Overview</h2> <div class="bulk-controls"><button class="verify-all-btn"><span class="material-symbols-outlined">verified</span> Verify All Grades</button> <button class="unverify-all-btn"><span class="material-symbols-outlined">cancel</span> Unverify All Grades</button></div></div> <div class="advisory-students-grid"></div></div></div>');function jl(re,_){Nt(_,!1);const f=u();let S=u({sectionName:"Grade 9 - Section A",roomName:"Room 201",totalStudents:32,averageGrade:87.5,subjectsCount:8}),T=u([{id:"2024-001",name:"Alice Johnson",studentNumber:"2024-001234",gradesVerified:!1,grades:[{subject:"Mathematics",teacher:"Mr. Smith",grade:92,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-15"},{subject:"Science",teacher:"Ms. Davis",grade:88,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-14"},{subject:"English",teacher:"Mrs. Brown",grade:85,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-16"},{subject:"History",teacher:"Mr. Wilson",grade:90,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-13"},{subject:"Filipino",teacher:"Ms. Cruz",grade:87,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-17"},{subject:"PE",teacher:"Coach Martinez",grade:95,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-12"},{subject:"Arts",teacher:"Ms. Garcia",grade:89,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-18"},{subject:"Computer",teacher:"Mr. Lee",grade:93,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-11"}]},{id:"2024-002",name:"Bob Chen",studentNumber:"2024-001235",gradesVerified:!0,grades:[{subject:"Mathematics",teacher:"Mr. Smith",grade:78,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-15"},{subject:"Science",teacher:"Ms. Davis",grade:82,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-14"},{subject:"English",teacher:"Mrs. Brown",grade:80,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-16"},{subject:"History",teacher:"Mr. Wilson",grade:85,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-13"},{subject:"Filipino",teacher:"Ms. Cruz",grade:79,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-17"},{subject:"PE",teacher:"Coach Martinez",grade:90,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-12"},{subject:"Arts",teacher:"Ms. Garcia",grade:83,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-18"},{subject:"Computer",teacher:"Mr. Lee",grade:88,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-11"}]},{id:"2024-003",name:"Carol Martinez",studentNumber:"2024-001236",gradesVerified:!1,grades:[{subject:"Mathematics",teacher:"Mr. Smith",grade:95,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-15"},{subject:"Science",teacher:"Ms. Davis",grade:91,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-14"},{subject:"English",teacher:"Mrs. Brown",grade:88,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-16"},{subject:"History",teacher:"Mr. Wilson",grade:92,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-13"},{subject:"Filipino",teacher:"Ms. Cruz",grade:90,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-17"},{subject:"PE",teacher:"Coach Martinez",grade:98,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-12"},{subject:"Arts",teacher:"Ms. Garcia",grade:94,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-18"},{subject:"Computer",teacher:"Mr. Lee",grade:96,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-11"}]},{id:"2024-004",name:"David Rodriguez",studentNumber:"2024-001237",gradesVerified:!1,grades:[{subject:"Mathematics",teacher:"Mr. Smith",grade:84,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-15"},{subject:"Science",teacher:"Ms. Davis",grade:86,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-14"},{subject:"English",teacher:"Mrs. Brown",grade:82,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-16"},{subject:"History",teacher:"Mr. Wilson",grade:88,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-13"},{subject:"Filipino",teacher:"Ms. Cruz",grade:85,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-17"},{subject:"PE",teacher:"Coach Martinez",grade:92,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-12"},{subject:"Arts",teacher:"Ms. Garcia",grade:87,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-18"},{subject:"Computer",teacher:"Mr. Lee",grade:89,quarter:"1st Quarter",verified:!1,submittedDate:"2024-01-11"}]},{id:"2024-005",name:"Emma Thompson",studentNumber:"2024-001238",gradesVerified:!0,grades:[{subject:"Mathematics",teacher:"Mr. Smith",grade:91,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-15"},{subject:"Science",teacher:"Ms. Davis",grade:89,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-14"},{subject:"English",teacher:"Mrs. Brown",grade:93,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-16"},{subject:"History",teacher:"Mr. Wilson",grade:87,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-13"},{subject:"Filipino",teacher:"Ms. Cruz",grade:88,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-17"},{subject:"PE",teacher:"Coach Martinez",grade:94,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-12"},{subject:"Arts",teacher:"Ms. Garcia",grade:91,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-18"},{subject:"Computer",teacher:"Mr. Lee",grade:92,quarter:"1st Quarter",verified:!0,submittedDate:"2024-01-11"}]}]);function D(E){s(T,e(T).map($=>$.id===E?{...$,gradesVerified:!0,grades:$.grades.map(Y=>({...Y,verified:!0}))}:$))}function y(E){s(T,e(T).map($=>$.id===E?{...$,gradesVerified:!1,grades:$.grades.map(Y=>({...Y,verified:!1}))}:$))}function h(E,$){s(T,e(T).map(Y=>{if(Y.id===E){const ee=Y.grades.map(De=>De.subject===$?{...De,verified:!0}:De),L=ee.every(De=>De.verified);return{...Y,grades:ee,gradesVerified:L}}return Y}))}function R(E,$){s(T,e(T).map(Y=>{if(Y.id===E){const ee=Y.grades.map(L=>L.subject===$?{...L,verified:!1}:L);return{...Y,grades:ee,gradesVerified:!1}}return Y}))}function H(){s(T,e(T).map(E=>({...E,gradesVerified:!0,grades:E.grades.map($=>({...$,verified:!0}))})))}function O(){s(T,e(T).map(E=>({...E,gradesVerified:!1,grades:E.grades.map($=>({...$,verified:!1}))})))}let te=[{id:"students",label:"Total Students",getValue:()=>e(S).totalStudents,icon:"people",color:"var(--school-primary)"},{id:"subjects",label:"Subjects Tracked",getValue:()=>e(S).subjectsCount,icon:"book",color:"var(--school-secondary)"},{id:"average",label:"Class Average",getValue:()=>e(S).averageGrade,icon:"analytics",color:"var(--success)"}],me=u(null);function b(E){s(me,e(me)?.id===E.id?null:E)}function W(E){return E>=90?"var(--success)":E>=80?"var(--school-accent)":E>=75?"var(--warning)":"var(--error)"}Na(()=>e(T),()=>{s(f,e(T).map(E=>{const Y=E.grades.reduce((L,De)=>L+De.grade,0)/E.grades.length,ee=E.grades.filter(L=>L.verified);return{...E,average:Math.round(Y*100)/100,verifiedGradesCount:ee.length,pendingGradesCount:E.grades.length-ee.length}}))}),Na(()=>e(f),()=>{const E=e(f).map($=>$.average);Ns(S,e(S).averageGrade=Math.round(E.reduce(($,Y)=>$+Y,0)/E.length*100)/100)}),ns();var A=Al(),q=t(A),J=t(q),x=r(t(J),2),F=t(x),ve=r(t(F),2),K=t(ve,!0);a(ve),a(F);var Le=r(F,2),ge=r(t(Le),2),P=t(ge,!0);a(ge),a(Le),a(x),Ea(2),a(J),a(q);var oe=r(q,2),se=t(oe);ea(se,5,()=>te,E=>E.id,(E,$)=>{var Y=bl(),ee=t(Y),L=t(ee),De=t(L,!0);a(L),a(ee);var M=r(ee,2),le=t(M),Pe=t(le);{let He=ws(()=>(e($),n(()=>e($).getValue())));vr(Pe,{get value(){return e(He)},format:"d",duration:2e3,animation:"ease-out"})}var Oe=r(Pe,2);{var We=He=>{var Fe=wt("%");i(He,Fe)};m(Oe,He=>{e($),n(()=>e($).id==="average")&&He(We)})}a(le);var Ee=r(le,2),Ye=t(Ee,!0);a(Ee),a(M),a(Y),p(()=>{vs(ee,`background-color: ${e($),n(()=>e($).color)??""}20; color: ${e($),n(()=>e($).color)??""}`),d(De,(e($),n(()=>e($).icon))),vs(le,`color: ${e($),n(()=>e($).color)??""}`),d(Ye,(e($),n(()=>e($).label)))}),i(E,Y)}),a(se),a(oe);var Z=r(oe,2),Ce=t(Z),X=r(t(Ce),2),C=t(X),he=r(C,2);a(X),a(Ce);var fe=r(Ce,2);ea(fe,5,()=>e(f),E=>E.id,(E,$)=>{var Y=Tl();let ee;var L=t(Y),De=t(L),M=t(De),le=t(M),Pe=t(le);a(le),a(M);var Oe=r(M,2),We=t(Oe),Ee=r(t(We),2),Ye=t(Ee);a(Ee),a(We);var He=r(We,2),Fe=t(He),_e=t(Fe,!0);a(Fe);var we=r(Fe,2),Ne=t(we,!0);a(we),a(He);var Re=r(He,2),ye=r(t(Re),2),ue=t(ye);a(ye),a(Re),a(Oe),a(De);var g=r(De,2),v=t(g),l=t(v);a(v),a(g);var c=r(g,2),w=t(c),G=t(w,!0);a(w),a(c),a(L);var ce=r(L,2);{var Ae=ke=>{var I=Dl(),Se=t(I),xe=r(t(Se),2),ze=t(xe);{var sa=ae=>{var U=hl();N("click",U,Vs(()=>y(e($).id))),i(ae,U)},va=ae=>{var U=yl();N("click",U,Vs(()=>D(e($).id))),i(ae,U)};m(ze,ae=>{e($),n(()=>e($).gradesVerified)?ae(sa):ae(va,!1)})}a(xe),a(Se);var La=r(Se,2);ea(La,5,()=>(e($),n(()=>e($).grades)),ae=>ae.subject,(ae,U)=>{var Q=kl(),Ue=t(Q),ra=t(Ue),ca=t(ra),oa=t(ca,!0);a(ca);var _a=r(ca,2),ha=t(_a);a(_a);var fa=r(_a,2);{var Oa=be=>{var Je=wl(),ga=t(Je);a(Je),p(()=>d(ga,`Submitted: ${e(U),n(()=>e(U).submittedDate)??""}`)),i(be,Je)};m(fa,be=>{e(U),n(()=>e(U).submittedDate)&&be(Oa)})}a(ra);var Ba=r(ra,2),tt=t(Ba),it=t(tt);a(tt);var mt=r(tt,2);{var st=be=>{var Je=Sl();N("click",Je,Vs(()=>R(e($).id,e(U).subject))),i(be,Je)},V=be=>{var Je=xl();N("click",Je,Vs(()=>h(e($).id,e(U).subject))),i(be,Je)};m(mt,be=>{e(U),n(()=>e(U).verified)?be(st):be(V,!1)})}a(Ba),a(Ue),a(Q),p(be=>{B(Q,1,`grade-item ${e(U),n(()=>e(U).verified?"verified":"unverified")??""}`),d(oa,(e(U),n(()=>e(U).subject))),d(ha,`by ${e(U),n(()=>e(U).teacher)??""}`),vs(tt,`color: ${be??""}`),d(it,`${e(U),n(()=>e(U).grade)??""}%`)},[()=>(e(U),n(()=>W(e(U).grade)))]),i(ae,Q)}),a(La),a(I),i(ke,I)};m(ce,ke=>{e(me),e($),n(()=>e(me)?.id===e($).id)&&ke(Ae)})}a(Y),p((ke,I)=>{ee=B(Y,1,`advisory-student-card ${e($),n(()=>e($).gradesVerified?"verified":"pending")??""}`,null,ee,ke),d(Pe,`${e($),n(()=>e($).name)??""} · Grade ${e($),n(()=>e($).gradeLevel||"7")??""}`),d(Ye,`Student #${e($),n(()=>e($).studentNumber)??""}`),d(_e,(e($),n(()=>e($).gradesVerified?"verified":"pending"))),d(Ne,(e($),n(()=>e($).gradesVerified?"Verified":"Pending"))),d(ue,`${e($),n(()=>e($).verifiedGradesCount)??""} Verified, ${e($),n(()=>e($).pendingGradesCount)??""} Pending`),vs(v,`color: ${I??""}`),d(l,`${e($),n(()=>e($).average)??""}%`),d(G,(e(me),e($),n(()=>e(me)?.id===e($).id?"expand_less":"expand_more")))},[()=>({selected:e(me)?.id===e($).id}),()=>(e($),n(()=>W(e($).average)))]),N("click",L,()=>b(e($))),i(E,Y)}),a(fe),a(Z),a(A),p(()=>{d(K,(e(S),n(()=>e(S).sectionName))),d(P,(e(S),n(()=>e(S).roomName)))}),N("click",C,H),N("click",he,O),i(re,A),$t()}function Cl(re,_){s(_,!e(_))}function Nl(re,_,f){s(_,!e(_)),f()}var $l=o('<img alt="Profile" class="avatar-image"/>'),ql=o('<div class="avatar-placeholder"> </div>'),Ll=(re,_,f)=>{_(),f.onNavigateToSettings()},El=async(re,_,f)=>{_(),await f.onlogout(),ar("Logged out successfully. See you next time!")},Fl=o('<div class="user-dropdown-menu"><button class="dropdown-item"><span class="material-symbols-outlined">settings</span> Settings</button> <button class="dropdown-item"><span class="material-symbols-outlined">logout</span> Logout</button></div>'),Ml=o('<nav class="admin-navbar"><div class="navbar-container"><div class="navbar-left"><button class="icon-button hamburger-menu" aria-label="Toggle navigation menu"><span class="material-symbols-outlined">menu</span></button> <div class="logo-section"><span class="material-symbols-outlined logo-icon">admin_panel_settings</span> <span class="app-title"> </span></div></div> <div class="navbar-right"><button class="icon-button dark-mode-toggle" aria-label="Toggle dark mode"><span class="material-symbols-outlined"> </span></button> <div class="user-profile-container"><button class="user-profile"><div class="user-info"><span class="user-name"> </span> <span class="user-id"> </span></div> <div class="user-avatar"><!></div></button> <!></div></div></div></nav>');function Gl(re,_){Nt(_,!0);let f=Ct(_,"adminName",3,"Admin User"),S=Ct(_,"firstName",3,"Admin"),T=Ct(_,"gender",3,"male"),D=Ct(_,"accountNumber",3,"ADM-2025-0001"),y=Ct(_,"profileImage",3,null);function h(M){return M==="female"?"Ms.":"Mr."}let R=Wt(()=>`${h(T())} ${S()}`),H=xa(!0),O=xa(!1);function te(){s(O,!1)}function me(M){e(O)&&!M.target.closest(".user-profile-container")&&te()}Bt(()=>{const M=localStorage.getItem("theme");return s(H,M!=="light"),b(),document.addEventListener("click",me),()=>{document.removeEventListener("click",me)}});function b(){e(H)?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))}function W(M){return M.split(" ").map(le=>le.charAt(0)).join("").toUpperCase().slice(0,2)}var A=Ml(),q=t(A),J=t(q),x=t(J);x.__click=function(...M){_.onToggleNavRail?.apply(this,M)};var F=r(x,2),ve=r(t(F),2),K=t(ve);a(ve),a(F),a(J);var Le=r(J,2),ge=t(Le);ge.__click=[Nl,H,b];var P=t(ge),oe=t(P,!0);a(P),a(ge);var se=r(ge,2),Z=t(se);Z.__click=[Cl,O];var Ce=t(Z),X=t(Ce),C=t(X,!0);a(X);var he=r(X,2),fe=t(he);a(he),a(Ce);var E=r(Ce,2),$=t(E);{var Y=M=>{var le=$l();p(()=>la(le,"src",y())),i(M,le)},ee=M=>{var le=ql(),Pe=t(le,!0);a(le),p(Oe=>d(Pe,Oe),[()=>W(S())]),i(M,le)};m($,M=>{y()?M(Y):M(ee,!1)})}a(E),a(Z);var L=r(Z,2);{var De=M=>{var le=Fl(),Pe=t(le);Pe.__click=[Ll,te,_];var Oe=r(Pe,2);Oe.__click=[El,te,_],a(le),i(M,le)};m(L,M=>{e(O)&&M(De)})}a(se),a(Le),a(q),a(A),p(()=>{d(K,`Welcome, ${e(R)??""}`),d(oe,e(H)?"light_mode":"dark_mode"),d(C,f()),d(fe,`Account: ${D()??""}`)}),i(re,A),$t()}Ts(["click"]);var Il=(re,_,f)=>_(e(f).id),Pl=(re,_,f)=>_(e(f).id),Rl=o('<button><div class="admin-menu-rail-icon-container"><span class="material-symbols-outlined admin-menu-rail-icon"> </span></div> <span class="admin-menu-rail-label"> </span></button>'),Ol=o('<div class="admin-menu-folder-contents"></div>'),Ul=o('<button><div class="admin-menu-rail-icon-container"><span class="material-symbols-outlined admin-menu-rail-icon"> </span></div> <span class="admin-menu-rail-label"> </span></button> <!>',1),Wl=(re,_,f)=>_(e(f).id),Yl=o('<button><div class="admin-menu-rail-icon-container"><span class="material-symbols-outlined admin-menu-rail-icon"> </span></div> <span class="admin-menu-rail-label"> </span></button>'),Ql=(re,_,f)=>_(e(f).id),Vl=o('<button><div class="admin-menu-nav-icon-container"><span class="material-symbols-outlined admin-menu-nav-icon"> </span></div></button>'),Jl=(re,_,f)=>_(e(f).id),Hl=o('<button><div class="admin-menu-nav-icon-container"><span class="material-symbols-outlined admin-menu-nav-icon"> </span></div></button>'),Bl=(re,_)=>_("management-folder"),zl=re=>re.stopPropagation(),Zl=(re,_)=>_("management-folder"),Kl=(re,_,f,S)=>{_(e(f).id),S("management-folder")},Xl=o('<button><span class="material-symbols-outlined"> </span> <span> </span></button>'),ed=o('<div class="admin-menu-mobile-folder-overlay"><div class="admin-menu-mobile-folder-content"><div class="admin-menu-mobile-folder-header"><h3>Management</h3> <button class="admin-menu-close-folder"><span class="material-symbols-outlined">close</span></button></div> <div class="admin-menu-mobile-folder-items"></div></div></div>'),ad=o('<nav role="navigation" aria-label="Admin portal navigation"><div class="admin-menu-rail-container"></div></nav> <nav class="admin-menu-bottom-navigation" role="navigation" aria-label="Admin portal navigation"><div class="admin-menu-nav-container"><!> <!></div></nav>',1);function td(re,_){Nt(_,!0);let f=Ct(_,"adminActiveSection",15,"dashboard"),S=Ct(_,"adminNavRailVisible",3,!0),T=xa(!1);const D=[{id:"dashboard",label:"Dashboard",icon:"dashboard",type:"item"},{id:"management-folder",label:"Management",icon:"folder",type:"folder",expanded:e(T),items:[{id:"schedule-management",label:"Schedule",icon:"schedule"},{id:"department-management",label:"Department",icon:"corporate_fare"},{id:"subjects-and-activities",label:"Subjects & Activities",icon:"school"}]},{id:"account-creation",label:"Account Creation",icon:"person_add",type:"item"},{id:"document-requests",label:"Document Requests",icon:"description",type:"item"},{id:"student-masterlist",label:"Student Masterlist",icon:"groups",type:"item"},{id:"student-grades-list",label:"Student Grades List",icon:"grade",type:"item"},{id:"archived-students",label:"Archived Students",icon:"archive",type:"item"}];function y(x){f(x),_.onnavigate&&_.onnavigate({detail:{section:x}})}function h(x){x==="management-folder"&&s(T,!e(T))}function R(x){return x.items?.some(F=>F.id===f())||!1}var H=ad(),O=na(H);let te;var me=t(O);ea(me,21,()=>D,x=>x.id,(x,F)=>{var ve=ya(),K=na(ve);{var Le=P=>{var oe=Ul(),se=na(oe);let Z;se.__click=[Il,h,F];var Ce=t(se),X=t(Ce),C=t(X,!0);a(X),a(Ce);var he=r(Ce,2),fe=t(he,!0);a(he),a(se);var E=r(se,2);{var $=Y=>{var ee=Ol();ea(ee,21,()=>e(F).items,L=>L.id,(L,De)=>{var M=Rl();let le;M.__click=[Pl,y,De];var Pe=t(M),Oe=t(Pe),We=t(Oe,!0);a(Oe),a(Pe);var Ee=r(Pe,2),Ye=t(Ee,!0);a(Ee),a(M),p(He=>{le=B(M,1,"admin-menu-rail-item admin-menu-sub-item",null,le,He),la(M,"aria-label",e(De).label),la(M,"aria-current",e(De).id===f()?"page":void 0),d(We,e(De).icon),d(Ye,e(De).label)},[()=>({active:e(De).id===f()})]),i(L,M)}),a(ee),i(Y,ee)};m(E,Y=>{e(T)&&Y($)})}p(Y=>{Z=B(se,1,"admin-menu-rail-item admin-menu-folder",null,Z,Y),la(se,"aria-label",e(F).label),la(se,"aria-expanded",e(T)),d(C,e(T)?"folder_open":"folder"),d(fe,e(F).label)},[()=>({active:R(e(F)),expanded:e(T)})]),i(P,oe)},ge=P=>{var oe=Yl();let se;oe.__click=[Wl,y,F];var Z=t(oe),Ce=t(Z),X=t(Ce,!0);a(Ce),a(Z);var C=r(Z,2),he=t(C,!0);a(C),a(oe),p(fe=>{se=B(oe,1,"admin-menu-rail-item",null,se,fe),la(oe,"aria-label",e(F).label),la(oe,"aria-current",e(F).id===f()?"page":void 0),d(X,e(F).icon),d(he,e(F).label)},[()=>({active:e(F).id===f()})]),i(P,oe)};m(K,P=>{e(F).type==="folder"?P(Le):P(ge,!1)})}i(x,ve)}),a(me),a(O);var b=r(O,2),W=t(b),A=t(W);ea(A,17,()=>D,x=>x.id,(x,F)=>{var ve=ya(),K=na(ve);{var Le=P=>{var oe=Vl();let se;oe.__click=[Ql,h,F];var Z=t(oe),Ce=t(Z),X=t(Ce,!0);a(Ce),a(Z),a(oe),p(C=>{se=B(oe,1,"admin-menu-nav-item admin-menu-folder",null,se,C),la(oe,"aria-label",e(F).label),la(oe,"aria-expanded",e(T)),d(X,e(T)?"folder_open":"folder")},[()=>({active:R(e(F))})]),i(P,oe)},ge=P=>{var oe=Hl();let se;oe.__click=[Jl,y,F];var Z=t(oe),Ce=t(Z),X=t(Ce,!0);a(Ce),a(Z),a(oe),p(C=>{se=B(oe,1,"admin-menu-nav-item",null,se,C),la(oe,"aria-label",e(F).label),la(oe,"aria-current",e(F).id===f()?"page":void 0),d(X,e(F).icon)},[()=>({active:e(F).id===f()})]),i(P,oe)};m(K,P=>{e(F).type==="folder"?P(Le):P(ge,!1)})}i(x,ve)});var q=r(A,2);{var J=x=>{var F=ed();F.__click=[Bl,h];var ve=t(F);ve.__click=[zl];var K=t(ve),Le=r(t(K),2);Le.__click=[Zl,h],a(K);var ge=r(K,2);ea(ge,21,()=>D.find(P=>P.id==="management-folder")?.items||[],P=>P.id,(P,oe)=>{var se=Xl();let Z;se.__click=[Kl,y,oe,h];var Ce=t(se),X=t(Ce,!0);a(Ce);var C=r(Ce,2),he=t(C,!0);a(C),a(se),p(fe=>{Z=B(se,1,"admin-menu-mobile-folder-item",null,Z,fe),d(X,e(oe).icon),d(he,e(oe).label)},[()=>({active:e(oe).id===f()})]),i(P,se)}),a(ge),a(ve),a(F),i(x,F)};m(q,x=>{e(T)&&x(J)})}a(W),a(b),p(x=>te=B(O,1,"admin-menu-navigation-rail",null,te,x),[()=>({collapsed:!S()})]),i(re,H),$t()}Ts(["click"]);function sd(){const{subscribe:re,set:_,update:f}=cr({data:[{id:"students",label:"Total Students",value:0,icon:"school",color:"blue"},{id:"teachers",label:"Total Teachers",value:0,icon:"person",color:"green"},{id:"sections",label:"Total Sections",value:0,icon:"class",color:"orange"},{id:"rooms",label:"Total Rooms",value:0,icon:"meeting_room",color:"purple"}],isLoading:!1,error:null,lastUpdated:null,isInitialized:!1});return{subscribe:re,init:S=>{S&&f(T=>({...T,data:S,isInitialized:!0,isLoading:!1}))},setLoading:S=>{f(T=>({...T,isLoading:S&&!T.isInitialized}))},updateData:S=>{f(T=>({...T,data:S,isLoading:!1,error:null,lastUpdated:new Date,isInitialized:!0}));try{localStorage.setItem("dashboard-stats-cache",JSON.stringify({data:S,timestamp:Date.now()}))}catch(T){console.warn("Failed to cache dashboard data:",T)}},setError:S=>{f(T=>({...T,error:S,isLoading:!1}))},getCachedData:()=>{try{const S=localStorage.getItem("dashboard-stats-cache");if(S){const{data:T,timestamp:D}=JSON.parse(S);if(Date.now()-D<300*1e3)return T}}catch(S){console.warn("Failed to retrieve cached dashboard data:",S)}return null},clearCache:()=>{try{localStorage.removeItem("dashboard-stats-cache")}catch(S){console.warn("Failed to clear dashboard cache:",S)}}}}const Xs=sd();var rd=o('<div class="stats-error"><span class="material-symbols-outlined">error</span> <p> </p> <button class="retry-button"><span class="material-symbols-outlined">refresh</span> Retry</button></div>'),id=o('<div><div class="stat-icon"><span class="material-symbols-outlined"> </span></div> <div class="stat-content"><h3 class="stat-value"><!></h3> <p class="stat-label"> </p></div></div>'),nd=o('<div class="stats-grid"></div>'),od=o('<div class="activities-loading"><div class="dashboard-loader"></div> <p>Loading recent activities...</p></div>'),ld=o('<div class="activities-error"><span class="material-symbols-outlined error-icon">error</span> <p> </p></div>'),dd=o('<div class="activities-empty"><span class="material-symbols-outlined">inbox</span> <p>No recent activities found</p></div>'),cd=o('<p class="activity-user"> </p>'),vd=o('<div class="activity-item"><div class="activity-icon"><span class="material-symbols-outlined"> </span></div> <div class="activity-content"><p class="activity-message"> </p> <!></div> <span class="activity-timestamp"> </span></div>'),ud=o('<div class="load-more"></div>'),md=o('<span class="material-symbols-outlined">expand_more</span> View More Activities',1),pd=o('<div class="view-more-container"><button class="view-more-button"><!></button></div>'),_d=o("<!> <!>",1),fd=o('<div class="dashboard-container"><div class="dashboard-header"><div class="header-content"><h1 class="page-title">Admin Dashboard</h1> <p class="page-subtitle">Overview of school management system statistics</p></div></div> <div class="stats-section"><div class="section-header"><h2 class="section-title">System Statistics</h2> <p class="dashboard-section-subtitle">Current overview of your school management system</p></div> <!></div> <div class="activities-section"><div class="section-header"><h2 class="section-title">Activity Logs</h2> <button class="refresh-button" title="Refresh activity logs"><span class="material-symbols-outlined">refresh</span> Refresh</button></div> <div class="activities-list"><!></div></div></div>');function gd(re,_){Nt(_,!1);const[f,S]=Rs(),T=()=>Is(Xs,"$dashboardStore",f),D=u(),y=u(),h=u();let R=u([]),H=u(!1),O=u(null),te=u(!0),me=4,b=u(!1);async function W(X=!1){try{X||Xs.setLoading(!0);const C=await ut.get("/api/dashboard");if(C.success){const he=[{id:"students",label:"Total Students",value:C.data.students.toLocaleString(),icon:"school",color:"primary"},{id:"teachers",label:"Total Teachers",value:C.data.teachers.toLocaleString(),icon:"person",color:"primary"},{id:"sections",label:"Total Sections",value:C.data.sections.toLocaleString(),icon:"class",color:"primary"},{id:"rooms",label:"Total Rooms",value:C.data.rooms.toLocaleString(),icon:"meeting_room",color:"primary"}];Xs.updateData(he)}else throw new Error(C.error||"Failed to fetch dashboard statistics")}catch(C){console.error("Error fetching dashboard statistics:",C),Xs.setError(C.message)}}async function A(X=!1){try{X||(s(H,!0),s(O,null));const C=await ut.get(`/api/activity-logs?limit=${me}`);if(C.success)s(R,C.activities),s(te,C.activities.length===me);else throw new Error(C.error||"Failed to fetch activities")}catch(C){console.error("Error fetching activities:",C),s(O,C.message)}finally{s(H,!1)}}async function q(){try{s(b,!0);const X=me+4,C=await ut.get(`/api/activity-logs?limit=${X}`);if(C.success)s(R,C.activities),me=X,s(te,C.activities.length===X);else throw new Error(C.error||"Failed to fetch more activities")}catch(X){console.error("Error loading more activities:",X),s(O,X.message)}finally{s(b,!1)}}Bt(()=>{const X=Xs.getCachedData();X&&Xs.init(X),W(!!X),A(!1);const C=setInterval(()=>{W(!0),A(!0)},3e4);return()=>{clearInterval(C)}}),Na(()=>(e(D),e(y),e(h),T()),()=>{(X=>{s(D,X.data),s(y,X.isLoading),s(h,X.error)})(T())}),ns(),os();var J=fd(),x=r(t(J),2),F=r(t(x),2);{var ve=X=>{var C=rd(),he=r(t(C),2),fe=t(he);a(he);var E=r(he,2);a(C),p(()=>d(fe,`Error loading statistics: ${e(h)??""}`)),N("click",E,()=>W(!1)),i(X,C)},K=X=>{var C=nd();ea(C,5,()=>e(D),he=>he.id,(he,fe)=>{var E=id(),$=t(E),Y=t($),ee=t(Y,!0);a(Y),a($);var L=r($,2),De=t(L),M=t(De);{var le=Ee=>{var Ye=wt("Loading...");i(Ee,Ye)},Pe=Ee=>{var Ye=wt();p(()=>d(Ye,(e(fe),n(()=>e(fe).value)))),i(Ee,Ye)};m(M,Ee=>{e(y)?Ee(le):Ee(Pe,!1)})}a(De);var Oe=r(De,2),We=t(Oe,!0);a(Oe),a(L),a(E),p(()=>{B(E,1,`stat-card stat-${e(fe),n(()=>e(fe).color)??""}`),d(ee,(e(fe),n(()=>e(fe).icon))),d(We,(e(fe),n(()=>e(fe).label)))}),i(he,E)}),a(C),i(X,C)};m(F,X=>{e(h)?X(ve):X(K,!1)})}a(x);var Le=r(x,2),ge=t(Le),P=r(t(ge),2);a(ge);var oe=r(ge,2),se=t(oe);{var Z=X=>{var C=od();i(X,C)},Ce=X=>{var C=ya(),he=na(C);{var fe=$=>{var Y=ld(),ee=r(t(Y),2),L=t(ee);a(ee),a(Y),p(()=>d(L,`Error loading activities: ${e(O)??""}`)),i($,Y)},E=$=>{var Y=ya(),ee=na(Y);{var L=M=>{var le=dd();i(M,le)},De=M=>{var le=_d(),Pe=na(le);ea(Pe,1,()=>e(R),Ee=>Ee.id,(Ee,Ye)=>{var He=vd(),Fe=t(He),_e=t(Fe),we=t(_e,!0);a(_e),a(Fe);var Ne=r(Fe,2),Re=t(Ne),ye=t(Re,!0);a(Re);var ue=r(Re,2);{var g=c=>{var w=cd(),G=t(w,!0);a(w),p(()=>d(G,(e(Ye),n(()=>e(Ye).performed_by)))),i(c,w)};m(ue,c=>{e(Ye),n(()=>e(Ye).performed_by&&e(Ye).performed_by!=="System")&&c(g)})}a(Ne);var v=r(Ne,2),l=t(v,!0);a(v),a(He),p(()=>{d(we,(e(Ye),n(()=>e(Ye).icon))),d(ye,(e(Ye),n(()=>e(Ye).message))),d(l,(e(Ye),n(()=>e(Ye).timestamp)))}),i(Ee,He)});var Oe=r(Pe,2);{var We=Ee=>{var Ye=pd(),He=t(Ye),Fe=t(He);{var _e=Ne=>{var Re=ud();i(Ne,Re)},we=Ne=>{var Re=md();Ea(),i(Ne,Re)};m(Fe,Ne=>{e(b)?Ne(_e):Ne(we,!1)})}a(He),a(Ye),p(()=>He.disabled=e(b)),N("click",He,q),i(Ee,Ye)};m(Oe,Ee=>{e(te)&&!e(H)&&Ee(We)})}i(M,le)};m(ee,M=>{e(R),n(()=>e(R).length===0)?M(L):M(De,!1)},!0)}i($,Y)};m(he,$=>{e(O)?$(fe):$(E,!1)},!0)}i(X,C)};m(se,X=>{e(H)?X(Z):X(Ce,!1)})}a(oe),a(Le),a(J),p(()=>P.disabled=e(H)),N("click",P,()=>A(!1)),i(re,J),$t(),S()}var bd=o('<div class="selected-option"><span class="material-symbols-outlined option-icon"> </span> <div class="option-content"><span class="option-name"> </span> <span class="option-description"> </span></div></div>'),hd=o('<span class="placeholder">Select account type</span>'),yd=o('<button type="button"><span class="material-symbols-outlined option-icon"> </span> <div class="option-content"><span class="option-name"> </span> <span class="option-description"> </span></div></button>'),wd=o('<div class="selected-option"><span class="material-symbols-outlined option-icon"> </span> <div class="option-content"><span class="option-name"> </span></div></div>'),Sd=o('<span class="placeholder">Select gender</span>'),xd=o('<button type="button"><span class="material-symbols-outlined option-icon"> </span> <div class="option-content"><span class="option-name"> </span></div></button>'),kd=o('<div class="selected-option"><span class="material-symbols-outlined option-icon"> </span> <div class="option-content"><span class="option-name"> </span></div></div>'),Dd=o('<span class="placeholder">Select grade level</span>'),Td=o('<button type="button"><span class="material-symbols-outlined option-icon"> </span> <div class="option-content"><span class="option-name"> </span></div></button>'),Ad=o('<div class="form-group"><label class="form-label" for="grade-level">Grade Level *</label> <div><button type="button" id="grade-level"><!> <span class="material-symbols-outlined dropdown-arrow">expand_more</span></button> <div class="dropdown-menu"></div></div></div>'),jd=o('<div class="form-group"><label class="form-label" for="email">Email Address *</label> <input type="email" id="email" class="form-input" placeholder="Enter email address" required/></div>'),Cd=o(`<div class="additional-info-section"><h3 class="section-subtitle">Additional Information</h3> <p class="section-description">Required information for student accounts</p> <div class="form-row"><div class="form-group"><label class="form-label" for="birthdate">Birthdate *</label> <input type="date" id="birthdate" class="form-input" required/></div> <div class="form-group"><label class="form-label" for="age">Age</label> <input type="number" id="age" class="form-input age-display" readonly="" placeholder="Auto-calculated"/></div></div> <div class="form-group"><label class="form-label" for="address">Address *</label> <textarea id="address" class="form-input form-textarea" placeholder="Enter complete address" rows="3" required></textarea></div> <div class="form-row"><div class="form-group"><label class="form-label" for="guardian">Guardian/Parent Name *</label> <input type="text" id="guardian" class="form-input" placeholder="Enter guardian/parent name" required/></div> <div class="form-group"><label class="form-label" for="contact-number">Guardian's Contact Number *</label> <input type="tel" id="contact-number" class="form-input" placeholder="09xxxxxxxxxx" maxlength="11" required/></div></div></div>`),Nd=o('<span class="auto-number"> </span> <span class="auto-label">(Auto-generated)</span>',1),$d=o('<span class="placeholder-number">Select account type first</span>'),qd=o('<span class="material-symbols-outlined">person_add</span> Create Account',1),Ld=o('<button type="button" class="clear-search-button"><span class="material-symbols-outlined">close</span></button>'),Ed=o('<div class="selected-option"><span class="material-symbols-outlined option-icon"> </span> <div class="option-content"><span class="option-name"> </span></div></div>'),Fd=o('<span class="placeholder">Filter by type</span>'),Md=o('<button type="button"><span class="material-symbols-outlined option-icon"> </span> <div class="option-content"><span class="option-name"> </span></div></button>'),Gd=o('<div class="loading-container"><span class="account-loader"></span> <p class="loading-text">Loading accounts...</p></div>'),Id=o('<div class="account-detail-item"><span class="material-symbols-outlined">school</span> <span> </span></div>'),Pd=o('<div class="account-detail-item"><span class="material-symbols-outlined">cake</span> <span> </span></div>'),Rd=o('<div class="account-detail-item"><span class="material-symbols-outlined">family_restroom</span> <span> </span></div>'),Od=o('<div class="account-detail-item"><span class="material-symbols-outlined">phone</span> <span> </span></div>'),Ud=o('<div class="selected-option"><span class="material-symbols-outlined option-icon"> </span> <div class="option-content"><span class="option-name"> </span></div></div>'),Wd=o('<span class="placeholder">Select grade level</span>'),Yd=o('<button type="button"><span class="material-symbols-outlined option-icon"> </span> <div class="option-content"><span class="option-name"> </span></div></button>'),Qd=o(`<div class="form-group"><label class="form-label">Grade Level</label> <div><button type="button"><!> <span class="material-symbols-outlined dropdown-arrow">expand_more</span></button> <div class="dropdown-menu"></div></div></div> <div class="additional-info-section"><h4 class="section-subtitle">Additional Information</h4> <p class="section-description">Update student additional information</p> <div class="form-row"><div class="form-group"><label class="form-label">Birthdate *</label> <input type="date" class="form-input" required/></div> <div class="form-group"><label class="form-label">Age</label> <input type="number" class="form-input age-display" readonly="" placeholder="Auto-calculated"/></div></div> <div class="form-group"><label class="form-label">Address *</label> <textarea class="form-input form-textarea" placeholder="Enter complete address" rows="3" required></textarea></div> <div class="form-row"><div class="form-group"><label class="form-label">Guardian/Parent Name *</label> <input type="text" class="form-input" placeholder="Enter guardian/parent name" required/></div> <div class="form-group"><label class="form-label">Guardian's Contact Number *</label> <input type="tel" class="form-input" placeholder="09xxxxxxxxxx" maxlength="11" required/></div></div></div>`,1),Vd=o('<div class="edit-form-section"><div class="edit-form-container"><div class="edit-form-header"><h4 class="edit-form-title">Edit Account Information</h4> <p class="edit-form-subtitle">Update the name information for this account</p></div> <form class="edit-form-content"><div class="edit-name-fields-row"><div class="form-group"><label class="form-label">Last Name *</label> <input type="text" class="form-input" placeholder="Enter last name" required/></div> <div class="form-group"><label class="form-label">First Name *</label> <input type="text" class="form-input" placeholder="Enter first name" required/></div> <div class="form-group"><label class="form-label">M.I.</label> <input type="text" class="form-input" placeholder="M" maxlength="1"/></div></div> <!> <div class="edit-form-actions"><a><button type="button" class="account-cancel-button">Cancel</button></a> <button type="submit"><!></button></div></form></div></div>'),Jd=o('<div class="account-card"><div class="account-card-header"><div class="account-title"><h3 class="account-name"> </h3></div> <div class="account-action-buttons"><a><button type="button" class="account-edit-button"><span class="material-symbols-outlined"> </span></button></a> <button type="button" class="account-remove-button" title="Remove Account"><span class="material-symbols-outlined">delete</span></button></div></div> <div class="account-details"><div class="account-detail-item"><span class="material-symbols-outlined"> </span> <span> </span></div> <div class="account-detail-item"><span class="material-symbols-outlined">badge</span> <span> </span></div> <!> <!> <!> <!> <div class="account-detail-item"><span class="material-symbols-outlined">calendar_today</span> <span> </span></div> <div class="account-detail-item"><span class="material-symbols-outlined">update</span> <span> </span></div></div> <!></div>'),Hd=o('<button type="button" class="clear-search-button-inline">Clear search</button>'),Bd=o('<div class="no-results"><span class="material-symbols-outlined no-results-icon"> </span> <p><!></p> <!></div>'),zd=o('<div class="load-more-accounts-spinner"></div>'),Zd=o('<span class="material-symbols-outlined">expand_more</span> Load More Accounts',1),Kd=o('<div class="load-more-accounts-container"><button class="load-more-accounts-button"><!></button></div>'),Xd=o('<div class="account-creation-container"><div class="account-header"><div class="header-content"><h1 class="page-title">Account Creation</h1> <p class="page-subtitle">Create new student, teacher, and admin accounts for the system</p></div></div> <div class="creation-form-section"><div class="account-section-header"><h2 class="section-title">Create New Account</h2> <p class="section-subtitle">Fill in the details below to create a new account</p></div> <div class="form-container"><form><div class="account-type-gender-row"><div class="form-group"><label class="form-label" for="account-type">Account Type *</label> <div><button type="button" id="account-type"><!> <span class="material-symbols-outlined dropdown-arrow">expand_more</span></button> <div class="dropdown-menu"></div></div></div> <div class="form-group"><label class="form-label" for="gender">Gender *</label> <div><button type="button" id="gender"><!> <span class="material-symbols-outlined dropdown-arrow">expand_more</span></button> <div class="dropdown-menu"></div></div></div> <!></div> <div class="name-fields-row"><div class="form-group"><label class="form-label" for="last-name">Last Name *</label> <input type="text" id="last-name" class="form-input" placeholder="Enter last name" required/></div> <div class="form-group"><label class="form-label" for="first-name">First Name *</label> <input type="text" id="first-name" class="form-input" placeholder="Enter first name" required/></div> <div class="form-group"><label class="form-label" for="middle-initial">M.I.</label> <input type="text" id="middle-initial" class="form-input" placeholder="M" maxlength="1"/></div></div> <!> <!> <div class="form-group"><div class="form-label"> </div> <div class="number-display"><!></div> <p class="form-help">Account number will be automatically assigned. Password will be set to the same as the account number.</p></div> <div class="form-actions"><button type="submit"><!></button></div></form></div></div> <div class="recent-accounts-section"><div class="account-section-header"><div class="section-header-content"><div class="section-title-group"><h2 class="section-title">Recent Account Creations</h2> <p class="section-subtitle">Recently created accounts in the system</p></div> <div class="search-filter-container"><div class="search-container"><div class="search-input-wrapper"><span class="material-symbols-outlined search-icon">search</span> <input type="text" class="search-input" placeholder="Search accounts by name or number..."/> <!></div></div> <div class="filter-container"><div><button type="button"><!> <span class="material-symbols-outlined dropdown-arrow">expand_more</span></button> <div class="dropdown-menu"></div></div></div></div></div></div> <div class="accounts-grid"><!> <!></div></div></div>');function ec(re,_){Nt(_,!1);const[f,S]=Rs(),T=()=>Is(Es,"$authStore",f),D=u(),y=u(),h=u(),R=u(),H=u(),O=u(),te=u();let me=u(!1),b=u(""),W=u(""),A=u(""),q=u(""),J=u(""),x=u(""),F=u(""),ve=u(""),K=u(""),Le=u(""),ge=u(""),P=u(0),oe=u(!1),se=u(!1),Z=u(!1),Ce=u(!1),X=u("all"),C=u(null),he=u(""),fe=u(""),E=u(""),$=u(""),Y=u(!1),ee=u(!1),L=u(""),De=u(""),M=u(""),le=u(""),Pe=u(0);function Oe(k){return k&&k.charAt(0).toUpperCase()+k.slice(1).toLowerCase()}function We(k,de,Ge=!1){const ia=k.target.value,ne=de==="middleInitial"?ia.toUpperCase():Oe(ia);Ge?de==="firstName"?s(he,ne):de==="lastName"?s(fe,ne):de==="middleInitial"&&s(E,ne):de==="firstName"?s(q,ne):de==="lastName"?s(J,ne):de==="middleInitial"&&s(x,ne),k.target.value=ne}function Ee(k){if(!k)return!1;const de=k.replace(/\D/g,"");return de.startsWith("09")&&de.length===11}function Ye(k){return k.replace(/\D/g,"").slice(0,11)}function He(k,de=!1){const Ge=Ye(k.target.value);de?s(le,Ge):s(ge,Ge),k.target.value=Ge}function Fe(k){if(!k||k.length<10)return!0;const de=new Date(k),Ge=de.getFullYear(),ia=new Date().getFullYear();return!(isNaN(de.getTime())||Ge<1900||Ge>ia+10)}let _e=u("");const we=[{id:"student",name:"Student Account",description:"Create a new student account",icon:"school"},{id:"teacher",name:"Teacher Account",description:"Create a new teacher account",icon:"person"},{id:"admin",name:"Admin Account",description:"Create a new admin account",icon:"admin_panel_settings"}],Ne=[{id:"all",name:"All Accounts",icon:"group"},{id:"student",name:"Students",icon:"school"},{id:"teacher",name:"Teachers",icon:"person"},{id:"admin",name:"Admins",icon:"admin_panel_settings"}],Re=[{id:"male",name:"Male",icon:"male"},{id:"female",name:"Female",icon:"female"}],ye=[{id:"7",name:"Grade 7",icon:"looks_one"},{id:"8",name:"Grade 8",icon:"looks_two"},{id:"9",name:"Grade 9",icon:"looks_3"},{id:"10",name:"Grade 10",icon:"looks_4"}];let ue=u([]),g=u(!1),v=5,l=u(!0),c=u(!1);function w(k){k.target.closest(".custom-dropdown")||(s(oe,!1),s(se,!1),s(Z,!1),s(Y,!1),s(Ce,!1))}async function G(k){const de=T().userData;if(de&&de.accountNumber===k.number){qe.error("You cannot delete your own account while logged in.");return}ms.confirm("Remove Account",`<p>Are you sure you want to remove the account for <strong>"${k.name}"</strong>?</p>`,async()=>{try{const Ge=await ut.delete("/api/accounts",{id:k.id});if(!Ge.success)throw new Error(Ge.message||"Failed to delete account");s(ue,e(ue).filter(ia=>ia.id!==k.id)),qe.success(`Account for "${k.name}" has been removed successfully`)}catch(Ge){console.error("Error deleting account:",Ge),qe.error(`Failed to delete account: ${Ge.message}`)}},()=>{},{size:"small"})}function ce(k){if(e(C)===k.id)s(C,null),s(he,""),s(fe,""),s(E,""),s($,""),s(L,""),s(De,""),s(M,""),s(le,""),s(Pe,0),s(Y,!1);else if(s(C,k.id),k.firstName&&k.lastName){if(s(he,k.firstName),s(fe,k.lastName),s(E,k.middleInitial||""),s($,k.gradeLevel||""),k.birthdate){const de=new Date(k.birthdate),Ge=de.getFullYear(),ia=String(de.getMonth()+1).padStart(2,"0"),ne=String(de.getDate()).padStart(2,"0");s(L,`${Ge}-${ia}-${ne}`)}else s(L,"");s(De,k.address||""),s(M,k.guardian||""),s(le,k.contactNumber||"")}else{const de=k.name.split(", ");if(de.length>=2){s(fe,de[0]);const ia=de[1].split(" ");s(he,ia[0]),ia.length>1&&ia[1].endsWith(".")?s(E,ia[1].replace(".","")):s(E,"")}if(s($,k.gradeLevel||""),k.birthdate){const Ge=new Date(k.birthdate),ia=Ge.getFullYear(),ne=String(Ge.getMonth()+1).padStart(2,"0"),Qe=String(Ge.getDate()).padStart(2,"0");s(L,`${ia}-${ne}-${Qe}`)}else s(L,"");s(De,k.address||""),s(M,k.guardian||""),s(le,k.contactNumber||"")}}async function Ae(){if(!e(he)||!e(fe)){qe.error("Please fill in all required fields.");return}if(e(D)&&e(D).type.toLowerCase()==="student"){if(!e(L)||!e(De)||!e(M)||!e(le)){qe.error("Please fill in all required student information fields.");return}if(!Ee(e(le))){qe.error("Invalid contact number.");return}}s(ee,!0);try{const k={id:e(C),firstName:e(he).trim(),lastName:e(fe).trim(),middleInitial:e(E)?e(E).trim():null};e(D)&&e(D).type.toLowerCase()==="student"&&(k.gradeLevel=e($)||null,k.birthdate=e(L)||null,k.address=e(De)?e(De).trim():null,k.guardian=e(M)?e(M).trim():null,k.contactNumber=e(le)?e(le).trim():null);const de=await ut.put("/api/accounts",k);de.success?(s(ue,e(ue).map(Ge=>Ge.id===e(C)?de.account:Ge)),qe.success(de.message),s(C,null),s(he,""),s(fe,""),s(E,""),s($,""),s(L,""),s(De,""),s(M,""),s(le,""),s(Pe,0)):qe.error(de.error||"Failed to update account")}catch(k){console.error("Error updating account:",k),qe.error("Failed to update account. Please try again.")}finally{s(ee,!1)}}function ke(){s(oe,!e(oe))}function I(k){s(b,k.id),s(oe,!1),k.id!=="student"&&s(A,"")}function Se(){s(se,!e(se))}function xe(k){s(W,k.id),s(se,!1)}function ze(){s(Z,!e(Z))}function sa(k){s(A,k.id),s(Z,!1)}function va(){s(Y,!e(Y))}function La(k){s($,k.id),s(Y,!1)}function ae(){s(Ce,!e(Ce))}function U(k){s(X,k.id),s(Ce,!1)}async function Q(){if(!e(b)||!e(W)||!e(q)||!e(J)){qe.error("Please fill in all required fields.");return}if((e(b)==="student"||e(b)==="teacher")&&!e(F)){qe.error("Please enter an email address.");return}if(e(b)==="student"&&!e(A)){qe.error("Please select a grade level for the student account.");return}if(e(b)==="student"){if(!e(ve)||!e(K)||!e(Le)||!e(ge)){qe.error("Please fill in all additional information fields for the student account.");return}if(!Ee(e(ge))){qe.error("Invalid contact number.");return}}s(me,!0);try{const k=T().userData,de=await ut.post("/api/accounts",{accountType:e(b),gender:e(W),gradeLevel:e(A),firstName:e(q),lastName:e(J),middleInitial:e(x),email:e(F),birthdate:e(b)==="student"?e(ve):null,address:e(b)==="student"?e(K):null,guardian:e(b)==="student"?e(Le):null,contactNumber:e(b)==="student"?e(ge):null,createdBy:k?k.id:null});if(!de.success)throw new Error(de.message||"Failed to create account");s(ue,[de.account,...e(ue)]);const Ge=e(b)==="student"?"Student":e(b)==="teacher"?"Teacher":"Admin";qe.success(`${Ge} account created successfully for ${de.account.name}! Password is the same as account number: ${de.account.number}`),s(b,""),s(W,""),s(A,""),s(q,""),s(J,""),s(x,""),s(F,""),s(ve,""),s(K,""),s(Le,""),s(ge,""),s(P,0)}catch(k){console.error("Error creating account:",k),qe.error(k.message||"Failed to create account. Please try again.")}finally{s(me,!1)}}function Ue(k){const de=k==="student"?"STU":k==="teacher"?"TCH":"ADM",Ge=e(ue).filter(Qe=>Qe.number&&Qe.number.startsWith(de));if(Ge.length===0)return`${de}-2025-0001`;const ia=Ge.map(Qe=>{const Xe=Qe.number.match(/-([0-9]+)$/);return Xe?parseInt(Xe[1]):0}),ne=Math.max(...ia)+1;return`${de}-2025-${ne.toString().padStart(4,"0")}`}async function ra(){s(g,!0);try{const k=await ut.get(`/api/accounts?limit=${v}`);if(!k.success)throw new Error("Failed to load accounts");s(ue,k.accounts),s(l,k.accounts.length===v)}catch(k){console.error("Error loading accounts:",k),qe.error("Failed to load existing accounts")}finally{s(g,!1)}}async function ca(){try{s(c,!0);const k=v+10,de=await ut.get(`/api/accounts?limit=${k}`);if(de.success)s(ue,de.accounts),v=k,s(l,de.accounts.length===k);else throw new Error(de.error||"Failed to load more accounts")}catch(k){console.error("Error loading more accounts:",k),qe.error("Failed to load more accounts")}finally{s(c,!1)}}Bt(()=>{ra()}),Na(()=>(e(C),e(ue)),()=>{s(D,e(C)?e(ue).find(k=>k.id===e(C)):null)}),Na(()=>e(b),()=>{s(y,we.find(k=>k.id===e(b)))}),Na(()=>e(W),()=>{s(h,Re.find(k=>k.id===e(W)))}),Na(()=>e(A),()=>{s(R,ye.find(k=>k.id===e(A)))}),Na(()=>e(X),()=>{s(H,Ne.find(k=>k.id===e(X)))}),Na(()=>e($),()=>{s(O,ye.find(k=>k.id===e($)))}),Na(()=>e(ve),()=>{if(e(ve)){const k=new Date(e(ve)),de=new Date;let Ge=de.getFullYear()-k.getFullYear();const ia=de.getMonth()-k.getMonth();(ia<0||ia===0&&de.getDate()<k.getDate())&&Ge--,s(P,Ge>=0?Ge:0)}else s(P,0)}),Na(()=>e(L),()=>{if(e(L)){const k=new Date(e(L)),de=new Date;let Ge=de.getFullYear()-k.getFullYear();const ia=de.getMonth()-k.getMonth();(ia<0||ia===0&&de.getDate()<k.getDate())&&Ge--,s(Pe,Ge>=0?Ge:0)}else s(Pe,0)}),Na(()=>(e(ue),e(X),e(_e)),()=>{s(te,e(ue).filter(k=>{const de=k.type.toLowerCase(),Ge=e(X)==="all"||de===e(X);if(!e(_e).trim())return Ge;const ia=e(_e).toLowerCase().trim(),ne=k.name.toLowerCase().includes(ia),Qe=k.number.toString().includes(ia);return Ge&&(ne||Qe)}))}),ns(),os();var oa=Xd();N("click",Ps,w);var _a=r(t(oa),2),ha=r(t(_a),2),fa=t(ha),Oa=t(fa),Ba=t(Oa),tt=r(t(Ba),2);let it;var mt=t(tt);let st;var V=t(mt);{var be=k=>{var de=bd(),Ge=t(de),ia=t(Ge,!0);a(Ge);var ne=r(Ge,2),Qe=t(ne),Xe=t(Qe,!0);a(Qe);var Ga=r(Qe,2),vt=t(Ga,!0);a(Ga),a(ne),a(de),p(()=>{d(ia,(e(y),n(()=>e(y).icon))),d(Xe,(e(y),n(()=>e(y).name))),d(vt,(e(y),n(()=>e(y).description)))}),i(k,de)},Je=k=>{var de=hd();i(k,de)};m(V,k=>{e(y)?k(be):k(Je,!1)})}Ea(2),a(mt);var ga=r(mt,2);ea(ga,5,()=>we,k=>k.id,(k,de)=>{var Ge=yd();let ia;var ne=t(Ge),Qe=t(ne,!0);a(ne);var Xe=r(ne,2),Ga=t(Xe),vt=t(Ga,!0);a(Ga);var _t=r(Ga,2),da=t(_t,!0);a(_t),a(Xe),a(Ge),p(ba=>{ia=B(Ge,1,"dropdown-option",null,ia,ba),d(Qe,(e(de),n(()=>e(de).icon))),d(vt,(e(de),n(()=>e(de).name))),d(da,(e(de),n(()=>e(de).description)))},[()=>({selected:e(b)===e(de).id})]),N("click",Ge,()=>I(e(de))),i(k,Ge)}),a(ga),a(tt),a(Ba);var qa=r(Ba,2),aa=r(t(qa),2);let Ke;var ie=t(aa);let Me;var j=t(ie);{var $e=k=>{var de=wd(),Ge=t(de),ia=t(Ge,!0);a(Ge);var ne=r(Ge,2),Qe=t(ne),Xe=t(Qe,!0);a(Qe),a(ne),a(de),p(()=>{d(ia,(e(h),n(()=>e(h).icon))),d(Xe,(e(h),n(()=>e(h).name)))}),i(k,de)},Ie=k=>{var de=Sd();i(k,de)};m(j,k=>{e(h)?k($e):k(Ie,!1)})}Ea(2),a(ie);var Ve=r(ie,2);ea(Ve,5,()=>Re,k=>k.id,(k,de)=>{var Ge=xd();let ia;var ne=t(Ge),Qe=t(ne,!0);a(ne);var Xe=r(ne,2),Ga=t(Xe),vt=t(Ga,!0);a(Ga),a(Xe),a(Ge),p(_t=>{ia=B(Ge,1,"dropdown-option",null,ia,_t),d(Qe,(e(de),n(()=>e(de).icon))),d(vt,(e(de),n(()=>e(de).name)))},[()=>({selected:e(W)===e(de).id})]),N("click",Ge,()=>xe(e(de))),i(k,Ge)}),a(Ve),a(aa),a(qa);var pe=r(qa,2);{var je=k=>{var de=Ad(),Ge=r(t(de),2);let ia;var ne=t(Ge);let Qe;var Xe=t(ne);{var Ga=da=>{var ba=kd(),nt=t(ba),Ka=t(nt,!0);a(nt);var Ma=r(nt,2),ot=t(Ma),xt=t(ot,!0);a(ot),a(Ma),a(ba),p(()=>{d(Ka,(e(R),n(()=>e(R).icon))),d(xt,(e(R),n(()=>e(R).name)))}),i(da,ba)},vt=da=>{var ba=Dd();i(da,ba)};m(Xe,da=>{e(R)?da(Ga):da(vt,!1)})}Ea(2),a(ne);var _t=r(ne,2);ea(_t,5,()=>ye,da=>da.id,(da,ba)=>{var nt=Td();let Ka;var Ma=t(nt),ot=t(Ma,!0);a(Ma);var xt=r(Ma,2),Va=t(xt),ft=t(Va,!0);a(Va),a(xt),a(nt),p(Lt=>{Ka=B(nt,1,"dropdown-option",null,Ka,Lt),d(ot,(e(ba),n(()=>e(ba).icon))),d(ft,(e(ba),n(()=>e(ba).name)))},[()=>({selected:e(A)===e(ba).id})]),N("click",nt,()=>sa(e(ba))),i(da,nt)}),a(_t),a(Ge),a(de),p((da,ba)=>{ia=B(Ge,1,"custom-dropdown",null,ia,da),Qe=B(ne,1,"dropdown-trigger",null,Qe,ba)},[()=>({open:e(Z)}),()=>({selected:e(A)})]),N("click",ne,ze),i(k,de)};m(pe,k=>{e(b)==="student"&&k(je)})}a(Oa);var Ze=r(Oa,2),ua=t(Ze),wa=r(t(ua),2);ka(wa),a(ua);var ma=r(ua,2),Ra=r(t(ma),2);ka(Ra),a(ma);var za=r(ma,2),Wa=r(t(za),2);ka(Wa),a(za),a(Ze);var Xa=r(Ze,2);{var kt=k=>{var de=jd(),Ge=r(t(de),2);ka(Ge),a(de),Ta(Ge,()=>e(F),ia=>s(F,ia)),i(k,de)};m(Xa,k=>{(e(b)==="student"||e(b)==="teacher")&&k(kt)})}var Ft=r(Xa,2);{var Rt=k=>{var de=Cd(),Ge=r(t(de),4),ia=t(Ge),ne=r(t(ia),2);ka(ne),a(ia);var Qe=r(ia,2),Xe=r(t(Qe),2);ka(Xe),a(Qe),a(Ge);var Ga=r(Ge,2),vt=r(t(Ga),2);Sr(vt),a(Ga);var _t=r(Ga,2),da=t(_t),ba=r(t(da),2);ka(ba),a(da);var nt=r(da,2),Ka=r(t(nt),2);ka(Ka),a(nt),a(_t),a(de),p(()=>xr(Xe,e(P))),Ta(ne,()=>e(ve),Ma=>s(ve,Ma)),N("blur",ne,Ma=>{e(ve)&&!Fe(e(ve))&&(qe.error("Invalid date. Please enter a valid date."),s(ve,""),Ma.target.value="")}),Ta(vt,()=>e(K),Ma=>s(K,Ma)),Ta(ba,()=>e(Le),Ma=>s(Le,Ma)),Ta(Ka,()=>e(ge),Ma=>s(ge,Ma)),N("input",Ka,Ma=>He(Ma,!1)),i(k,de)};m(Ft,k=>{e(b)==="student"&&k(Rt)})}var pt=r(Ft,2),Tt=t(pt),Aa=t(Tt,!0);a(Tt);var pa=r(Tt,2),ja=t(pa);{var Za=k=>{var de=Nd(),Ge=na(de),ia=t(Ge,!0);a(Ge),Ea(2),p(ne=>d(ia,ne),[()=>(e(b),n(()=>Ue(e(b))))]),i(k,de)},$a=k=>{var de=$d();i(k,de)};m(ja,k=>{e(b)?k(Za):k($a,!1)})}a(pa),Ea(2),a(pt);var Sa=r(pt,2),bt=t(Sa);let Dt;var qt=t(bt);{var Mt=k=>{var de=wt("Creating Account...");i(k,de)},as=k=>{var de=qd();Ea(),i(k,de)};m(qt,k=>{e(me)?k(Mt):k(as,!1)})}a(bt),a(Sa),a(fa),a(ha),a(_a);var Yt=r(_a,2),zt=t(Yt),ss=t(zt),z=r(t(ss),2),Te=t(z),Be=t(Te),Ca=r(t(Be),2);ka(Ca);var Ya=r(Ca,2);{var Da=k=>{var de=Ld();N("click",de,()=>s(_e,"")),i(k,de)};m(Ya,k=>{e(_e)&&k(Da)})}a(Be),a(Te);var ta=r(Te,2),ct=t(ta);let lt;var Fa=t(ct);let dt;var ht=t(Fa);{var It=k=>{var de=Ed(),Ge=t(de),ia=t(Ge,!0);a(Ge);var ne=r(Ge,2),Qe=t(ne),Xe=t(Qe,!0);a(Qe),a(ne),a(de),p(()=>{d(ia,(e(H),n(()=>e(H).icon))),d(Xe,(e(H),n(()=>e(H).name)))}),i(k,de)},Ia=k=>{var de=Fd();i(k,de)};m(ht,k=>{e(H)?k(It):k(Ia,!1)})}Ea(2),a(Fa);var Pa=r(Fa,2);ea(Pa,5,()=>Ne,k=>k.id,(k,de)=>{var Ge=Md();let ia;var ne=t(Ge),Qe=t(ne,!0);a(ne);var Xe=r(ne,2),Ga=t(Xe),vt=t(Ga,!0);a(Ga),a(Xe),a(Ge),p(_t=>{ia=B(Ge,1,"dropdown-option",null,ia,_t),d(Qe,(e(de),n(()=>e(de).icon))),d(vt,(e(de),n(()=>e(de).name)))},[()=>({selected:e(X)===e(de).id})]),N("click",Ge,()=>U(e(de))),i(k,Ge)}),a(Pa),a(ct),a(ta),a(z),a(ss),a(zt);var Qa=r(zt,2),Ua=t(Qa);{var et=k=>{var de=Gd();i(k,de)},yt=k=>{var de=ya(),Ge=na(de);ea(Ge,1,()=>e(te),ia=>ia.id,(ia,ne)=>{var Qe=Jd(),Xe=t(Qe),Ga=t(Xe),vt=t(Ga),_t=t(vt);a(vt),a(Ga);var da=r(Ga,2),ba=t(da),nt=t(ba),Ka=t(nt),Ma=t(Ka,!0);a(Ka),a(nt),a(ba);var ot=r(ba,2);a(da),a(Xe);var xt=r(Xe,2),Va=t(xt),ft=t(Va),Lt=t(ft,!0);a(ft);var Zt=r(ft,2),xs=t(Zt,!0);a(Zt),a(Va);var ps=r(Va,2),$s=r(t(ps),2),Fs=t($s);a($s),a(ps);var ks=r(ps,2);{var Ja=Gt=>{var Et=Id(),Kt=r(t(Et),2),ts=t(Kt);a(Kt),a(Et),p(()=>d(ts,`Grade ${e(ne),n(()=>e(ne).gradeLevel)??""}`)),i(Gt,Et)};m(ks,Gt=>{e(ne),n(()=>e(ne).type==="Student"&&e(ne).gradeLevel)&&Gt(Ja)})}var at=r(ks,2);{var St=Gt=>{var Et=Pd(),Kt=r(t(Et),2),ts=t(Kt);a(Kt),a(Et),p(()=>d(ts,`Age: ${e(ne),n(()=>e(ne).age)??""}`)),i(Gt,Et)};m(at,Gt=>{e(ne),n(()=>e(ne).type==="Student"&&e(ne).age)&&Gt(St)})}var Qt=r(at,2);{var Ht=Gt=>{var Et=Rd(),Kt=r(t(Et),2),ts=t(Kt);a(Kt),a(Et),p(()=>d(ts,`Guardian: ${e(ne),n(()=>e(ne).guardian)??""}`)),i(Gt,Et)};m(Qt,Gt=>{e(ne),n(()=>e(ne).type==="Student"&&e(ne).guardian)&&Gt(Ht)})}var Vt=r(Qt,2);{var Xt=Gt=>{var Et=Od(),Kt=r(t(Et),2),ts=t(Kt);a(Kt),a(Et),p(()=>d(ts,`Contact: ${e(ne),n(()=>e(ne).contactNumber)??""}`)),i(Gt,Et)};m(Vt,Gt=>{e(ne),n(()=>e(ne).type==="Student"&&e(ne).contactNumber)&&Gt(Xt)})}var es=r(Vt,2),Pt=r(t(es),2),hs=t(Pt);a(Pt),a(es);var cs=r(es,2),_s=r(t(cs),2),Ot=t(_s);a(_s),a(cs),a(xt);var rs=r(xt,2);{var Ds=Gt=>{var Et=Vd(),Kt=t(Et),ts=r(t(Kt),2),Hs=t(ts),Us=t(Hs),tr=t(Us),Bs=r(tr,2);ka(Bs),a(Us);var Ws=r(Us,2),ur=t(Ws),Ys=r(ur,2);ka(Ys),a(Ws);var sr=r(Ws,2),mr=t(sr),zs=r(mr,2);ka(zs),a(sr),a(Hs);var pr=r(Hs,2);{var kr=Ha=>{var Ut=Qd(),is=na(Ut),ys=t(is),fs=r(ys,2);let ls;var gs=t(fs);let As;var nr=t(gs);{var js=Jt=>{var bs=Ud(),Ms=t(bs),br=t(Ms,!0);a(Ms);var Ks=r(Ms,2),hr=t(Ks),yr=t(hr,!0);a(hr),a(Ks),a(bs),p(()=>{d(br,(e(O),n(()=>e(O).icon))),d(yr,(e(O),n(()=>e(O).name)))}),i(Jt,bs)},or=Jt=>{var bs=Wd();i(Jt,bs)};m(nr,Jt=>{e(O)?Jt(js):Jt(or,!1)})}Ea(2),a(gs);var lr=r(gs,2);ea(lr,5,()=>ye,Jt=>Jt.id,(Jt,bs)=>{var Ms=Yd();let br;var Ks=t(Ms),hr=t(Ks,!0);a(Ks);var yr=r(Ks,2),Wr=t(yr),ei=t(Wr,!0);a(Wr),a(yr),a(Ms),p(ai=>{br=B(Ms,1,"dropdown-option",null,br,ai),d(hr,(e(bs),n(()=>e(bs).icon))),d(ei,(e(bs),n(()=>e(bs).name)))},[()=>({selected:e($)===e(bs).id})]),N("click",Ms,()=>La(e(bs))),i(Jt,Ms)}),a(lr),a(fs),a(is);var Er=r(is,2),Tr=r(t(Er),4),Ar=t(Tr),Fr=t(Ar),fr=r(Fr,2);ka(fr),a(Ar);var Mr=r(Ar,2),Gr=t(Mr),jr=r(Gr,2);ka(jr),a(Mr),a(Tr);var Cr=r(Tr,2),Ir=t(Cr),Nr=r(Ir,2);Sr(Nr),a(Cr);var Pr=r(Cr,2),$r=t(Pr),Rr=t($r),qr=r(Rr,2);ka(qr),a($r);var Or=r($r,2),Ur=t(Or),gr=r(Ur,2);ka(gr),a(Or),a(Pr),a(Er),p((Jt,bs)=>{la(ys,"for",`edit-grade-level-${e(ne),n(()=>e(ne).id)??""}`),ls=B(fs,1,"custom-dropdown",null,ls,Jt),As=B(gs,1,"dropdown-trigger",null,As,bs),la(gs,"id",`edit-grade-level-${e(ne),n(()=>e(ne).id)??""}`),la(Fr,"for",`edit-birthdate-${e(ne),n(()=>e(ne).id)??""}`),la(fr,"id",`edit-birthdate-${e(ne),n(()=>e(ne).id)??""}`),la(Gr,"for",`edit-age-${e(ne),n(()=>e(ne).id)??""}`),la(jr,"id",`edit-age-${e(ne),n(()=>e(ne).id)??""}`),xr(jr,e(Pe)),la(Ir,"for",`edit-address-${e(ne),n(()=>e(ne).id)??""}`),la(Nr,"id",`edit-address-${e(ne),n(()=>e(ne).id)??""}`),la(Rr,"for",`edit-guardian-${e(ne),n(()=>e(ne).id)??""}`),la(qr,"id",`edit-guardian-${e(ne),n(()=>e(ne).id)??""}`),la(Ur,"for",`edit-contact-number-${e(ne),n(()=>e(ne).id)??""}`),la(gr,"id",`edit-contact-number-${e(ne),n(()=>e(ne).id)??""}`)},[()=>({open:e(Y)}),()=>({selected:e($)})]),N("click",gs,va),Ta(fr,()=>e(L),Jt=>s(L,Jt)),N("blur",fr,Jt=>{e(L)&&!Fe(e(L))&&(qe.error("Invalid date. Please enter a valid date."),s(L,""),Jt.target.value="")}),Ta(Nr,()=>e(De),Jt=>s(De,Jt)),Ta(qr,()=>e(M),Jt=>s(M,Jt)),Ta(gr,()=>e(le),Jt=>s(le,Jt)),N("input",gr,Jt=>He(Jt,!0)),i(Ha,Ut)};m(pr,Ha=>{e(ne),n(()=>e(ne).type.toLowerCase()==="student")&&Ha(kr)})}var rr=r(pr,2),Qs=t(rr),ir=t(Qs);a(Qs);var Zs=r(Qs,2);let _r;var Dr=t(Zs);{var rt=Ha=>{var Ut=wt("Updating...");i(Ha,Ut)},gt=Ha=>{var Ut=wt("Update Account");i(Ha,Ut)};m(Dr,Ha=>{e(ee)?Ha(rt):Ha(gt,!1)})}a(Zs),a(rr),a(ts),a(Kt),a(Et),p((Ha,Ut)=>{la(tr,"for",`edit-last-name-${e(ne),n(()=>e(ne).id)??""}`),la(Bs,"id",`edit-last-name-${e(ne),n(()=>e(ne).id)??""}`),la(ur,"for",`edit-first-name-${e(ne),n(()=>e(ne).id)??""}`),la(Ys,"id",`edit-first-name-${e(ne),n(()=>e(ne).id)??""}`),la(mr,"for",`edit-middle-initial-${e(ne),n(()=>e(ne).id)??""}`),la(zs,"id",`edit-middle-initial-${e(ne),n(()=>e(ne).id)??""}`),la(Qs,"href",`#account-card-${e(ne),n(()=>e(ne).id)??""}`),_r=B(Zs,1,"account-submit-button",null,_r,Ha),Zs.disabled=Ut},[()=>({loading:e(ee)}),()=>(e(ee),e(he),e(fe),e(D),e(L),e(De),e(M),e(le),n(()=>e(ee)||!e(he)||!e(fe)||e(D)&&e(D).type.toLowerCase()==="student"&&(!e(L)||!e(De)||!e(M)||!e(le))))]),Ta(Bs,()=>e(fe),Ha=>s(fe,Ha)),N("input",Bs,Ha=>We(Ha,"lastName",!0)),Ta(Ys,()=>e(he),Ha=>s(he,Ha)),N("input",Ys,Ha=>We(Ha,"firstName",!0)),Ta(zs,()=>e(E),Ha=>s(E,Ha)),N("input",zs,Ha=>We(Ha,"middleInitial",!0)),N("click",ir,()=>ce(e(ne))),N("submit",ts,Ss(Ae)),i(Gt,Et)};m(rs,Gt=>{e(C),e(ne),n(()=>e(C)===e(ne).id)&&Gt(Ds)})}a(Qe),p(()=>{la(Qe,"id",`account-card-${e(ne),n(()=>e(ne).id)??""}`),d(_t,`${e(ne),n(()=>e(ne).name)??""} · ${e(ne),n(()=>e(ne).type)??""}`),la(ba,"href",`#account-card-${e(ne),n(()=>e(ne).id)??""}`),la(nt,"title",(e(C),e(ne),n(()=>e(C)===e(ne).id?"Cancel Edit":"Edit Account"))),d(Ma,(e(C),e(ne),n(()=>e(C)===e(ne).id?"close":"edit"))),d(Lt,(e(ne),n(()=>e(ne).type==="Student"?"school":e(ne).type==="Teacher"?"person":"admin_panel_settings"))),d(xs,(e(ne),n(()=>e(ne).number))),d(Fs,`${e(ne),n(()=>e(ne).type)??""} Account`),d(hs,`Created: ${e(ne),n(()=>e(ne).createdDate)??""}`),d(Ot,`Updated: ${e(ne),n(()=>e(ne).updatedDate)??""}`)}),N("click",nt,()=>ce(e(ne))),N("click",ot,()=>G(e(ne))),i(ia,Qe)},ia=>{var ne=Bd(),Qe=t(ne),Xe=t(Qe,!0);a(Qe);var Ga=r(Qe,2),vt=t(Ga);{var _t=Ka=>{var Ma=wt();p(()=>d(Ma,`No accounts found matching "${e(_e)??""}".`)),i(Ka,Ma)},da=Ka=>{var Ma=wt();p(ot=>d(Ma,`No ${ot??""} accounts found.`),[()=>(e(X),e(H),n(()=>e(X)==="all"?"":e(H)?.name.toLowerCase()||""))]),i(Ka,Ma)};m(vt,Ka=>{e(_e)?Ka(_t):Ka(da,!1)})}a(Ga);var ba=r(Ga,2);{var nt=Ka=>{var Ma=Hd();N("click",Ma,()=>s(_e,"")),i(Ka,Ma)};m(ba,Ka=>{e(_e)&&Ka(nt)})}a(ne),p(()=>d(Xe,e(_e)?"search_off":"person_off")),i(ia,ne)}),i(k,de)};m(Ua,k=>{e(g)?k(et):k(yt,!1)})}var At=r(Ua,2);{var jt=k=>{var de=Kd(),Ge=t(de),ia=t(Ge);{var ne=Xe=>{var Ga=zd();i(Xe,Ga)},Qe=Xe=>{var Ga=Zd();Ea(),i(Xe,Ga)};m(ia,Xe=>{e(c)?Xe(ne):Xe(Qe,!1)})}a(Ge),a(de),p(()=>Ge.disabled=e(c)),N("click",Ge,ca),i(k,de)};m(At,k=>{e(l),e(g),e(te),n(()=>e(l)&&!e(g)&&e(te).length>0)&&k(jt)})}a(Qa),a(Yt),a(oa),p((k,de,Ge,ia,ne,Qe,Xe)=>{it=B(tt,1,"custom-dropdown",null,it,k),st=B(mt,1,"dropdown-trigger",null,st,de),Ke=B(aa,1,"custom-dropdown",null,Ke,Ge),Me=B(ie,1,"dropdown-trigger",null,Me,ia),d(Aa,e(b)==="student"?"Student Number":e(b)==="teacher"?"Teacher Number":e(b)==="admin"?"Admin Number":"Account Number"),Dt=B(bt,1,"account-create-button",null,Dt,ne),bt.disabled=e(me)||!e(b)||!e(W)||!e(q)||!e(J)||(e(b)==="student"||e(b)==="teacher")&&!e(F)||e(b)==="student"&&(!e(ve)||!e(K)||!e(Le)||!e(ge)),lt=B(ct,1,"custom-dropdown",null,lt,Qe),dt=B(Fa,1,"dropdown-trigger filter-trigger",null,dt,Xe)},[()=>({open:e(oe)}),()=>({selected:e(b)}),()=>({open:e(se)}),()=>({selected:e(W)}),()=>({loading:e(me)}),()=>({open:e(Ce)}),()=>({selected:e(X)!=="all"})]),N("click",mt,ke),N("click",ie,Se),Ta(wa,()=>e(J),k=>s(J,k)),N("input",wa,k=>We(k,"lastName")),Ta(Ra,()=>e(q),k=>s(q,k)),N("input",Ra,k=>We(k,"firstName")),Ta(Wa,()=>e(x),k=>s(x,k)),N("input",Wa,k=>We(k,"middleInitial")),N("submit",fa,Ss(Q)),Ta(Ca,()=>e(_e),k=>s(_e,k)),N("click",Fa,ae),i(re,oa),$t(),S()}var ac=o('<button type="button" class="clear-search-button"><span class="material-symbols-outlined">close</span></button>'),tc=o('<div class="selected-option"><span class="material-symbols-outlined option-icon"> </span> <span class="option-name"> </span></div>'),sc=o('<span class="placeholder">All Grade Levels</span>'),rc=o('<button type="button"><span class="material-symbols-outlined option-icon"> </span> <div class="option-content"><span class="option-name"> </span></div></button>'),ic=o('<div class="selected-option"><span class="option-name"> </span></div>'),nc=o('<span class="placeholder">All Sections</span>'),oc=o('<button type="button"><div class="option-content"><span class="option-name"> </span></div></button>'),lc=o('<button type="button" class="clear-filters-button"><span class="material-symbols-outlined">filter_alt_off</span></button>'),dc=o('<div class="masterlist-loading-container"><span class="student-loader"></span> <p class="masterlist-loading-text">Loading students...</p></div>'),cc=o('<div class="account-detail-item"><span class="material-symbols-outlined">email</span> <span> </span></div>'),vc=o('<div class="account-detail-item"><span class="material-symbols-outlined">school</span> <span> </span></div>'),uc=o('<div class="account-detail-item"><span class="material-symbols-outlined">class</span> <span> </span></div>'),mc=o('<div class="account-detail-item"><span class="material-symbols-outlined">cake</span> <span> </span></div>'),pc=o('<div class="account-detail-item"><span class="material-symbols-outlined">family_restroom</span> <span> </span></div>'),_c=o('<div class="account-detail-item"><span class="material-symbols-outlined">phone</span> <span> </span></div>'),fc=o('<div class="account-detail-item"><span class="material-symbols-outlined">home</span> <span> </span></div>'),gc=o('<div class="account-detail-item"><span class="material-symbols-outlined">calendar_today</span> <span> </span></div>'),bc=o('<div class="account-card"><div class="account-card-header"><div class="account-title"><h3 class="account-name"><!> </h3></div> <div class="action-buttons"><button type="button" class="archive-button" title="Archive Student"><span class="material-symbols-outlined">archive</span></button></div></div> <div class="master-account-details"><!> <!> <!> <!> <!> <!> <!> <!></div></div>'),hc=o('<div class="students-grid"></div>'),yc=o('<button type="button" class="clear-search-button-inline">Clear</button>'),wc=o('<div class="no-results"><span class="material-symbols-outlined no-results-icon"> </span> <p><!></p> <!></div>'),Sc=o('<div class="student-masterlist-container"><div class="admin-student-header"><div class="header-content"><h1 class="page-title">Student Masterlist</h1> <p class="page-subtitle">View and manage all student records in the system</p></div></div> <div class="filters-section"><div class="search-filter-container"><div class="search-container"><div class="search-input-wrapper"><span class="material-symbols-outlined search-icon">search</span> <input type="text" class="search-input" placeholder="Search students by name, email, or ID..."/> <!></div></div> <div class="filter-container"><div class="filter-group"><label class="filter-label">Grade Level</label> <div><button type="button" class="dropdown-trigger filter-trigger"><!> <span class="material-symbols-outlined dropdown-arrow">expand_more</span></button> <div class="dropdown-menu"></div></div></div> <div class="filter-group"><label class="filter-label">Section</label> <div><button type="button" class="dropdown-trigger filter-trigger"><!> <span class="material-symbols-outlined dropdown-arrow">expand_more</span></button> <div class="dropdown-menu"></div></div></div> <!></div></div></div> <div class="students-list-section"><!></div></div>');function xc(re,_){Nt(_,!1);const f=u(),S=u();let T=[],D=u([]),y=u(!0),h=u(""),R=u(""),H=u(""),O=u(!1),te=u(!1);const me=[{id:"",name:"All Grade Levels",icon:"school"},{id:"7",name:"Grade 7",icon:"looks_one"},{id:"8",name:"Grade 8",icon:"looks_two"},{id:"9",name:"Grade 9",icon:"looks_3"},{id:"10",name:"Grade 10",icon:"looks_4"}],b=[{id:"",name:"All Sections"},{id:"section-a",name:"Section A"},{id:"section-b",name:"Section B"},{id:"section-c",name:"Section C"},{id:"section-d",name:"Section D"},{id:"section-e",name:"Section E"}];async function W(){s(y,!0);try{const l=await ut.get("/api/accounts?type=student");if(!l.success)throw new Error("Failed to load students");T=l.accounts.map(c=>({id:c.id,name:c.name,number:c.number,email:c.email,gradeLevel:c.gradeLevel||"Not specified",section:c.section||"Not specified",birthdate:c.birthdate||"Not specified",address:c.address||"Not specified",guardian:c.guardian||"Not specified",contactNumber:c.contactNumber||"Not specified",status:c.status||"active"})),A()}catch(l){console.error("Error loading students:",l),qe.error("Failed to load students. Please try again."),T=[]}finally{s(y,!1)}}function A(){s(D,T.filter(l=>{const c=!e(h)||l.name.toLowerCase().includes(e(h).toLowerCase())||l.email.toLowerCase().includes(e(h).toLowerCase())||l.number&&l.number.toLowerCase().includes(e(h).toLowerCase()),w=!e(R)||l.gradeLevel===e(R),G=!e(H)||l.section===e(H);return c&&w&&G}))}function q(){s(O,!e(O)),s(te,!1)}function J(){s(te,!e(te)),s(O,!1)}function x(l){s(R,l.id),s(O,!1),A()}function F(l){s(H,l.id),s(te,!1),A()}function ve(l){if(!l)return"N/A";const c=new Date,w=new Date(l);let G=c.getFullYear()-w.getFullYear();const ce=c.getMonth()-w.getMonth();return(ce<0||ce===0&&c.getDate()<w.getDate())&&G--,G}function K(l){return l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}function Le(){s(h,""),s(R,""),s(H,""),A()}function ge(l){l.target.closest(".custom-dropdown")||(s(O,!1),s(te,!1))}async function P(l,c){try{const w=await ut.patch("/api/accounts",{id:l,action:"archive"});w.success?(qe.success(w.message),await W()):qe.error(w.message||"Failed to archive student")}catch(w){console.error("Error archiving student:",w),qe.error("Failed to archive student. Please try again.")}}Bt(()=>(W(),document.addEventListener("click",ge),()=>{document.removeEventListener("click",ge)})),Na(()=>e(R),()=>{s(f,me.find(l=>l.id===e(R)))}),Na(()=>e(H),()=>{s(S,b.find(l=>l.id===e(H)))}),Na(()=>e(h),()=>{e(h)!==void 0&&A()}),ns(),os();var oe=Sc(),se=r(t(oe),2),Z=t(se),Ce=t(Z),X=t(Ce),C=r(t(X),2);ka(C);var he=r(C,2);{var fe=l=>{var c=ac();N("click",c,()=>s(h,"")),i(l,c)};m(he,l=>{e(h)&&l(fe)})}a(X),a(Ce);var E=r(Ce,2),$=t(E),Y=r(t($),2);let ee;var L=t(Y),De=t(L);{var M=l=>{var c=tc(),w=t(c),G=t(w,!0);a(w);var ce=r(w,2),Ae=t(ce,!0);a(ce),a(c),p(()=>{d(G,(e(f),n(()=>e(f).icon))),d(Ae,(e(f),n(()=>e(f).name)))}),i(l,c)},le=l=>{var c=sc();i(l,c)};m(De,l=>{e(f)&&e(R)?l(M):l(le,!1)})}Ea(2),a(L);var Pe=r(L,2);ea(Pe,5,()=>me,l=>l.id,(l,c)=>{var w=rc();let G;var ce=t(w),Ae=t(ce,!0);a(ce);var ke=r(ce,2),I=t(ke),Se=t(I,!0);a(I),a(ke),a(w),p(xe=>{G=B(w,1,"dropdown-option",null,G,xe),d(Ae,(e(c),n(()=>e(c).icon))),d(Se,(e(c),n(()=>e(c).name)))},[()=>({selected:e(R)===e(c).id})]),N("click",w,()=>x(e(c))),i(l,w)}),a(Pe),a(Y),a($);var Oe=r($,2),We=r(t(Oe),2);let Ee;var Ye=t(We),He=t(Ye);{var Fe=l=>{var c=ic(),w=t(c),G=t(w,!0);a(w),a(c),p(()=>d(G,(e(S),n(()=>e(S).name)))),i(l,c)},_e=l=>{var c=nc();i(l,c)};m(He,l=>{e(S)&&e(H)?l(Fe):l(_e,!1)})}Ea(2),a(Ye);var we=r(Ye,2);ea(we,5,()=>b,l=>l.id,(l,c)=>{var w=oc();let G;var ce=t(w),Ae=t(ce),ke=t(Ae,!0);a(Ae),a(ce),a(w),p(I=>{G=B(w,1,"dropdown-option",null,G,I),d(ke,(e(c),n(()=>e(c).name)))},[()=>({selected:e(H)===e(c).id})]),N("click",w,()=>F(e(c))),i(l,w)}),a(we),a(We),a(Oe);var Ne=r(Oe,2);{var Re=l=>{var c=lc();N("click",c,Le),i(l,c)};m(Ne,l=>{(e(h)||e(R)||e(H))&&l(Re)})}a(E),a(Z),a(se);var ye=r(se,2),ue=t(ye);{var g=l=>{var c=dc();i(l,c)},v=l=>{var c=ya(),w=na(c);{var G=Ae=>{var ke=hc();ea(ke,5,()=>e(D),I=>I.id,(I,Se)=>{var xe=bc(),ze=t(xe),sa=t(ze),va=t(sa),La=t(va);{var ae=aa=>{var Ke=wt();p(()=>d(Ke,(e(Se),n(()=>e(Se).number)))),i(aa,Ke)};m(La,aa=>{e(Se),n(()=>e(Se).number)&&aa(ae)})}var U=r(La);a(va),a(sa);var Q=r(sa,2),Ue=t(Q);a(Q),a(ze);var ra=r(ze,2),ca=t(ra);{var oa=aa=>{var Ke=cc(),ie=r(t(Ke),2),Me=t(ie,!0);a(ie),a(Ke),p(()=>d(Me,(e(Se),n(()=>e(Se).email)))),i(aa,Ke)};m(ca,aa=>{e(Se),n(()=>e(Se).email)&&aa(oa)})}var _a=r(ca,2);{var ha=aa=>{var Ke=vc(),ie=r(t(Ke),2),Me=t(ie,!0);a(ie),a(Ke),p(j=>d(Me,j),[()=>(e(Se),n(()=>me.find(j=>j.id===e(Se).gradeLevel)?.name||e(Se).gradeLevel))]),i(aa,Ke)};m(_a,aa=>{e(Se),n(()=>e(Se).gradeLevel&&e(Se).gradeLevel!=="Not specified")&&aa(ha)})}var fa=r(_a,2);{var Oa=aa=>{var Ke=uc(),ie=r(t(Ke),2),Me=t(ie);a(ie),a(Ke),p(j=>d(Me,`Section: ${j??""}`),[()=>(e(Se),n(()=>b.find(j=>j.id===e(Se).section)?.name||e(Se).section))]),i(aa,Ke)};m(fa,aa=>{e(Se),n(()=>e(Se).section&&e(Se).section!=="Not specified")&&aa(Oa)})}var Ba=r(fa,2);{var tt=aa=>{var Ke=mc(),ie=r(t(Ke),2),Me=t(ie);a(ie),a(Ke),p(j=>d(Me,`Age: ${j??""} years old`),[()=>(e(Se),n(()=>ve(e(Se).birthdate)))]),i(aa,Ke)};m(Ba,aa=>{e(Se),n(()=>e(Se).birthdate&&e(Se).birthdate!=="Not specified")&&aa(tt)})}var it=r(Ba,2);{var mt=aa=>{var Ke=pc(),ie=r(t(Ke),2),Me=t(ie);a(ie),a(Ke),p(()=>d(Me,`Guardian: ${e(Se),n(()=>e(Se).guardian)??""}`)),i(aa,Ke)};m(it,aa=>{e(Se),n(()=>e(Se).guardian&&e(Se).guardian!=="Not specified")&&aa(mt)})}var st=r(it,2);{var V=aa=>{var Ke=_c(),ie=r(t(Ke),2),Me=t(ie);a(ie),a(Ke),p(()=>d(Me,`Contact: ${e(Se),n(()=>e(Se).contactNumber)??""}`)),i(aa,Ke)};m(st,aa=>{e(Se),n(()=>e(Se).contactNumber&&e(Se).contactNumber!=="Not specified")&&aa(V)})}var be=r(st,2);{var Je=aa=>{var Ke=fc(),ie=r(t(Ke),2),Me=t(ie);a(ie),a(Ke),p(()=>d(Me,`Address: ${e(Se),n(()=>e(Se).address)??""}`)),i(aa,Ke)};m(be,aa=>{e(Se),n(()=>e(Se).address&&e(Se).address!=="Not specified")&&aa(Je)})}var ga=r(be,2);{var qa=aa=>{var Ke=gc(),ie=r(t(Ke),2),Me=t(ie);a(ie),a(Ke),p(j=>d(Me,`Birthdate: ${j??""}`),[()=>(e(Se),n(()=>K(e(Se).birthdate)))]),i(aa,Ke)};m(ga,aa=>{e(Se),n(()=>e(Se).birthdate&&e(Se).birthdate!=="Not specified")&&aa(qa)})}a(ra),a(xe),p(()=>d(U,` · ${e(Se),n(()=>e(Se).name)??""}`)),N("click",Ue,()=>P(e(Se).id,e(Se).name)),i(I,xe)}),a(ke),i(Ae,ke)},ce=Ae=>{var ke=wc(),I=t(ke),Se=t(I,!0);a(I);var xe=r(I,2),ze=t(xe);{var sa=U=>{var Q=wt("No students found matching your search criteria.");i(U,Q)},va=U=>{var Q=wt("No students found in the system.");i(U,Q)};m(ze,U=>{e(h)||e(R)||e(H)?U(sa):U(va,!1)})}a(xe);var La=r(xe,2);{var ae=U=>{var Q=yc();N("click",Q,Le),i(U,Q)};m(La,U=>{(e(h)||e(R)||e(H))&&U(ae)})}a(ke),p(()=>d(Se,e(h)||e(R)||e(H)?"search_off":"school")),i(Ae,ke)};m(w,Ae=>{e(D),n(()=>e(D).length>0)?Ae(G):Ae(ce,!1)},!0)}i(l,c)};m(ue,l=>{e(y)?l(g):l(v,!1)})}a(ye),a(oe),p((l,c)=>{ee=B(Y,1,"custom-dropdown",null,ee,l),Ee=B(We,1,"custom-dropdown",null,Ee,c)},[()=>({open:e(O)}),()=>({open:e(te)})]),Ta(C,()=>e(h),l=>s(h,l)),N("click",L,q),N("click",Ye,J),i(re,oe),$t()}var kc=o('<button type="button" class="clear-search-button"><span class="material-symbols-outlined">close</span></button>'),Dc=o('<div class="aas-selected-option"><span class="material-symbols-outlined aas-option-icon"> </span> <span class="aas-option-name"> </span></div>'),Tc=o('<span class="aas-placeholder">All Grade Levels</span>'),Ac=o('<button type="button"><span class="material-symbols-outlined aas-option-icon"> </span> <div class="aas-option-content"><span class="aas-option-name"> </span></div></button>'),jc=o('<div class="aas-selected-option"><span class="aas-option-name"> </span></div>'),Cc=o('<span class="aas-placeholder">All Sections</span>'),Nc=o('<button type="button"><div class="aas-option-content"><span class="aas-option-name"> </span></div></button>'),$c=o('<button type="button" class="clear-filters-button"><span class="material-symbols-outlined">filter_alt_off</span></button>'),qc=o('<div class="aas-loading-container"><span class="aas-student-loader"></span> <p class="aas-loading-text">Loading archived students...</p></div>'),Lc=o('<div class="aas-account-detail-item"><span class="material-symbols-outlined">email</span> <span> </span></div>'),Ec=o('<div class="aas-account-detail-item"><span class="material-symbols-outlined">school</span> <span> </span></div>'),Fc=o('<div class="aas-account-detail-item"><span class="material-symbols-outlined">class</span> <span> </span></div>'),Mc=o('<div class="aas-account-detail-item"><span class="material-symbols-outlined">cake</span> <span> </span></div>'),Gc=o('<div class="aas-account-detail-item"><span class="material-symbols-outlined">family_restroom</span> <span> </span></div>'),Ic=o('<div class="aas-account-detail-item"><span class="material-symbols-outlined">phone</span> <span> </span></div>'),Pc=o('<div class="aas-account-detail-item"><span class="material-symbols-outlined">home</span> <span> </span></div>'),Rc=o('<div class="aas-account-detail-item"><span class="material-symbols-outlined">calendar_today</span> <span> </span></div>'),Oc=o('<div class="aas-account-card"><div class="aas-account-card-header"><div class="aas-account-title"><h3 class="aas-account-name"><!> </h3> <div class="aas-archived-badge"><span class="material-symbols-outlined">archive</span> <span> </span></div></div> <div class="aas-action-buttons"><button type="button" class="aas-restore-button" title="Restore Student"><span class="material-symbols-outlined">unarchive</span></button></div></div> <div class="aas-account-details"><!> <!> <!> <!> <!> <!> <!> <!></div></div>'),Uc=o('<div class="aas-students-grid"></div>'),Wc=o('<button type="button" class="aas-clear-search-button-inline">Clear</button>'),Yc=o('<div class="aas-no-results"><span class="material-symbols-outlined aas-no-results-icon"> </span> <p><!></p> <!></div>'),Qc=o('<div class="aas-archived-students-container"><div class="aas-admin-student-header"><div class="aas-header-content"><h1 class="aas-page-title">Archived Students</h1> <p class="aas-page-subtitle">View and manage archived student records</p></div></div> <div class="filters-section"><div class="search-filter-container"><div class="search-container"><div class="search-input-wrapper"><span class="material-symbols-outlined search-icon">search</span> <input type="text" class="search-input" placeholder="Search archived students by name, email, or ID..."/> <!></div></div> <div class="filter-container"><div class="filter-group"><label class="filter-label">Grade Level</label> <div><button type="button" class="aas-dropdown-trigger aas-filter-trigger"><!> <span class="material-symbols-outlined aas-dropdown-arrow">expand_more</span></button> <div class="aas-dropdown-menu"></div></div></div> <div class="filter-group"><label class="filter-label">Section</label> <div><button type="button" class="aas-dropdown-trigger aas-filter-trigger"><!> <span class="material-symbols-outlined aas-dropdown-arrow">expand_more</span></button> <div class="aas-dropdown-menu"></div></div></div> <!></div></div></div> <div class="aas-students-list-section"><!></div></div>');function Vc(re,_){Nt(_,!1);const f=u(),S=u();let T=[],D=u([]),y=u(!0),h=u(""),R=u(""),H=u(""),O=u(!1),te=u(!1);const me=[{id:"",name:"All Grade Levels",icon:"school"},{id:"7",name:"Grade 7",icon:"looks_one"},{id:"8",name:"Grade 8",icon:"looks_two"},{id:"9",name:"Grade 9",icon:"looks_3"},{id:"10",name:"Grade 10",icon:"looks_4"}],b=[{id:"",name:"All Sections"},{id:"section-a",name:"Section A"},{id:"section-b",name:"Section B"},{id:"section-c",name:"Section C"},{id:"section-d",name:"Section D"},{id:"section-e",name:"Section E"}];async function W(){s(y,!0);try{const c=await fetch("/api/archived-students");if(!c.ok)throw new Error("Failed to load archived students");T=(await c.json()).students.map(G=>({id:G.id,name:G.name,number:G.number,email:G.email,gradeLevel:G.gradeLevel||"Not specified",section:G.section||"Not specified",birthdate:G.birthdate||"Not specified",address:G.address||"Not specified",guardian:G.guardian||"Not specified",contactNumber:G.contactNumber||"Not specified",archivedDate:G.archivedDate||"Not specified"})),A()}catch(c){console.error("Error loading archived students:",c),qe.error("Failed to load archived students. Please try again."),T=[]}finally{s(y,!1)}}function A(){s(D,T.filter(c=>{const w=!e(h)||c.name.toLowerCase().includes(e(h).toLowerCase())||c.email.toLowerCase().includes(e(h).toLowerCase())||c.number&&c.number.toLowerCase().includes(e(h).toLowerCase()),G=!e(R)||c.gradeLevel===e(R),ce=!e(H)||c.section===e(H);return w&&G&&ce}))}function q(){s(O,!e(O)),s(te,!1)}function J(){s(te,!e(te)),s(O,!1)}function x(c){s(R,c.id),s(O,!1),A()}function F(c){s(H,c.id),s(te,!1),A()}function ve(c){if(!c)return"N/A";const w=new Date,G=new Date(c);let ce=w.getFullYear()-G.getFullYear();const Ae=w.getMonth()-G.getMonth();return(Ae<0||Ae===0&&w.getDate()<G.getDate())&&ce--,ce}function K(c){return c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}function Le(c){return c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}async function ge(c){try{const w=await ut.put("/api/archived-students",{id:c});qe.success(w.message||"Student restored successfully"),await W()}catch(w){console.error("Error restoring student:",w),qe.error(w.message||"Failed to restore student. Please try again.")}}function P(){s(h,""),s(R,""),s(H,""),A()}function oe(c){c.target.closest(".aas-custom-dropdown")||(s(O,!1),s(te,!1))}Bt(()=>(W(),document.addEventListener("click",oe),()=>{document.removeEventListener("click",oe)})),Na(()=>e(R),()=>{s(f,me.find(c=>c.id===e(R)))}),Na(()=>e(H),()=>{s(S,b.find(c=>c.id===e(H)))}),Na(()=>e(h),()=>{e(h)!==void 0&&A()}),ns(),os();var se=Qc(),Z=r(t(se),2),Ce=t(Z),X=t(Ce),C=t(X),he=r(t(C),2);ka(he);var fe=r(he,2);{var E=c=>{var w=kc();N("click",w,()=>s(h,"")),i(c,w)};m(fe,c=>{e(h)&&c(E)})}a(C),a(X);var $=r(X,2),Y=t($),ee=r(t(Y),2);let L;var De=t(ee),M=t(De);{var le=c=>{var w=Dc(),G=t(w),ce=t(G,!0);a(G);var Ae=r(G,2),ke=t(Ae,!0);a(Ae),a(w),p(()=>{d(ce,(e(f),n(()=>e(f).icon))),d(ke,(e(f),n(()=>e(f).name)))}),i(c,w)},Pe=c=>{var w=Tc();i(c,w)};m(M,c=>{e(f)&&e(R)?c(le):c(Pe,!1)})}Ea(2),a(De);var Oe=r(De,2);ea(Oe,5,()=>me,c=>c.id,(c,w)=>{var G=Ac();let ce;var Ae=t(G),ke=t(Ae,!0);a(Ae);var I=r(Ae,2),Se=t(I),xe=t(Se,!0);a(Se),a(I),a(G),p(ze=>{ce=B(G,1,"aas-dropdown-option",null,ce,ze),d(ke,(e(w),n(()=>e(w).icon))),d(xe,(e(w),n(()=>e(w).name)))},[()=>({selected:e(R)===e(w).id})]),N("click",G,()=>x(e(w))),i(c,G)}),a(Oe),a(ee),a(Y);var We=r(Y,2),Ee=r(t(We),2);let Ye;var He=t(Ee),Fe=t(He);{var _e=c=>{var w=jc(),G=t(w),ce=t(G,!0);a(G),a(w),p(()=>d(ce,(e(S),n(()=>e(S).name)))),i(c,w)},we=c=>{var w=Cc();i(c,w)};m(Fe,c=>{e(S)&&e(H)?c(_e):c(we,!1)})}Ea(2),a(He);var Ne=r(He,2);ea(Ne,5,()=>b,c=>c.id,(c,w)=>{var G=Nc();let ce;var Ae=t(G),ke=t(Ae),I=t(ke,!0);a(ke),a(Ae),a(G),p(Se=>{ce=B(G,1,"aas-dropdown-option",null,ce,Se),d(I,(e(w),n(()=>e(w).name)))},[()=>({selected:e(H)===e(w).id})]),N("click",G,()=>F(e(w))),i(c,G)}),a(Ne),a(Ee),a(We);var Re=r(We,2);{var ye=c=>{var w=$c();N("click",w,P),i(c,w)};m(Re,c=>{(e(h)||e(R)||e(H))&&c(ye)})}a($),a(Ce),a(Z);var ue=r(Z,2),g=t(ue);{var v=c=>{var w=qc();i(c,w)},l=c=>{var w=ya(),G=na(w);{var ce=ke=>{var I=Uc();ea(I,5,()=>e(D),Se=>Se.id,(Se,xe)=>{var ze=Oc(),sa=t(ze),va=t(sa),La=t(va),ae=t(La);{var U=j=>{var $e=wt();p(()=>d($e,(e(xe),n(()=>e(xe).number)))),i(j,$e)};m(ae,j=>{e(xe),n(()=>e(xe).number)&&j(U)})}var Q=r(ae);a(La);var Ue=r(La,2),ra=r(t(Ue),2),ca=t(ra);a(ra),a(Ue),a(va);var oa=r(va,2),_a=t(oa);a(oa),a(sa);var ha=r(sa,2),fa=t(ha);{var Oa=j=>{var $e=Lc(),Ie=r(t($e),2),Ve=t(Ie,!0);a(Ie),a($e),p(()=>d(Ve,(e(xe),n(()=>e(xe).email)))),i(j,$e)};m(fa,j=>{e(xe),n(()=>e(xe).email)&&j(Oa)})}var Ba=r(fa,2);{var tt=j=>{var $e=Ec(),Ie=r(t($e),2),Ve=t(Ie,!0);a(Ie),a($e),p(pe=>d(Ve,pe),[()=>(e(xe),n(()=>me.find(pe=>pe.id===e(xe).gradeLevel)?.name||e(xe).gradeLevel))]),i(j,$e)};m(Ba,j=>{e(xe),n(()=>e(xe).gradeLevel&&e(xe).gradeLevel!=="Not specified")&&j(tt)})}var it=r(Ba,2);{var mt=j=>{var $e=Fc(),Ie=r(t($e),2),Ve=t(Ie);a(Ie),a($e),p(pe=>d(Ve,`Section: ${pe??""}`),[()=>(e(xe),n(()=>b.find(pe=>pe.id===e(xe).section)?.name||e(xe).section))]),i(j,$e)};m(it,j=>{e(xe),n(()=>e(xe).section&&e(xe).section!=="Not specified")&&j(mt)})}var st=r(it,2);{var V=j=>{var $e=Mc(),Ie=r(t($e),2),Ve=t(Ie);a(Ie),a($e),p(pe=>d(Ve,`Age: ${pe??""} years old`),[()=>(e(xe),n(()=>ve(e(xe).birthdate)))]),i(j,$e)};m(st,j=>{e(xe),n(()=>e(xe).birthdate&&e(xe).birthdate!=="Not specified")&&j(V)})}var be=r(st,2);{var Je=j=>{var $e=Gc(),Ie=r(t($e),2),Ve=t(Ie);a(Ie),a($e),p(()=>d(Ve,`Guardian: ${e(xe),n(()=>e(xe).guardian)??""}`)),i(j,$e)};m(be,j=>{e(xe),n(()=>e(xe).guardian&&e(xe).guardian!=="Not specified")&&j(Je)})}var ga=r(be,2);{var qa=j=>{var $e=Ic(),Ie=r(t($e),2),Ve=t(Ie);a(Ie),a($e),p(()=>d(Ve,`Contact: ${e(xe),n(()=>e(xe).contactNumber)??""}`)),i(j,$e)};m(ga,j=>{e(xe),n(()=>e(xe).contactNumber&&e(xe).contactNumber!=="Not specified")&&j(qa)})}var aa=r(ga,2);{var Ke=j=>{var $e=Pc(),Ie=r(t($e),2),Ve=t(Ie);a(Ie),a($e),p(()=>d(Ve,`Address: ${e(xe),n(()=>e(xe).address)??""}`)),i(j,$e)};m(aa,j=>{e(xe),n(()=>e(xe).address&&e(xe).address!=="Not specified")&&j(Ke)})}var ie=r(aa,2);{var Me=j=>{var $e=Rc(),Ie=r(t($e),2),Ve=t(Ie);a(Ie),a($e),p(pe=>d(Ve,`Birthdate: ${pe??""}`),[()=>(e(xe),n(()=>K(e(xe).birthdate)))]),i(j,$e)};m(ie,j=>{e(xe),n(()=>e(xe).birthdate&&e(xe).birthdate!=="Not specified")&&j(Me)})}a(ha),a(ze),p(j=>{d(Q,` · ${e(xe),n(()=>e(xe).name)??""}`),d(ca,`Archived ${j??""}`)},[()=>(e(xe),n(()=>Le(e(xe).archivedDate)))]),N("click",_a,()=>ge(e(xe).id)),i(Se,ze)}),a(I),i(ke,I)},Ae=ke=>{var I=Yc(),Se=t(I),xe=t(Se,!0);a(Se);var ze=r(Se,2),sa=t(ze);{var va=Q=>{var Ue=wt("No archived students found matching your search criteria.");i(Q,Ue)},La=Q=>{var Ue=wt("No archived students found in the system.");i(Q,Ue)};m(sa,Q=>{e(h)||e(R)||e(H)?Q(va):Q(La,!1)})}a(ze);var ae=r(ze,2);{var U=Q=>{var Ue=Wc();N("click",Ue,P),i(Q,Ue)};m(ae,Q=>{(e(h)||e(R)||e(H))&&Q(U)})}a(I),p(()=>d(xe,e(h)||e(R)||e(H)?"search_off":"archive")),i(ke,I)};m(G,ke=>{e(D),n(()=>e(D).length>0)?ke(ce):ke(Ae,!1)},!0)}i(c,w)};m(g,c=>{e(y)?c(v):c(l,!1)})}a(ue),a(se),p((c,w)=>{L=B(ee,1,"aas-custom-dropdown",null,L,c),Ye=B(Ee,1,"aas-custom-dropdown",null,Ye,w)},[()=>({open:e(O)}),()=>({open:e(te)})]),Ta(he,()=>e(h),c=>s(h,c)),N("click",De,q),N("click",He,J),i(re,se),$t()}var Jc=o('<button type="button" class="sgl-clear-search-button"><span class="material-symbols-outlined">close</span></button>'),Hc=o('<div class="sgl-selected-option"><span class="material-symbols-outlined sgl-option-icon"> </span> <span class="sgl-option-name"> </span></div>'),Bc=o('<span class="sgl-placeholder">All Grade Levels</span>'),zc=o('<button type="button"><span class="material-symbols-outlined sgl-option-icon"> </span> <div class="sgl-option-content"><span class="sgl-option-name"> </span></div></button>'),Zc=o('<div class="sgl-selected-option"><span class="sgl-option-name"> </span></div>'),Kc=o('<span class="sgl-placeholder">All Sections</span>'),Xc=o('<button type="button"><div class="sgl-option-content"><span class="sgl-option-name"> </span></div></button>'),ev=o('<button type="button" class="sgl-clear-filters-button"><span class="material-symbols-outlined">filter_alt_off</span></button>'),av=o('<div class="sgl-masterlist-loading-container"><span class="sgl-student-loader"></span> <p class="sgl-masterlist-loading-text">Loading student grades...</p></div>'),tv=o('<div class="sgl-empty-state"><span class="material-symbols-outlined sgl-empty-icon">search_off</span> <h3 class="sgl-empty-title">No students found</h3> <p class="sgl-empty-description"><!></p></div>'),sv=o('<tr><td class="sgl-student-id"> </td><td class="sgl-student-name"> </td><td class="sgl-year-level"> </td><td class="sgl-section"> </td><td class="sgl-gwa"> </td></tr>'),rv=o('<div class="sgl-results-header"><p class="sgl-results-count"> </p></div> <div class="sgl-table-container"><table class="sgl-students-table"><thead><tr><th>Student ID</th><th>Name</th><th>Grade Level</th><th>Section</th><th>GWA</th></tr></thead><tbody></tbody></table></div>',1),iv=o('<div class="sgl-student-grades-container"><div class="sgl-admin-student-header"><div class="sgl-header-content"><h1 class="sgl-page-title">Student Grades List</h1> <p class="sgl-page-subtitle">View and manage student academic performance records</p></div></div> <div class="sgl-filters-section"><div class="sgl-search-filter-container"><div class="sgl-search-container"><div class="sgl-search-input-wrapper"><span class="material-symbols-outlined sgl-search-icon">search</span> <input type="text" class="sgl-search-input" placeholder="Search students by name, email, or ID..."/> <!></div></div> <div class="sgl-filter-container"><div class="sgl-filter-group"><label class="sgl-filter-label">Grade Level</label> <div><button type="button" class="sgl-dropdown-trigger sgl-filter-trigger"><!> <span class="material-symbols-outlined sgl-dropdown-arrow">expand_more</span></button> <div class="sgl-dropdown-menu"></div></div></div> <div class="sgl-filter-group"><label class="sgl-filter-label">Section</label> <div><button type="button" class="sgl-dropdown-trigger sgl-filter-trigger"><!> <span class="material-symbols-outlined sgl-dropdown-arrow">expand_more</span></button> <div class="sgl-dropdown-menu"></div></div></div> <!></div></div></div> <div class="sgl-results-section"><!></div></div>');function nv(re,_){Nt(_,!1);const f=u(),S=u();let T=u([]),D=u([]),y=u(!0),h=u(""),R=u(""),H=u(""),O=u(!1),te=u(!1);const me=[{id:"",name:"All Grade Levels",icon:"school"},{id:"7",name:"Grade 7",icon:"looks_one"},{id:"8",name:"Grade 8",icon:"looks_two"},{id:"9",name:"Grade 9",icon:"looks_3"},{id:"10",name:"Grade 10",icon:"looks_4"}],b=[{id:"",name:"All Sections"},{id:"A",name:"Section A"},{id:"B",name:"Section B"},{id:"C",name:"Section C"},{id:"D",name:"Section D"},{id:"E",name:"Section E"}],W=[{id:"STU-2024-001",name:"Juan Carlos Santos",gradeLevel:"7",section:"A",gwa:92.5},{id:"STU-2024-002",name:"Maria Elena Rodriguez",gradeLevel:"7",section:"B",gwa:88.3},{id:"STU-2024-003",name:"Jose Miguel Dela Cruz",gradeLevel:"8",section:"A",gwa:85.7},{id:"STU-2024-004",name:"Ana Sofia Reyes",gradeLevel:"8",section:"B",gwa:95.2},{id:"STU-2024-005",name:"Carlos Antonio Lopez",gradeLevel:"9",section:"A",gwa:79.8},{id:"STU-2024-006",name:"Isabella Marie Garcia",gradeLevel:"9",section:"B",gwa:91.4},{id:"STU-2024-007",name:"Miguel Angel Torres",gradeLevel:"10",section:"A",gwa:87.6},{id:"STU-2024-008",name:"Sophia Grace Mendoza",gradeLevel:"10",section:"B",gwa:83.9},{id:"STU-2024-009",name:"Rafael Luis Morales",gradeLevel:"7",section:"C",gwa:74.2},{id:"STU-2024-010",name:"Camila Rose Fernandez",gradeLevel:"8",section:"C",gwa:94.8},{id:"STU-2024-011",name:"Diego Sebastian Cruz",gradeLevel:"9",section:"C",gwa:82.1},{id:"STU-2024-012",name:"Valentina Joy Ramos",gradeLevel:"10",section:"C",gwa:89.7},{id:"STU-2024-013",name:"Alejandro James Villanueva",gradeLevel:"7",section:"A",gwa:78.5},{id:"STU-2024-014",name:"Natalia Hope Santos",gradeLevel:"8",section:"B",gwa:86.3},{id:"STU-2024-015",name:"Gabriel Faith Martinez",gradeLevel:"9",section:"A",gwa:93.1}];async function A(){s(y,!0);try{await new Promise(l=>setTimeout(l,500)),s(T,W),q()}catch(l){console.error("Error loading students:",l),s(T,[])}finally{s(y,!1)}}function q(){s(D,e(T).filter(l=>{const c=!e(h)||l.name.toLowerCase().includes(e(h).toLowerCase())||l.id.toLowerCase().includes(e(h).toLowerCase()),w=!e(R)||l.gradeLevel===e(R),G=!e(H)||l.section===e(H);return c&&w&&G}))}function J(){s(O,!e(O)),s(te,!1)}function x(){s(te,!e(te)),s(O,!1)}function F(l){s(R,l),s(O,!1),q()}function ve(l){s(H,l),s(te,!1),q()}function K(){q()}function Le(){s(h,""),s(R,""),s(H,""),q()}function ge(l){return{7:"Grade 7",8:"Grade 8",9:"Grade 9",10:"Grade 10"}[l]||l}function P(l){l.target.closest(".sgl-custom-dropdown")||(s(O,!1),s(te,!1))}Bt(()=>(A(),document.addEventListener("click",P),()=>{document.removeEventListener("click",P)})),Na(()=>e(R),()=>{s(f,me.find(l=>l.id===e(R)))}),Na(()=>e(H),()=>{s(S,b.find(l=>l.id===e(H)))}),Na(()=>e(h),()=>{e(h)!==void 0&&K()}),ns(),os();var oe=iv(),se=r(t(oe),2),Z=t(se),Ce=t(Z),X=t(Ce),C=r(t(X),2);ka(C);var he=r(C,2);{var fe=l=>{var c=Jc();N("click",c,()=>s(h,"")),i(l,c)};m(he,l=>{e(h)&&l(fe)})}a(X),a(Ce);var E=r(Ce,2),$=t(E),Y=r(t($),2);let ee;var L=t(Y),De=t(L);{var M=l=>{var c=Hc(),w=t(c),G=t(w,!0);a(w);var ce=r(w,2),Ae=t(ce,!0);a(ce),a(c),p(()=>{d(G,(e(f),n(()=>e(f).icon))),d(Ae,(e(f),n(()=>e(f).name)))}),i(l,c)},le=l=>{var c=Bc();i(l,c)};m(De,l=>{e(f)&&e(R)?l(M):l(le,!1)})}Ea(2),a(L);var Pe=r(L,2);ea(Pe,5,()=>me,l=>l.id,(l,c)=>{var w=zc();let G;var ce=t(w),Ae=t(ce,!0);a(ce);var ke=r(ce,2),I=t(ke),Se=t(I,!0);a(I),a(ke),a(w),p(xe=>{G=B(w,1,"sgl-dropdown-option",null,G,xe),d(Ae,(e(c),n(()=>e(c).icon))),d(Se,(e(c),n(()=>e(c).name)))},[()=>({selected:e(R)===e(c).id})]),N("click",w,()=>F(e(c).id)),i(l,w)}),a(Pe),a(Y),a($);var Oe=r($,2),We=r(t(Oe),2);let Ee;var Ye=t(We),He=t(Ye);{var Fe=l=>{var c=Zc(),w=t(c),G=t(w,!0);a(w),a(c),p(()=>d(G,(e(S),n(()=>e(S).name)))),i(l,c)},_e=l=>{var c=Kc();i(l,c)};m(He,l=>{e(S)&&e(H)?l(Fe):l(_e,!1)})}Ea(2),a(Ye);var we=r(Ye,2);ea(we,5,()=>b,l=>l.id,(l,c)=>{var w=Xc();let G;var ce=t(w),Ae=t(ce),ke=t(Ae,!0);a(Ae),a(ce),a(w),p(I=>{G=B(w,1,"sgl-dropdown-option",null,G,I),d(ke,(e(c),n(()=>e(c).name)))},[()=>({selected:e(H)===e(c).id})]),N("click",w,()=>ve(e(c).id)),i(l,w)}),a(we),a(We),a(Oe);var Ne=r(Oe,2);{var Re=l=>{var c=ev();N("click",c,Le),i(l,c)};m(Ne,l=>{(e(h)||e(R)||e(H))&&l(Re)})}a(E),a(Z),a(se);var ye=r(se,2),ue=t(ye);{var g=l=>{var c=av();i(l,c)},v=l=>{var c=ya(),w=na(c);{var G=Ae=>{var ke=tv(),I=r(t(ke),4),Se=t(I);{var xe=sa=>{var va=wt("Try adjusting your search criteria or filters.");i(sa,va)},ze=sa=>{var va=wt("No student records are available at the moment.");i(sa,va)};m(Se,sa=>{e(h)||e(R)||e(H)?sa(xe):sa(ze,!1)})}a(I),a(ke),i(Ae,ke)},ce=Ae=>{var ke=rv(),I=na(ke),Se=t(I),xe=t(Se);a(Se),a(I);var ze=r(I,2),sa=t(ze),va=r(t(sa));ea(va,5,()=>e(D),La=>La.id,(La,ae)=>{var U=sv();let Q;var Ue=t(U),ra=t(Ue,!0);a(Ue);var ca=r(Ue),oa=t(ca,!0);a(ca);var _a=r(ca),ha=t(_a,!0);a(_a);var fa=r(_a),Oa=t(fa,!0);a(fa);var Ba=r(fa),tt=t(Ba);a(Ba),a(U),p((it,mt,st)=>{Q=B(U,1,"sgl-student-row",null,Q,it),d(ra,(e(ae),n(()=>e(ae).id))),d(oa,(e(ae),n(()=>e(ae).name))),d(ha,mt),d(Oa,(e(ae),n(()=>e(ae).section))),d(tt,`${st??""}%`)},[()=>({"low-gwa":e(ae).gwa<75}),()=>(e(ae),n(()=>ge(e(ae).gradeLevel))),()=>(e(ae),n(()=>e(ae).gwa.toFixed(1)))]),i(La,U)}),a(va),a(sa),a(ze),p(()=>d(xe,`Showing ${e(D),n(()=>e(D).length)??""} of ${e(T),n(()=>e(T).length)??""} students`)),i(Ae,ke)};m(w,Ae=>{e(D),n(()=>e(D).length===0)?Ae(G):Ae(ce,!1)},!0)}i(l,c)};m(ue,l=>{e(y)?l(g):l(v,!1)})}a(ye),a(oe),p((l,c)=>{ee=B(Y,1,"sgl-custom-dropdown",null,ee,l),Ee=B(We,1,"sgl-custom-dropdown",null,Ee,c)},[()=>({open:e(O)}),()=>({open:e(te)})]),Ta(C,()=>e(h),l=>s(h,l)),N("click",L,J),N("click",Ye,x),i(re,oe),$t()}var ov=o('<div class="scheduleassign-selected-option"><span class="material-symbols-outlined option-icon">school</span> <div class="option-content"><span class="option-name"> </span></div></div>'),lv=o('<span class="placeholder">Select year level</span>'),dv=o('<button type="button"><span class="material-symbols-outlined option-icon">school</span> <div class="option-content"><span class="option-name"> </span> <span class="option-description"> </span></div></button>'),cv=o('<div class="scheduleassign-selected-option"><span class="material-symbols-outlined option-icon">class</span> <div class="option-content"><span class="option-name"> </span></div></div>'),vv=o('<span class="placeholder"> </span>'),uv=o('<div class="admin-section-loading"><span class="section-loader"></span> <span>Loading sections...</span></div>'),mv=o('<button type="button"><span class="material-symbols-outlined option-icon">class</span> <div class="option-content"><span class="option-name"> </span> <span class="option-description"> </span></div></button>'),pv=o('<div class="scheduleassign-empty-state"><span class="material-symbols-outlined empty-icon">inbox</span> <span class="empty-text">No sections available</span></div>'),_v=o('<div class="scheduleassign-time-error"><span class="material-symbols-outlined">error</span> <span> </span></div>'),fv=o('<div class="scheduleassign-time-duration"><span class="material-symbols-outlined">schedule</span> <span> </span></div>'),gv=o('<label class="scheduleassign-day-checkbox"><input type="checkbox"/> <span class="scheduleassign-checkbox-label"> </span></label>'),bv=o('<div class="scheduleassign-selected-option"><span class="material-symbols-outlined scheduleassign-option-icon"> </span> <div class="scheduleassign-option-content"><span class="scheduleassign-option-name"> </span></div></div>'),hv=o('<span class="scheduleassign-placeholder">Select Schedule Type</span>'),yv=o('<div class="scheduleassign-selected-option"><span class="material-symbols-outlined scheduleassign-option-icon">book</span> <div class="scheduleassign-option-content"><span class="scheduleassign-option-name"> </span></div></div>'),wv=o('<span class="scheduleassign-placeholder">Select Subject</span>'),Sv=o('<div class="scheduleassign-loading"><span class="scheduleassign-loader"></span> <span>Loading subjects...</span></div>'),xv=o('<button type="button"><span class="material-symbols-outlined scheduleassign-option-icon">book</span> <div class="scheduleassign-option-content"><span class="scheduleassign-option-name"> </span></div></button>'),kv=o('<div class="scheduleassign-empty-state"><span class="material-symbols-outlined scheduleassign-empty-icon">inbox</span> <span class="scheduleassign-empty-text">No subjects available</span></div>'),Dv=o('<div class="scheduleassign-input-group"><label class="scheduleassign-input-label">Subject</label> <div class="scheduleassign-custom-dropdown"><button type="button"><!> <span class="material-symbols-outlined scheduleassign-dropdown-arrow">expand_more</span></button> <div><!></div></div></div>'),Tv=o('<div class="scheduleassign-selected-option"><span class="material-symbols-outlined scheduleassign-option-icon">sports</span> <div class="scheduleassign-option-content"><span class="scheduleassign-option-name"> </span></div></div>'),Av=o('<span class="scheduleassign-placeholder">Select Activity Type</span>'),jv=o('<div class="scheduleassign-loading"><span class="scheduleassign-loader"></span> <span>Loading activity types...</span></div>'),Cv=o('<button type="button"><span class="material-symbols-outlined scheduleassign-option-icon">sports</span> <div class="scheduleassign-option-content"><span class="scheduleassign-option-name"> </span></div></button>'),Nv=o('<div class="scheduleassign-empty-state"><span class="material-symbols-outlined scheduleassign-empty-icon">inbox</span> <span class="scheduleassign-empty-text">No activity types available</span></div>'),$v=o('<div class="scheduleassign-input-group"><label class="scheduleassign-input-label">Activity Type</label> <div class="scheduleassign-custom-dropdown"><button type="button"><!> <span class="material-symbols-outlined scheduleassign-dropdown-arrow">expand_more</span></button> <div><!></div></div></div>'),qv=o('<div class="scheduleassign-selected-option"><span class="material-symbols-outlined scheduleassign-option-icon">person</span> <div class="scheduleassign-option-content"><span class="scheduleassign-option-name"> </span></div></div>'),Lv=o('<span class="scheduleassign-placeholder">Select Teacher</span>'),Ev=o('<div class="scheduleassign-loading"><span class="scheduleassign-loader"></span> <span>Loading teachers...</span></div>'),Fv=o('<button type="button"><span class="material-symbols-outlined scheduleassign-option-icon">person</span> <div class="scheduleassign-option-content"><span class="scheduleassign-option-name"> </span></div></button>'),Mv=o('<div class="scheduleassign-empty-state"><span class="material-symbols-outlined scheduleassign-empty-icon">inbox</span> <span class="scheduleassign-empty-text">No teachers available</span></div>'),Gv=o('<div class="scheduleassign-input-group"><label class="scheduleassign-input-label">Teacher</label> <div class="scheduleassign-custom-dropdown"><button type="button"><!> <span class="material-symbols-outlined scheduleassign-dropdown-arrow">expand_more</span></button> <div><!></div></div></div>'),Iv=o('<div class="scheduleassign-add-form" id="addScheduleForm"><h4 class="scheduleassign-form-title">Add New Schedule</h4> <div class="scheduleassign-form-inputs"><div class="scheduleassign-time-section"><div class="scheduleassign-time-row"><div class="scheduleassign-input-group"><label class="scheduleassign-input-label">Start Time</label> <input type="time" class="scheduleassign-time-input"/></div> <div class="scheduleassign-input-group"><label class="scheduleassign-input-label">End Time</label> <input type="time" class="scheduleassign-time-input"/></div></div> <div class="scheduleassign-time-info-container"><!></div> <div class="scheduleassign-day-selection-section"><div class="scheduleassign-day-checkboxes"></div></div></div> <div class="scheduleassign-type-subject-row"><div class="scheduleassign-input-group"><label class="scheduleassign-input-label">Schedule Type</label> <div class="scheduleassign-custom-dropdown"><button type="button" id="scheduleassign-schedule-type-dropdown"><!> <span class="material-symbols-outlined scheduleassign-dropdown-arrow">expand_more</span></button> <div><button type="button"><span class="material-symbols-outlined scheduleassign-option-icon">book</span> <div class="scheduleassign-option-content"><span class="scheduleassign-option-name">Subject</span></div></button> <button type="button"><span class="material-symbols-outlined scheduleassign-option-icon">sports</span> <div class="scheduleassign-option-content"><span class="scheduleassign-option-name">Activity</span></div></button></div></div></div> <!> <!></div></div> <div class="scheduleassign-form-actions"><button type="button" class="scheduleassign-save-schedule-btn"><span class="material-symbols-outlined">save</span> </button></div></div>'),Pv=o('<div class="scheduleassign-detail-item"><span class="material-symbols-outlined scheduleassign-detail-icon">person</span> <span class="scheduleassign-detail-text"> </span></div>'),Rv=o('<div class="scheduleassign-detail-item"><span class="material-symbols-outlined scheduleassign-detail-icon">schedule</span> <span class="scheduleassign-detail-text"> </span></div>'),Ov=o('<span class="scheduleassign-room-details"> </span>'),Uv=o('<div class="scheduleassign-detail-item"><span class="material-symbols-outlined scheduleassign-detail-icon">location_on</span> <span class="scheduleassign-detail-text"> <!></span></div>'),Wv=o('<div class="scheduleassign-assignment-card"><div class="scheduleassign-assignment-header"><div class="scheduleassign-assignment-info"><h4 class="scheduleassign-assignment-title"> </h4> <p class="scheduleassign-assignment-subtitle"> </p></div> <div class="scheduleassign-assignment-actions"><button type="button" class="scheduleassign-delete-button" title="Delete assignment"><span class="material-symbols-outlined">delete</span></button></div></div> <div class="scheduleassign-assignment-details"><!> <!> <!></div></div>'),Yv=o('<div class="scheduleassign-empty-day"><span class="material-symbols-outlined empty-icon">event_available</span> <span class="empty-text">No schedules</span></div>'),Qv=o('<div class="scheduleassign-day-column"><div class="scheduleassign-day-header"><span class="day-name"> </span></div> <div class="scheduleassign-day-schedules"><!></div></div>'),Vv=o('<div class="scheduleassign-schedule-grid"><div class="scheduleassign-schedule-actions"><a href="#addScheduleForm" class="scheduleassign-add-schedule-link"><button type="button"><span class="material-symbols-outlined"> </span> </button></a></div> <!> <div class="scheduleassign-days-grid"></div></div>'),Jv=o('<div class="scheduleassign-empty-state-main"><span class="material-symbols-outlined empty-icon">calendar_month</span> <h3>Select Year Level and Section</h3> <p>Choose a year level and section to view the weekly schedule.</p></div>'),Hv=o('<div class="scheduleassign-form-section"><div class="scheduleassign-section-header"><h2 class="admin-section-title">Schedule Management</h2> <p class="scheduleassign-form-instruction">Select year level and section to view all schedule assignments.</p></div> <form><div class="scheduleassign-hierarchical-form"><div class="scheduleassign-selection-row"><div class="scheduleassign-form-group"><label class="scheduleassign-form-label" for="form-year">Year Level *</label> <div><button type="button" id="form-year"><!> <span class="material-symbols-outlined scheduleassign-dropdown-arrow">expand_more</span></button> <div class="scheduleassign-dropdown-menu"></div></div></div> <div class="scheduleassign-form-group"><label class="scheduleassign-form-label" for="form-section">Section *</label> <div><button type="button" id="form-section"><!> <span class="material-symbols-outlined scheduleassign-dropdown-arrow">expand_more</span></button> <div class="scheduleassign-dropdown-menu"><div class="scheduleassign-search-container"><input type="text" class="scheduleassign-search-input" placeholder="Search sections..."/> <span class="material-icons scheduleassign-search-icon">search</span></div> <!></div></div></div></div> <!></div></form></div>');function Bv(re,_){Nt(_,!1);const f=u(),S=u(),T=u(),D=u(),y=u(),h=u(),R=u(),H=[];let O=u(""),te=u(""),me=u(!1),b=u(!1),W=u(""),A=u(!1);const q=[{id:"grade-7",name:"Grade 7",description:"Junior High School - First Year"},{id:"grade-8",name:"Grade 8",description:"Junior High School - Second Year"},{id:"grade-9",name:"Grade 9",description:"Junior High School - Third Year"},{id:"grade-10",name:"Grade 10",description:"Junior High School - Fourth Year"}],J=[{id:"monday",name:"Monday"},{id:"tuesday",name:"Tuesday"},{id:"wednesday",name:"Wednesday"},{id:"thursday",name:"Thursday"},{id:"friday",name:"Friday"}];let x=u([]);async function F(){s(A,!0);try{const Me=await(await fetch("/api/sections?action=available-sections")).json();Me.success&&s(x,Me.data.map(j=>({id:j.id,name:j.name,grade:`Grade ${j.grade_level}`,year:`grade-${j.grade_level}`,grade_level:j.grade_level,school_year:j.school_year,status:j.status})))}catch(ie){console.error("Error loading sections:",ie)}finally{s(A,!1)}}let ve=u([]),K=u(!1),Le=u(!1),ge=u([]),P=u({startTime:"",endTime:"",scheduleType:"subject",subjectId:"",activityTypeId:"",teacherId:""}),oe=u([]),se=u([]),Z=u([]),Ce=u(!1),X=u(!1),C=u(!1),he=u(!1),fe=u(!1),E=u(!1),$=u(!1),Y=u(""),ee=u("");function L(){const ie=e(P).startTime,Me=e(P).endTime;if(!ie||!Me){s(Y,""),s(ee,"");return}const j=De(ie),$e=De(Me);if($e<=j)s(Y,"End time must be after start time"),s(ee,"");else{s(Y,"");const Ie=$e-j,Ve=Math.floor(Ie/60),pe=Ie%60;Ve>0&&pe>0?s(ee,`${Ve} hour${Ve>1?"s":""} and ${pe} minute${pe>1?"s":""}`):Ve>0?s(ee,`${Ve} hour${Ve>1?"s":""}`):s(ee,`${pe} minute${pe>1?"s":""}`)}}function De(ie){const[Me,j]=ie.split(":").map(Number);return Me*60+j}function M(ie){if(!ie)return 0;const[Me,j]=ie.split(" "),[$e,Ie]=Me.split(":").map(Number);let Ve=Ie;return j==="PM"&&$e!==12?Ve+=($e+12)*60:j==="AM"&&$e===12?Ve+=0:Ve+=$e*60,Ve}function le(ie){ie.target.closest(".scheduleassign-custom-dropdown")||(s(me,!1),s(b,!1),s(he,!1),s(fe,!1),s(E,!1))}function Pe(){s(me,!e(me))}function Oe(){e(O)&&s(b,!e(b))}function We(ie){s(O,ie?ie.id:""),s(te,""),s(me,!1)}function Ee(ie){s(te,ie?ie.id:""),s(b,!1),s(oe,[]),Ns(P,e(P).subjectId="")}function Ye(ie){if(!ie)return"";const Me=ie.split(":");let j=parseInt(Me[0]);const $e=Me[1],Ie=j>=12?"PM":"AM";j=j%12,j=j||12;const Ve=$e.startsWith("0")&&$e!=="00"?$e.substring(1):$e;return Ve==="00"?`${j}:00 ${Ie}`:`${j}:${Ve} ${Ie}`}async function He(){try{const Me=await(await fetch("/api/schedules")).json();Me.success?s(ve,Me.data.map(j=>({id:j.id,year:`grade-${j.grade_level}`,grade:`Grade ${j.grade_level}`,section:j.section_name,day:j.day_of_week.charAt(0).toUpperCase()+j.day_of_week.slice(1),time:`${Ye(j.start_time)} - ${Ye(j.end_time)}`,subject:j.subject_name||j.activity_type_name,teacher:j.teacher_name,type:j.schedule_type,startTime:Ye(j.start_time),endTime:Ye(j.end_time),subjectId:j.subject_id,activityTypeId:j.activity_type_id,teacherId:j.teacher_id,sectionId:j.section_id,schoolYear:j.school_year,roomId:j.room_id,roomName:j.room_name,roomBuilding:j.room_building,roomFloor:j.room_floor}))):console.error("Failed to load schedules:",Me.error)}catch(ie){console.error("Error loading schedules:",ie)}}async function Fe(ie){ms.confirm("Delete Assignment","<p>Are you sure you want to delete this schedule assignment?</p>",async()=>{try{const Me=await ut.delete(`/api/schedules?id=${ie.id}`);Me.success?(s(ve,e(ve).filter(j=>j.id!==ie.id)),s(ve,[...e(ve)]),setTimeout(()=>ke(),0),qe.success(`Assignment for ${ie.subject} has been deleted successfully`)):qe.error(Me.error||"Failed to delete assignment")}catch(Me){console.error("Error deleting assignment:",Me),qe.error("Failed to delete assignment. Please try again.")}},()=>{})}function _e(){s(K,!e(K)),e(K)||we()}function we(){s(ge,[]),s(P,{startTime:"",endTime:"",scheduleType:"subject",subjectId:"",activityTypeId:"",teacherId:""})}function Ne(){s(he,!e(he))}function Re(){s(fe,!e(fe))}function ye(){s(E,!e(E))}function ue(){s($,!e($))}function g(ie){Ns(P,e(P).subjectId=ie.id),s(he,!1)}function v(ie){Ns(P,e(P).activityTypeId=ie.id),s(fe,!1)}function l(ie){Ns(P,e(P).teacherId=ie.id),s(E,!1)}function c(ie){Ns(P,e(P).scheduleType=ie),s($,!1),ie==="subject"?Ns(P,e(P).activityTypeId=null):Ns(P,e(P).subjectId=null)}async function w(){if(!(e(oe).length>0)){s(Ce,!0);try{const ie=e(x).find(Ve=>Ve.id===e(te)),Me=ie?ie.grade_level:"",j=Me?`/api/subjects?action=available-subjects&grade_level=${Me}`:"/api/subjects?action=available-subjects",Ie=await(await fetch(j)).json();Ie.success&&s(oe,Ie.data)}catch(ie){console.error("Error loading subjects:",ie)}finally{s(Ce,!1)}}}async function G(){if(!(e(se).length>0)){s(X,!0);try{const Me=await(await fetch("/api/activity-types?action=available-activity-types")).json();Me.success&&s(se,Me.data)}catch(ie){console.error("Error loading activity types:",ie)}finally{s(X,!1)}}}async function ce(){if(!(e(Z).length>0)){s(C,!0);try{const Me=await(await fetch("/api/users?action=teachers")).json();Me.success&&s(Z,Me.data)}catch(ie){console.error("Error loading teachers:",ie)}finally{s(C,!1)}}}async function Ae(){if(!e(te)||e(ge).length===0){qe.error("Please select a section and at least one day");return}if(!e(P).startTime||!e(P).endTime){qe.error("Please enter start and end times");return}if(e(P).scheduleType==="subject"&&!e(P).subjectId){qe.error("Please select a subject");return}if(e(P).scheduleType==="activity"&&!e(P).activityTypeId){qe.error("Please select an activity type");return}s(Le,!0);try{const ie=e(ge).map(Ie=>{const Ve=J.find(pe=>pe.id===Ie)?.name.toLowerCase();return fetch("/api/schedules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sectionId:e(te),dayOfWeek:Ve,startTime:e(P).startTime,endTime:e(P).endTime,scheduleType:e(P).scheduleType,subjectId:e(P).scheduleType==="subject"?e(P).subjectId:null,activityTypeId:e(P).scheduleType==="activity"?e(P).activityTypeId:null,teacherId:e(P).teacherId||null,schoolYear:"2024-2025"})})}),Me=await Promise.all(ie),$e=(await Promise.all(Me.map(Ie=>Ie.json()))).filter(Ie=>!Ie.success);$e.length===0?(qe.success(`Schedule added successfully for ${e(ge).length} day(s)`),we(),s(K,!1),await He()):qe.error(`Failed to add schedule for ${$e.length} day(s)`)}catch(ie){console.error("Error submitting schedule:",ie),qe.error("Failed to add schedule. Please try again.")}finally{s(Le,!1)}}Bt(()=>{F(),He()}),ii(()=>{ke()});function ke(){if(!e(O)||!e(te))return;const ie=document.querySelectorAll(".scheduleassign-day-column");if(ie.length===0)return;let Me=0;ie.forEach(j=>{const $e=j.querySelector(".scheduleassign-day-schedules");if($e){const Ie=$e.scrollHeight;Me=Math.max(Me,Ie)}}),ie.forEach(j=>{const $e=j.querySelector(".scheduleassign-empty-day"),Ie=j.querySelector(".scheduleassign-day-schedules");$e&&Ie&&(Ie.children.length>1||Ie.children.length===1&&!Ie.querySelector(".scheduleassign-empty-day")||($e.style.minHeight=`${Me}px`))})}Na(()=>e(P),()=>{e(P).startTime&&e(P).endTime?L():(s(Y,""),s(ee,""))}),Na(()=>(e(O),e(x)),()=>{s(f,e(O)?e(x).filter(ie=>ie.year===e(O)):[])}),Na(()=>(e(f),e(W)),()=>{s(S,e(f).filter(ie=>ie.name.toLowerCase().includes(e(W).toLowerCase())||ie.grade.toLowerCase().includes(e(W).toLowerCase())))}),Na(()=>e(O),()=>{s(T,q.find(ie=>ie.id===e(O)))}),Na(()=>(e(x),e(te)),()=>{s(D,e(x).find(ie=>ie.id===e(te)))}),Na(()=>(e(ve),e(O),e(te),e(D)),()=>{s(y,J.reduce((ie,Me)=>(ie[Me.id]=e(ve).filter(j=>{if(!e(O)||!e(te))return!1;const $e=j.year===e(O),Ie=j.section===e(D)?.name,Ve=j.day===Me.name;return $e&&Ie&&Ve}).sort((j,$e)=>{const Ie=M(j.startTime),Ve=M($e.startTime);return Ie-Ve}),ie),{}))}),Na(()=>e(O),()=>{s(h,!!e(O))}),Na(()=>e(te),()=>{s(R,!!e(te))}),Na(()=>e(K),()=>{e(K)&&(w(),G(),ce())}),ns(),os();var I=Hv();N("click",Ps,le);var Se=r(t(I),2),xe=t(Se),ze=t(xe),sa=t(ze),va=r(t(sa),2);let La;var ae=t(va);let U;var Q=t(ae);{var Ue=ie=>{var Me=ov(),j=r(t(Me),2),$e=t(j),Ie=t($e,!0);a($e),a(j),a(Me),p(()=>d(Ie,(e(T),n(()=>e(T).name)))),i(ie,Me)},ra=ie=>{var Me=lv();i(ie,Me)};m(Q,ie=>{e(T)?ie(Ue):ie(ra,!1)})}Ea(2),a(ae);var ca=r(ae,2);ea(ca,5,()=>q,ie=>ie.id,(ie,Me)=>{var j=dv();let $e;var Ie=r(t(j),2),Ve=t(Ie),pe=t(Ve,!0);a(Ve);var je=r(Ve,2),Ze=t(je,!0);a(je),a(Ie),a(j),p(ua=>{$e=B(j,1,"scheduleassign-dropdown-item",null,$e,ua),d(pe,(e(Me),n(()=>e(Me).name))),d(Ze,(e(Me),n(()=>e(Me).description)))},[()=>({selected:e(O)===e(Me).id})]),N("click",j,()=>We(e(Me))),i(ie,j)}),a(ca),a(va),a(sa);var oa=r(sa,2),_a=r(t(oa),2);let ha;var fa=t(_a);let Oa;var Ba=t(fa);{var tt=ie=>{var Me=cv(),j=r(t(Me),2),$e=t(j),Ie=t($e);a($e),a(j),a(Me),p(()=>d(Ie,`${e(D),n(()=>e(D).grade)??""} · ${e(D),n(()=>e(D).name)??""}`)),i(ie,Me)},it=ie=>{var Me=vv(),j=t(Me,!0);a(Me),p(()=>d(j,e(O)?"Select section":"Select year level first")),i(ie,Me)};m(Ba,ie=>{e(D)?ie(tt):ie(it,!1)})}Ea(2),a(fa);var mt=r(fa,2),st=t(mt),V=t(st);ka(V),Ea(2),a(st);var be=r(st,2);{var Je=ie=>{var Me=uv();i(ie,Me)},ga=ie=>{var Me=ya(),j=na(Me);{var $e=Ve=>{var pe=ya(),je=na(pe);ea(je,1,()=>e(S),Ze=>Ze.id,(Ze,ua)=>{var wa=mv();let ma;var Ra=r(t(wa),2),za=t(Ra),Wa=t(za);a(za);var Xa=r(za,2),kt=t(Xa);a(Xa),a(Ra),a(wa),p(Ft=>{ma=B(wa,1,"scheduleassign-dropdown-item",null,ma,Ft),d(Wa,`${e(ua),n(()=>e(ua).grade)??""} · ${e(ua),n(()=>e(ua).name)??""}`),d(kt,`${e(ua),n(()=>e(ua).grade)??""} Section`)},[()=>({selected:e(te)===e(ua).id})]),N("click",wa,()=>Ee(e(ua))),i(Ze,wa)}),i(Ve,pe)},Ie=Ve=>{var pe=pv();i(Ve,pe)};m(j,Ve=>{e(S),n(()=>e(S).length>0)?Ve($e):Ve(Ie,!1)},!0)}i(ie,Me)};m(be,ie=>{e(A)?ie(Je):ie(ga,!1)})}a(mt),a(_a),a(oa),a(ze);var qa=r(ze,2);{var aa=ie=>{var Me=Vv(),j=t(Me),$e=t(j),Ie=t($e);let Ve;var pe=t(Ie),je=t(pe,!0);a(pe);var Ze=r(pe);a(Ie),a($e),a(j);var ua=r(j,2);{var wa=Ra=>{var za=Iv(),Wa=r(t(za),2),Xa=t(Wa),kt=t(Xa),Ft=t(kt),Rt=r(t(Ft),2);ka(Rt),a(Ft);var pt=r(Ft,2),Tt=r(t(pt),2);ka(Tt),a(pt),a(kt);var Aa=r(kt,2),pa=t(Aa);{var ja=Ia=>{var Pa=ya(),Qa=na(Pa);{var Ua=yt=>{var At=_v(),jt=r(t(At),2),k=t(jt,!0);a(jt),a(At),p(()=>d(k,e(Y))),i(yt,At)},et=yt=>{var At=ya(),jt=na(At);{var k=de=>{var Ge=fv(),ia=r(t(Ge),2),ne=t(ia);a(ia),a(Ge),p(()=>d(ne,`Duration: ${e(ee)??""}`)),i(de,Ge)};m(jt,de=>{e(ee)&&de(k)},!0)}i(yt,At)};m(Qa,yt=>{e(Y)?yt(Ua):yt(et,!1)})}i(Ia,Pa)};m(pa,Ia=>{e(P),n(()=>e(P).startTime&&e(P).endTime)&&Ia(ja)})}a(Aa);var Za=r(Aa,2),$a=t(Za);ea($a,5,()=>J,ds,(Ia,Pa)=>{var Qa=gv(),Ua=t(Qa);ka(Ua);var et,yt=r(Ua,2),At=t(yt,!0);a(yt),a(Qa),p(()=>{et!==(et=(e(Pa),n(()=>e(Pa).id)))&&(Ua.value=(Ua.__value=(e(Pa),n(()=>e(Pa).id)))??""),d(At,(e(Pa),n(()=>e(Pa).name)))}),vi(H,[],Ua,()=>(e(Pa),n(()=>e(Pa).id),e(ge)),jt=>s(ge,jt)),i(Ia,Qa)}),a($a),a(Za),a(Xa);var Sa=r(Xa,2),bt=t(Sa),Dt=r(t(bt),2),qt=t(Dt);let Mt;var as=t(qt);{var Yt=Ia=>{var Pa=bv(),Qa=t(Pa),Ua=t(Qa,!0);a(Qa);var et=r(Qa,2),yt=t(et),At=t(yt,!0);a(yt),a(et),a(Pa),p(()=>{d(Ua,(e(P),n(()=>e(P).scheduleType==="subject"?"book":"sports"))),d(At,(e(P),n(()=>e(P).scheduleType==="subject"?"Subject":"Activity")))}),i(Ia,Pa)},zt=Ia=>{var Pa=hv();i(Ia,Pa)};m(as,Ia=>{e(P),n(()=>e(P).scheduleType)?Ia(Yt):Ia(zt,!1)})}Ea(2),a(qt);var ss=r(qt,2);let z;var Te=t(ss);let Be;var Ca=r(Te,2);let Ya;a(ss),a(Dt),a(bt);var Da=r(bt,2);{var ta=Ia=>{var Pa=Dv(),Qa=r(t(Pa),2),Ua=t(Qa);let et;var yt=t(Ua);{var At=Qe=>{const Xe=ws(()=>(e(oe),e(P),n(()=>e(oe).find(ba=>ba.id===e(P).subjectId))));var Ga=yv(),vt=r(t(Ga),2),_t=t(vt),da=t(_t,!0);a(_t),a(vt),a(Ga),p(()=>d(da,(us(e(Xe)),n(()=>e(Xe)?.name)))),i(Qe,Ga)},jt=Qe=>{var Xe=wv();i(Qe,Xe)};m(yt,Qe=>{e(P),n(()=>e(P).subjectId)?Qe(At):Qe(jt,!1)})}Ea(2),a(Ua);var k=r(Ua,2);let de;var Ge=t(k);{var ia=Qe=>{var Xe=Sv();i(Qe,Xe)},ne=Qe=>{var Xe=ya(),Ga=na(Xe);{var vt=da=>{var ba=ya(),nt=na(ba);ea(nt,1,()=>e(oe),Ka=>Ka.id,(Ka,Ma)=>{var ot=xv();let xt;var Va=r(t(ot),2),ft=t(Va),Lt=t(ft,!0);a(ft),a(Va),a(ot),p(Zt=>{xt=B(ot,1,"scheduleassign-dropdown-option",null,xt,Zt),d(Lt,(e(Ma),n(()=>e(Ma).name)))},[()=>({selected:e(P).subjectId===e(Ma).id})]),N("click",ot,()=>g(e(Ma))),i(Ka,ot)}),i(da,ba)},_t=da=>{var ba=kv();i(da,ba)};m(Ga,da=>{e(oe),n(()=>e(oe).length>0)?da(vt):da(_t,!1)},!0)}i(Qe,Xe)};m(Ge,Qe=>{e(Ce)?Qe(ia):Qe(ne,!1)})}a(k),a(Qa),a(Pa),p((Qe,Xe)=>{et=B(Ua,1,"scheduleassign-dropdown-trigger",null,et,Qe),Ua.disabled=e(Ce),de=B(k,1,"scheduleassign-dropdown-menu",null,de,Xe)},[()=>({open:e(he),selected:e(P).subjectId}),()=>({open:e(he)})]),N("click",Ua,Ne),i(Ia,Pa)},ct=Ia=>{var Pa=$v(),Qa=r(t(Pa),2),Ua=t(Qa);let et;var yt=t(Ua);{var At=Qe=>{const Xe=ws(()=>(e(se),e(P),n(()=>e(se).find(ba=>ba.id===e(P).activityTypeId))));var Ga=Tv(),vt=r(t(Ga),2),_t=t(vt),da=t(_t,!0);a(_t),a(vt),a(Ga),p(()=>d(da,(us(e(Xe)),n(()=>e(Xe)?.name)))),i(Qe,Ga)},jt=Qe=>{var Xe=Av();i(Qe,Xe)};m(yt,Qe=>{e(P),n(()=>e(P).activityTypeId)?Qe(At):Qe(jt,!1)})}Ea(2),a(Ua);var k=r(Ua,2);let de;var Ge=t(k);{var ia=Qe=>{var Xe=jv();i(Qe,Xe)},ne=Qe=>{var Xe=ya(),Ga=na(Xe);{var vt=da=>{var ba=ya(),nt=na(ba);ea(nt,1,()=>e(se),Ka=>Ka.id,(Ka,Ma)=>{var ot=Cv();let xt;var Va=r(t(ot),2),ft=t(Va),Lt=t(ft,!0);a(ft),a(Va),a(ot),p(Zt=>{xt=B(ot,1,"scheduleassign-dropdown-option",null,xt,Zt),d(Lt,(e(Ma),n(()=>e(Ma).name)))},[()=>({selected:e(P).activityTypeId===e(Ma).id})]),N("click",ot,()=>v(e(Ma))),i(Ka,ot)}),i(da,ba)},_t=da=>{var ba=Nv();i(da,ba)};m(Ga,da=>{e(se),n(()=>e(se).length>0)?da(vt):da(_t,!1)},!0)}i(Qe,Xe)};m(Ge,Qe=>{e(X)?Qe(ia):Qe(ne,!1)})}a(k),a(Qa),a(Pa),p((Qe,Xe)=>{et=B(Ua,1,"scheduleassign-dropdown-trigger",null,et,Qe),Ua.disabled=e(X),de=B(k,1,"scheduleassign-dropdown-menu",null,de,Xe)},[()=>({open:e(fe),selected:e(P).activityTypeId}),()=>({open:e(fe)})]),N("click",Ua,Re),i(Ia,Pa)};m(Da,Ia=>{e(P),n(()=>e(P).scheduleType==="subject")?Ia(ta):Ia(ct,!1)})}var lt=r(Da,2);{var Fa=Ia=>{var Pa=Gv(),Qa=r(t(Pa),2),Ua=t(Qa);let et;var yt=t(Ua);{var At=Qe=>{const Xe=ws(()=>(e(Z),e(P),n(()=>e(Z).find(ba=>ba.id===e(P).teacherId))));var Ga=qv(),vt=r(t(Ga),2),_t=t(vt),da=t(_t);a(_t),a(vt),a(Ga),p(()=>d(da,`${us(e(Xe)),n(()=>e(Xe)?.first_name)??""} ${us(e(Xe)),n(()=>e(Xe)?.last_name)??""}`)),i(Qe,Ga)},jt=Qe=>{var Xe=Lv();i(Qe,Xe)};m(yt,Qe=>{e(P),n(()=>e(P).teacherId)?Qe(At):Qe(jt,!1)})}Ea(2),a(Ua);var k=r(Ua,2);let de;var Ge=t(k);{var ia=Qe=>{var Xe=Ev();i(Qe,Xe)},ne=Qe=>{var Xe=ya(),Ga=na(Xe);{var vt=da=>{var ba=ya(),nt=na(ba);ea(nt,1,()=>e(Z),Ka=>Ka.id,(Ka,Ma)=>{var ot=Fv();let xt;var Va=r(t(ot),2),ft=t(Va),Lt=t(ft);a(ft),a(Va),a(ot),p(Zt=>{xt=B(ot,1,"scheduleassign-dropdown-option",null,xt,Zt),d(Lt,`${e(Ma),n(()=>e(Ma).first_name)??""} ${e(Ma),n(()=>e(Ma).last_name)??""}`)},[()=>({selected:e(P).teacherId===e(Ma).id})]),N("click",ot,()=>l(e(Ma))),i(Ka,ot)}),i(da,ba)},_t=da=>{var ba=Mv();i(da,ba)};m(Ga,da=>{e(Z),n(()=>e(Z).length>0)?da(vt):da(_t,!1)},!0)}i(Qe,Xe)};m(Ge,Qe=>{e(C)?Qe(ia):Qe(ne,!1)})}a(k),a(Qa),a(Pa),p((Qe,Xe)=>{et=B(Ua,1,"scheduleassign-dropdown-trigger",null,et,Qe),Ua.disabled=e(C),de=B(k,1,"scheduleassign-dropdown-menu",null,de,Xe)},[()=>({open:e(E),selected:e(P).teacherId}),()=>({open:e(E)})]),N("click",Ua,ye),i(Ia,Pa)};m(lt,Ia=>{e(P),n(()=>e(P).scheduleType==="subject")&&Ia(Fa)})}a(Sa),a(Wa);var dt=r(Wa,2),ht=t(dt),It=r(t(ht));a(ht),a(dt),a(za),p((Ia,Pa,Qa,Ua)=>{Mt=B(qt,1,"scheduleassign-dropdown-trigger",null,Mt,Ia),z=B(ss,1,"scheduleassign-dropdown-menu",null,z,Pa),Be=B(Te,1,"scheduleassign-dropdown-option",null,Be,Qa),Ya=B(Ca,1,"scheduleassign-dropdown-option",null,Ya,Ua),ht.disabled=(e(Le),e(ge),n(()=>e(Le)||e(ge).length===0)),d(It,` ${e(Le)?"Saving...":"Save Schedule"}`)},[()=>({open:e($),selected:e(P).scheduleType}),()=>({open:e($)}),()=>({selected:e(P).scheduleType==="subject"}),()=>({selected:e(P).scheduleType==="activity"})]),Ta(Rt,()=>e(P).startTime,Ia=>Ns(P,e(P).startTime=Ia)),Ta(Tt,()=>e(P).endTime,Ia=>Ns(P,e(P).endTime=Ia)),N("click",qt,ue),N("click",Te,()=>c("subject")),N("click",Ca,()=>c("activity")),N("click",ht,Ae),i(Ra,za)};m(ua,Ra=>{e(K)&&Ra(wa)})}var ma=r(ua,2);ea(ma,5,()=>J,Ra=>Ra.id,(Ra,za)=>{var Wa=Qv(),Xa=t(Wa),kt=t(Xa),Ft=t(kt,!0);a(kt),a(Xa);var Rt=r(Xa,2),pt=t(Rt);{var Tt=pa=>{var ja=ya(),Za=na(ja);ea(Za,1,()=>(e(y),e(za),n(()=>e(y)[e(za).id])),$a=>$a.id,($a,Sa)=>{var bt=Wv(),Dt=t(bt),qt=t(Dt),Mt=t(qt),as=t(Mt,!0);a(Mt);var Yt=r(Mt,2),zt=t(Yt);a(Yt),a(qt);var ss=r(qt,2),z=t(ss);a(ss),a(Dt);var Te=r(Dt,2),Be=t(Te);{var Ca=lt=>{var Fa=Pv(),dt=r(t(Fa),2),ht=t(dt,!0);a(dt),a(Fa),p(()=>d(ht,(e(Sa),n(()=>e(Sa).teacher)))),i(lt,Fa)};m(Be,lt=>{e(Sa),n(()=>e(Sa).teacher)&&lt(Ca)})}var Ya=r(Be,2);{var Da=lt=>{var Fa=Rv(),dt=r(t(Fa),2),ht=t(dt);a(dt),a(Fa),p(()=>d(ht,`${e(Sa),n(()=>e(Sa).startTime)??""} - ${e(Sa),n(()=>e(Sa).endTime)??""}`)),i(lt,Fa)};m(Ya,lt=>{e(Sa),n(()=>e(Sa).startTime&&e(Sa).endTime)&&lt(Da)})}var ta=r(Ya,2);{var ct=lt=>{var Fa=Uv(),dt=r(t(Fa),2),ht=t(dt),It=r(ht);{var Ia=Pa=>{var Qa=Ov(),Ua=t(Qa);a(Qa),p(()=>d(Ua,`(${e(Sa),n(()=>e(Sa).roomBuilding)??""}${e(Sa),n(()=>e(Sa).roomFloor?`, Floor ${e(Sa).roomFloor}`:"")??""})`)),i(Pa,Qa)};m(It,Pa=>{e(Sa),n(()=>e(Sa).roomBuilding||e(Sa).roomFloor)&&Pa(Ia)})}a(dt),a(Fa),p(()=>d(ht,`${e(Sa),n(()=>e(Sa).roomName)??""} `)),i(lt,Fa)};m(ta,lt=>{e(Sa),n(()=>e(Sa).type==="subject"&&e(Sa).roomName)&&lt(ct)})}a(Te),a(bt),p(()=>{d(as,(e(Sa),n(()=>e(Sa).subject))),d(zt,`${e(Sa),n(()=>e(Sa).grade)??""} - ${e(Sa),n(()=>e(Sa).section)??""}`)}),N("click",z,()=>Fe(e(Sa))),i($a,bt)}),i(pa,ja)},Aa=pa=>{var ja=Yv();i(pa,ja)};m(pt,pa=>{e(y),e(za),n(()=>e(y)[e(za).id]&&e(y)[e(za).id].length>0)?pa(Tt):pa(Aa,!1)})}a(Rt),a(Wa),p(()=>d(Ft,(e(za),n(()=>e(za).name)))),i(Ra,Wa)}),a(ma),a(Me),p(Ra=>{Ve=B(Ie,1,"scheduleassign-add-schedule-card",null,Ve,Ra),d(je,e(K)?"close":"add"),d(Ze,` ${e(K)?"Cancel Schedule":"Add Schedule"}`)},[()=>({"cancel-mode":e(K)})]),N("click",Ie,_e),i(ie,Me)},Ke=ie=>{var Me=Jv();i(ie,Me)};m(qa,ie=>{e(O)&&e(te)?ie(aa):ie(Ke,!1)})}a(xe),a(Se),a(I),p((ie,Me,j,$e)=>{La=B(va,1,"scheduleassign-custom-dropdown",null,La,ie),U=B(ae,1,"scheduleassign-dropdown-button",null,U,Me),ha=B(_a,1,"scheduleassign-custom-dropdown",null,ha,j),Oa=B(fa,1,"scheduleassign-dropdown-button",null,Oa,$e),fa.disabled=!e(O)},[()=>({open:e(me)}),()=>({selected:e(O)}),()=>({open:e(b),disabled:!e(O)}),()=>({selected:e(te),disabled:!e(O)})]),N("click",ae,Pe),N("click",fa,Oe),Ta(V,()=>e(W),ie=>s(W,ie)),i(re,I),$t()}const er="roomManagementData",Lr="availableSectionsData",Br=300*1e3;function zv(){const{subscribe:re,set:_,update:f}=cr({rooms:[],availableSections:[],isLoading:!1,error:null,lastUpdated:null});return{subscribe:re,init:S=>{S&&S.rooms&&_({rooms:S.rooms,availableSections:S.availableSections||[],isLoading:!1,error:null,lastUpdated:S.lastUpdated})},setLoading:S=>{f(T=>({...T,isLoading:S,error:S?null:T.error}))},updateRooms:S=>{const T=Date.now(),D={rooms:S,lastUpdated:T,isLoading:!1,error:null};f(y=>({...y,...D}));try{localStorage.setItem(er,JSON.stringify({rooms:S,lastUpdated:T}))}catch(y){console.warn("Failed to cache rooms data:",y)}},updateSections:S=>{const T=Date.now();f(D=>({...D,availableSections:S,lastUpdated:T}));try{localStorage.setItem(Lr,JSON.stringify({sections:S,lastUpdated:T}))}catch(D){console.warn("Failed to cache sections data:",D)}},setError:S=>{f(T=>({...T,error:S,isLoading:!1}))},getCachedData:()=>{try{const S=localStorage.getItem(er),T=localStorage.getItem(Lr);if(!S)return null;const D=JSON.parse(S),y=T?JSON.parse(T):{sections:[]},h=Date.now(),R=h-(D.lastUpdated||0),H=h-(y.lastUpdated||0);return R<Br?{rooms:D.rooms||[],availableSections:H<Br?y.sections||[]:[],lastUpdated:D.lastUpdated}:null}catch(S){return console.warn("Failed to retrieve cached room data:",S),null}},clearCache:()=>{try{localStorage.removeItem(er),localStorage.removeItem(Lr)}catch(S){console.warn("Failed to clear room cache:",S)}},addRoom:S=>{f(T=>{const D=[S,...T.rooms];try{localStorage.setItem(er,JSON.stringify({rooms:D,lastUpdated:Date.now()}))}catch(y){console.warn("Failed to update cache after adding room:",y)}return{...T,rooms:D}})},removeRoom:S=>{f(T=>{const D=T.rooms.filter(y=>y.id!==S);try{localStorage.setItem(er,JSON.stringify({rooms:D,lastUpdated:Date.now()}))}catch(y){console.warn("Failed to update cache after removing room:",y)}return{...T,rooms:D}})},updateRoom:(S,T)=>{f(D=>{const y=D.rooms.map(h=>h.id===S?{...h,...T}:h);try{localStorage.setItem(er,JSON.stringify({rooms:y,lastUpdated:Date.now()}))}catch(h){console.warn("Failed to update cache after updating room:",h)}return{...D,rooms:y}})}}}const qs=zv();var Zv=o('<span class="material-symbols-outlined">add_ad</span> Create Room',1),Kv=o('<div class="admin-room-loading"><span class="room-loader"></span> <p>Loading rooms...</p></div>'),Xv=o('<div class="admin-room-empty-state"><span class="material-symbols-outlined">meeting_room</span> <p>No rooms found. Create your first room using the form above.</p></div>'),eu=o('<button type="button" class="admin-room-unassign-button" title="Unassign Room"><span class="material-symbols-outlined">remove_circle</span></button>'),au=o('<a><button type="button" class="admin-room-assign-button"><span class="material-symbols-outlined"> </span></button></a>'),tu=o('<div class="admin-room-room-assignment"><span class="material-symbols-outlined">group</span> <span> </span></div>'),su=o('<div class="admin-room-room-assignment"><span class="material-symbols-outlined">check_circle</span> <span>Available</span></div>'),ru=o('<div class="admin-room-room-updated"><span class="material-symbols-outlined">update</span> <span> </span></div>'),iu=o('<div class="admin-room-edit-form-section"><div class="admin-room-edit-form-container"><div class="admin-room-edit-form-header"><h2 class="admin-room-edit-form-title">Edit Room</h2> <p class="admin-room-edit-form-subtitle">Update room information</p></div> <form class="admin-room-edit-form-content"><div class="admin-room-edit-info-row"><div class="admin-room-form-group"><label class="admin-room-form-label" for="edit-room-name">Room Name *</label> <input type="text" id="edit-room-name" class="admin-room-form-input" placeholder="Enter room name" required/></div> <div class="admin-room-form-group"><label class="admin-room-form-label" for="edit-building">Building *</label> <input type="text" id="edit-building" class="admin-room-form-input" placeholder="Enter building name" required/></div> <div class="admin-room-form-group"><label class="admin-room-form-label" for="edit-floor">Floor *</label> <input type="text" id="edit-floor" class="admin-room-form-input" placeholder="e.g., 1st Floor" required/></div></div> <div class="admin-room-edit-form-actions"><button type="button" class="admin-room-cancel-button">Cancel</button> <button type="submit" class="admin-room-update-button"><!></button></div></form></div></div>'),nu=o('<div class="selected-option"><span class="material-symbols-outlined option-icon">group</span> <div class="option-content"><span class="option-name"> </span> <span class="option-description"> </span></div></div>'),ou=o('<span class="placeholder">Select a section</span>'),lu=o('<button type="button"><span class="material-symbols-outlined option-icon">group</span> <div class="option-content"><span class="option-name"> </span> <span class="option-description"> </span></div></button>'),du=o('<div class="admin-room-assign-form-section"><div class="admin-room-assign-form-container"><div class="admin-room-assign-form-header"><h2 class="admin-room-assign-form-title">Assign Room</h2> <p class="admin-room-assign-form-subtitle">Select a section to assign this room to</p></div> <form class="admin-room-assign-form-content"><div class="admin-room-assign-info-row"><div class="admin-room-form-group"><label class="admin-room-form-label" for="assign-section-select">Select Section *</label> <div><button type="button" id="assign-section-select"><!> <span class="material-symbols-outlined dropdown-arrow">expand_more</span></button> <div class="dropdown-menu"></div></div></div></div> <div class="admin-room-assign-form-actions"><button type="button" class="admin-room-cancel-button">Cancel</button> <button type="submit" class="admin-room-assign-submit-button"><!></button></div></form></div></div>'),cu=o('<div><div class="admin-room-room-header"><div class="admin-room-room-title"><h3 class="admin-room-room-name"> </h3></div> <div class="admin-room-action-buttons"><!> <a><button type="button" class="admin-room-edit-button"><span class="material-symbols-outlined"> </span></button></a> <button type="button" class="admin-room-remove-button" title="Remove Room"><span class="material-symbols-outlined">delete</span></button></div></div> <div class="admin-room-room-details"><div class="admin-room-room-location"><span class="material-symbols-outlined">location_on</span> <span> </span></div> <!> <div class="admin-room-room-created"><span class="material-symbols-outlined">schedule</span> <span> </span></div> <!></div> <!> <!></div>'),vu=o('<div class="admin-room-rooms-grid"></div>'),uu=o('<div class="admin-room-creation-form-container"><div class="admin-room-creation-form-section"><div class="admin-room-section-header"><h2 class="admin-room-section-title">Create New Room</h2> <p class="admin-room-section-subtitle">Fill in the details below to create a new room</p></div> <div class="admin-room-form-container"><form><div class="admin-room-form-row"><div class="admin-room-form-group"><label class="admin-room-form-label" for="room-name">Room Name *</label> <input type="text" id="room-name" class="admin-room-form-input" placeholder="Enter room name" required/></div> <div class="admin-room-form-group"><label class="admin-room-form-label" for="building">Building *</label> <input type="text" id="building" class="admin-room-form-input" placeholder="Enter building name" required/></div> <div class="admin-room-form-group"><label class="admin-room-form-label" for="floor">Floor *</label> <input type="text" id="floor" class="admin-room-form-input" placeholder="e.g., 1st Floor" required/></div></div> <div class="admin-room-form-actions"><button type="submit" class="admin-room-create-button"><!></button></div></form></div></div> <div class="admin-room-rooms-list-section"><div class="admin-room-section-header"><h2 class="admin-room-section-title">Existing Rooms</h2> <p class="admin-room-section-subtitle">Manage and view all rooms in the system</p></div> <!></div></div>');function mu(re,_){Nt(_,!1);const[f,S]=Rs(),T=()=>Is(qs,"$roomManagementStore",f),D=u(),y=u(),h=u(),R=u();let H=u(!1),O=u(""),te=u(""),me=u(""),b=u(null),W=u(""),A=u(""),q=u(""),J=u(!1),x=u(null),F=u(""),ve=u(!1),K=u(!1);async function Le(v=!1){try{v||qs.setLoading(!0);const l=await ut.get("/api/rooms");if(l.success)qs.updateRooms(l.data||[]);else throw new Error(l.message||"Failed to load rooms")}catch(l){console.error("Error loading rooms:",l),qs.setError("Failed to load rooms. Please try again."),qe.error("Failed to load rooms. Please try again.")}}async function ge(v=!1){try{const l=await ut.get("/api/sections?action=available-sections");if(l.success)qs.updateSections(l.data||[]);else throw new Error(l.message||"Failed to load sections")}catch(l){console.error("Error loading sections:",l),v||qe.error("Failed to load sections. Please try again.")}}const P=v=>{ms.confirm("Remove Room",`Are you sure you want to remove room ${v.name}? This action cannot be undone.`,async()=>{try{const l=await ut.delete("/api/rooms",{id:v.id});if(l.success)qs.removeRoom(v.id),qe.success(l.message);else throw new Error(l.message||"Failed to remove room")}catch(l){console.error("Error removing room:",l),qe.error("Failed to remove room. Please try again.")}},()=>{})};async function oe(){if(!e(O)||!e(te)||!e(me)){qe.warning("Please fill in all required fields.");return}s(H,!0);try{const v=await ut.post("/api/rooms",{name:e(O),building:e(te),floor:e(me)});if(v.success)qs.addRoom(v.data),qe.success(v.message),Ce();else throw new Error(v.message||"Failed to create room")}catch(v){console.error("Error creating room:",v),qe.error("Failed to create room. Please try again.")}finally{s(H,!1)}}async function se(v){const l=e(D).find(c=>c.id===v);l&&ms.confirm("Unassign Room",`Are you sure you want to unassign room "${l.name}"? This will remove all section assignments from this room.`,async()=>{await Z(v)},()=>{})}async function Z(v){try{if(!e(D).find(w=>w.id===v))return;const c=await ut.patch("/api/rooms",{roomId:v,action:"unassign"});if(c.success)await Le(),await ge(),qe.success(c.message);else throw new Error(c.message||"Failed to unassign room")}catch(l){console.error("Error unassigning room:",l),qe.error("Failed to unassign room. Please try again.")}}function Ce(){s(O,""),s(te,""),s(me,"")}function X(v){e(b)===v.id?(s(b,null),s(W,""),s(A,""),s(q,"")):(e(x)===v.id&&(s(x,null),s(F,""),s(K,!1)),s(b,v.id),s(W,v.name),s(A,v.building),s(q,v.floor))}async function C(){if(!e(W)||!e(A)||!e(q)){qe.warning("Please fill in all required fields.");return}s(J,!0);try{const v=e(D).find(c=>c.id===e(b)),l=await ut.put("/api/rooms",{id:e(b),name:e(W),building:e(A),floor:e(q),status:v.status,assignedTo:v.assignedTo});if(l.success)qs.updateRoom(e(b),l.data),qe.success(l.message),s(b,null),s(W,""),s(A,""),s(q,"");else throw new Error(l.message||"Failed to update room")}catch(v){console.error("Error updating room:",v),qe.error("Failed to update room. Please try again.")}finally{s(J,!1)}}function he(v){e(x)===v.id?(s(x,null),s(F,""),s(K,!1)):(e(b)===v.id&&(s(b,null),s(W,""),s(A,""),s(q,"")),s(x,v.id),s(F,""),s(K,!1))}function fe(){s(K,!e(K))}function E(v){s(F,v.id),s(K,!1)}async function $(){if(!e(F)){qe.warning("Please select a section.");return}s(ve,!0);try{const v=await ut.patch("/api/rooms",{roomId:e(x),sectionIds:[parseInt(e(F))],action:"assign"});if(v.success)await Le(),await ge(),qe.success(v.message),s(x,null),s(F,"");else throw new Error(v.message||"Failed to assign room")}catch(v){console.error("Error assigning room:",v),qe.error("Failed to assign room. Please try again.")}finally{s(ve,!1)}}Bt(()=>{const v=qs.getCachedData();v&&qs.init(v),Le(!!v),ge(!!v);const l=setInterval(()=>{Le(!0),ge(!0)},3e4);return()=>{clearInterval(l)}}),Na(()=>(e(D),e(y),e(h),e(R),T()),()=>{(v=>{s(D,v.rooms),s(y,v.availableSections),s(h,v.isLoading),s(R,v.error)})(T())}),ns(),os();var Y=uu(),ee=t(Y),L=r(t(ee),2),De=t(L),M=t(De),le=t(M),Pe=r(t(le),2);ka(Pe),a(le);var Oe=r(le,2),We=r(t(Oe),2);ka(We),a(Oe);var Ee=r(Oe,2),Ye=r(t(Ee),2);ka(Ye),a(Ee),a(M);var He=r(M,2),Fe=t(He),_e=t(Fe);{var we=v=>{var l=wt("Creating...");i(v,l)},Ne=v=>{var l=Zv();Ea(),i(v,l)};m(_e,v=>{e(H)?v(we):v(Ne,!1)})}a(Fe),a(He),a(De),a(L),a(ee);var Re=r(ee,2),ye=r(t(Re),2);{var ue=v=>{var l=Kv();i(v,l)},g=v=>{var l=ya(),c=na(l);{var w=ce=>{var Ae=Xv();i(ce,Ae)},G=ce=>{var Ae=vu();ea(Ae,5,()=>e(D),ke=>ke.id,(ke,I)=>{var Se=cu();let xe;var ze=t(Se),sa=t(ze),va=t(sa),La=t(va,!0);a(va),a(sa);var ae=r(sa,2),U=t(ae);{var Q=j=>{var $e=eu();N("click",$e,()=>se(e(I).id)),i(j,$e)},Ue=j=>{var $e=au(),Ie=t($e),Ve=t(Ie),pe=t(Ve,!0);a(Ve),a(Ie),a($e),p(()=>{la($e,"href",`#admin-room-room-card-${e(I),n(()=>e(I).id)??""}`),la(Ie,"title",(e(x),e(I),n(()=>e(x)===e(I).id?"Cancel Assign":"Assign Room"))),d(pe,(e(x),e(I),n(()=>e(x)===e(I).id?"close":"add_circle")))}),N("click",Ie,()=>he(e(I))),i(j,$e)};m(U,j=>{e(I),n(()=>e(I).assignedSections&&e(I).assignedSections.length>0)?j(Q):j(Ue,!1)})}var ra=r(U,2),ca=t(ra),oa=t(ca),_a=t(oa,!0);a(oa),a(ca),a(ra);var ha=r(ra,2);a(ae),a(ze);var fa=r(ze,2),Oa=t(fa),Ba=r(t(Oa),2),tt=t(Ba);a(Ba),a(Oa);var it=r(Oa,2);{var mt=j=>{var $e=tu(),Ie=r(t($e),2),Ve=t(Ie);a(Ie),a($e),p(pe=>d(Ve,`Assigned to: ${pe??""}`),[()=>(e(I),n(()=>e(I).assignedSections.map(pe=>pe.name).join(", ")))]),i(j,$e)},st=j=>{var $e=su();i(j,$e)};m(it,j=>{e(I),n(()=>e(I).assignedSections&&e(I).assignedSections.length>0)?j(mt):j(st,!1)})}var V=r(it,2),be=r(t(V),2),Je=t(be);a(be),a(V);var ga=r(V,2);{var qa=j=>{var $e=ru(),Ie=r(t($e),2),Ve=t(Ie);a(Ie),a($e),p(()=>d(Ve,`Updated: ${e(I),n(()=>e(I).updatedDate)??""}`)),i(j,$e)};m(ga,j=>{e(I),n(()=>e(I).updatedDate&&e(I).updatedDate!==e(I).createdDate)&&j(qa)})}a(fa);var aa=r(fa,2);{var Ke=j=>{var $e=iu(),Ie=t($e),Ve=r(t(Ie),2),pe=t(Ve),je=t(pe),Ze=r(t(je),2);ka(Ze),a(je);var ua=r(je,2),wa=r(t(ua),2);ka(wa),a(ua);var ma=r(ua,2),Ra=r(t(ma),2);ka(Ra),a(ma),a(pe);var za=r(pe,2),Wa=t(za),Xa=r(Wa,2),kt=t(Xa);{var Ft=pt=>{var Tt=wt("Updating...");i(pt,Tt)},Rt=pt=>{var Tt=wt("Update");i(pt,Tt)};m(kt,pt=>{e(J)?pt(Ft):pt(Rt,!1)})}a(Xa),a(za),a(Ve),a(Ie),a($e),p(()=>Xa.disabled=e(J)||!e(W)||!e(A)||!e(q)),Ta(Ze,()=>e(W),pt=>s(W,pt)),Ta(wa,()=>e(A),pt=>s(A,pt)),Ta(Ra,()=>e(q),pt=>s(q,pt)),N("click",Wa,()=>X(e(I))),N("submit",Ve,Ss(C)),i(j,$e)};m(aa,j=>{e(b),e(I),n(()=>e(b)===e(I).id)&&j(Ke)})}var ie=r(aa,2);{var Me=j=>{var $e=du(),Ie=t($e),Ve=r(t(Ie),2),pe=t(Ve),je=t(pe),Ze=r(t(je),2);let ua;var wa=t(Ze);let ma;var Ra=t(wa);{var za=pa=>{const ja=ws(()=>(e(y),e(F),n(()=>e(y).find(bt=>bt.id===e(F)))));var Za=ya(),$a=na(Za);{var Sa=bt=>{var Dt=nu(),qt=r(t(Dt),2),Mt=t(qt),as=t(Mt,!0);a(Mt);var Yt=r(Mt,2),zt=t(Yt);a(Yt),a(qt),a(Dt),p(()=>{d(as,(us(e(ja)),n(()=>e(ja).name))),d(zt,`Grade ${us(e(ja)),n(()=>e(ja).grade_level)??""} Section`)}),i(bt,Dt)};m($a,bt=>{e(ja)&&bt(Sa)})}i(pa,Za)},Wa=pa=>{var ja=ou();i(pa,ja)};m(Ra,pa=>{e(F)?pa(za):pa(Wa,!1)})}Ea(2),a(wa);var Xa=r(wa,2);ea(Xa,5,()=>e(y),pa=>pa.id,(pa,ja)=>{var Za=lu();let $a;var Sa=r(t(Za),2),bt=t(Sa),Dt=t(bt,!0);a(bt);var qt=r(bt,2),Mt=t(qt);a(qt),a(Sa),a(Za),p(as=>{$a=B(Za,1,"dropdown-option",null,$a,as),d(Dt,(e(ja),n(()=>e(ja).name))),d(Mt,`Grade ${e(ja),n(()=>e(ja).grade_level)??""} Section`)},[()=>({selected:e(F)===e(ja).id})]),N("click",Za,()=>E(e(ja))),i(pa,Za)}),a(Xa),a(Ze),a(je),a(pe);var kt=r(pe,2),Ft=t(kt),Rt=r(Ft,2),pt=t(Rt);{var Tt=pa=>{var ja=wt("Assigning");i(pa,ja)},Aa=pa=>{var ja=wt("Assign");i(pa,ja)};m(pt,pa=>{e(ve)?pa(Tt):pa(Aa,!1)})}a(Rt),a(kt),a(Ve),a(Ie),a($e),p((pa,ja)=>{ua=B(Ze,1,"custom-dropdown",null,ua,pa),ma=B(wa,1,"dropdown-trigger",null,ma,ja),Rt.disabled=e(ve)||!e(F)},[()=>({open:e(K)}),()=>({selected:e(F)})]),N("click",wa,fe),N("click",Ft,()=>he(e(I))),N("submit",Ve,Ss($)),i(j,$e)};m(ie,j=>{e(x),e(I),n(()=>e(x)===e(I).id)&&j(Me)})}a(Se),p(j=>{xe=B(Se,1,"admin-room-room-card",null,xe,j),la(Se,"id",`admin-room-room-card-${e(I),n(()=>e(I).id)??""}`),d(La,(e(I),n(()=>e(I).name))),la(ra,"href",`#admin-room-room-card-${e(I),n(()=>e(I).id)??""}`),la(ca,"title",(e(b),e(I),n(()=>e(b)===e(I).id?"Cancel Edit":"Edit Room"))),d(_a,(e(b),e(I),n(()=>e(b)===e(I).id?"close":"edit"))),d(tt,`${e(I),n(()=>e(I).building)??""}, ${e(I),n(()=>e(I).floor)??""}`),d(Je,`Created: ${e(I),n(()=>e(I).createdDate)??""}`)},[()=>({editing:e(b)===e(I).id,assigning:e(x)===e(I).id})]),N("click",ca,()=>X(e(I))),N("click",ha,()=>P(e(I))),i(ke,Se)}),a(Ae),i(ce,Ae)};m(c,ce=>{e(D),n(()=>e(D).length===0)?ce(w):ce(G,!1)},!0)}i(v,l)};m(ye,v=>{e(h)?v(ue):v(g,!1)})}a(Re),a(Y),p(()=>Fe.disabled=e(H)||!e(O)||!e(te)||!e(me)),Ta(Pe,()=>e(O),v=>s(O,v)),Ta(We,()=>e(te),v=>s(te,v)),Ta(Ye,()=>e(me),v=>s(me,v)),N("submit",De,Ss(oe)),i(re,Y),$t(),S()}const dr="sectionsCache",pu=180*1e3,Ls=(()=>{const re=cr([]),_=cr(!1),f=cr(null),S=()=>{try{const W=localStorage.getItem(dr);if(!W)return null;const A=JSON.parse(W);return Date.now()-A.timestamp>pu?(localStorage.removeItem(dr),null):A.sections}catch(W){return console.error("Error reading sections cache:",W),localStorage.removeItem(dr),null}},T=W=>{try{const A={sections:W,timestamp:Date.now()};localStorage.setItem(dr,JSON.stringify(A))}catch(A){console.error("Error setting sections cache:",A)}},D=()=>{try{localStorage.removeItem(dr)}catch(W){console.error("Error clearing sections cache:",W)}},y=()=>{const W=S();return W?(re.set(W),!0):!1},h=(W,A=!1)=>{re.set(W),f.set(null),A||_.set(!1),T(W)},R=(W,A=!1)=>{A||_.set(W)},H=W=>{f.set(W),_.set(!1)},O=async(W=!1)=>{try{R(!0,W);const A=await fetch("/api/sections");if(!A.ok)throw new Error(`HTTP error! status: ${A.status}`);const q=await A.json();if(!q.success||!q.data)throw new Error("Invalid API response structure");const J=q.data.map(x=>({...x,students:x.students||[],adviser:x.adviser||null}));h(J,W)}catch(A){console.error("Error loading sections:",A),H(A.message)}finally{R(!1,!1)}},te=W=>{re.update(A=>{const q=[...A,W];return T(q),q})},me=(W,A)=>{re.update(q=>{const J=q.map(x=>x.id===W?{...x,...A}:x);return T(J),J})},b=W=>{re.update(A=>{const q=A.filter(J=>J.id!==W);return T(q),q})};return{sections:{subscribe:re.subscribe},isLoadingSections:{subscribe:_.subscribe},sectionsError:{subscribe:f.subscribe},initSections:y,loadSections:O,updateSections:h,setLoadingSections:R,setSectionsError:H,addSection:te,updateSection:me,removeSection:b,clearSectionsCache:D}})();var _u=o('<div class="sectionmgmt-selected-option"><span class="material-symbols-outlined sectionmgmt-option-icon">school</span> <div class="sectionmgmt-option-content"><span class="sectionmgmt-option-name"> </span></div></div>'),fu=o('<span class="sectionmgmt-placeholder">Select grade level</span>'),gu=o('<button type="button"><span class="material-symbols-outlined sectionmgmt-option-icon">school</span> <div class="sectionmgmt-option-content"><span class="sectionmgmt-option-name"> </span> <span class="sectionmgmt-option-description"> </span></div></button>'),bu=o('<div class="sectionmgmt-selected-option"><span class="material-symbols-outlined sectionmgmt-option-icon">person</span> <div class="sectionmgmt-option-content"><span class="sectionmgmt-option-name"> </span></div></div>'),hu=o('<span class="sectionmgmt-placeholder">Select advisory teacher</span>'),yu=o('<span class="sectionmgmt-placeholder">Select grade level first</span>'),wu=o('<div class="admin-section-loading"><span class="section-loader"></span> <p>Loading teachers...</p></div>'),Su=o('<div class="sectionmgmt-no-results"><span class="material-symbols-outlined">person_off</span> <span>No available teachers found</span></div>'),xu=o('<button type="button"><span class="material-symbols-outlined sectionmgmt-option-icon">person</span> <div class="sectionmgmt-option-content"><span class="sectionmgmt-option-name"> </span> <span class="sectionmgmt-option-description"> </span></div></button>'),ku=o('<span class="sectionmgmt-placeholder">Add students to section</span>'),Du=o('<span class="sectionmgmt-placeholder">Select grade level first</span>'),Tu=o('<button type="button" class="sectionmgmt-select-all-btn"><span class="material-symbols-outlined"> </span></button>'),Au=o('<div class="admin-section-loading"><span class="section-loader"></span> <p>Loading students...</p></div>'),ju=o('<div class="sectionmgmt-no-results"><span class="material-symbols-outlined">person_off</span> <span>No available students found for this grade level</span></div>'),Cu=o('<button type="button"><div class="sectionmgmt-student-checkbox"><span class="material-symbols-outlined"> </span></div> <span class="material-symbols-outlined sectionmgmt-option-icon">school</span> <div class="sectionmgmt-option-content"><span class="sectionmgmt-option-name"> </span> <span class="sectionmgmt-option-description"> </span></div></button>'),Nu=o('<div class="sectionmgmt-selected-student-chip"><span class="sectionmgmt-student-name"> </span> <span class="sectionmgmt-student-id"> </span> <button type="button" class="sectionmgmt-remove-student"><span class="material-symbols-outlined">close</span></button></div>'),$u=o('<div class="sectionmgmt-selected-students"><div class="sectionmgmt-selected-students-header"><span class="sectionmgmt-selected-count"> </span></div> <div class="sectionmgmt-selected-students-list"></div></div>'),qu=o('<span class="material-symbols-outlined">groups</span> Create Section',1),Lu=o('<div class="admin-section-loading"><span class="section-loader"></span> <p>Loading sections...</p></div>'),Eu=o('<div class="sectionmgmt-section-updated"><span class="material-symbols-outlined">update</span> <span> </span></div>'),Fu=o('<div class="sectionmgmt-selected-option"><span class="material-symbols-outlined sectionmgmt-option-icon">person</span> <div class="sectionmgmt-option-content"><span class="sectionmgmt-option-name"> </span></div></div>'),Mu=o('<span class="sectionmgmt-placeholder">Select section adviser</span>'),Gu=o('<button type="button"><span class="material-symbols-outlined sectionmgmt-option-icon">person</span> <div class="sectionmgmt-option-content"><span class="sectionmgmt-option-name"> </span> <span class="sectionmgmt-option-description"> </span></div></button>'),Iu=o('<div class="sectionmgmt-no-results"><span class="material-symbols-outlined">person_off</span> <span>No available advisers found</span></div>'),Pu=o('<button type="button" class="sectionmgmt-select-all-btn"><span class="material-symbols-outlined"> </span></button>'),Ru=o('<button type="button"><span class="material-symbols-outlined sectionmgmt-option-icon"> </span> <div class="sectionmgmt-option-content"><span class="sectionmgmt-option-name"> </span> <span class="sectionmgmt-option-description"> </span></div></button>'),Ou=o('<div class="sectionmgmt-no-results"><span class="material-symbols-outlined">person_off</span> <span>No available students found</span></div>'),Uu=o('<div class="sectionmgmt-selected-student-chip"><span class="sectionmgmt-student-name"> </span> <span class="sectionmgmt-student-id"> </span> <button type="button" class="sectionmgmt-remove-student"><span class="material-symbols-outlined">close</span></button></div>'),Wu=o('<div class="sectionmgmt-selected-students"><div class="sectionmgmt-selected-students-header"><span class="sectionmgmt-selected-count"> </span></div> <div class="sectionmgmt-selected-students-list"></div></div>'),Yu=o('<div class="sectionmgmt-edit-form-section"><div class="sectionmgmt-edit-form-container" id="section-edit-form-container"><div class="sectionmgmt-edit-form-header"><h2 class="sectionmgmt-edit-form-title">Edit Section</h2> <p class="sectionmgmt-edit-form-subtitle">Update section information and manage students</p></div> <form class="sectionmgmt-edit-form-content"><div class="sectionmgmt-edit-info-row"><div class="sectionmgmt-form-group"><label class="sectionmgmt-form-label" for="edit-section-name">Section Name</label> <input type="text" id="edit-section-name" class="sectionmgmt-form-input" placeholder="Enter section name (e.g., Mabini, Rizal, Bonifacio)" required/></div> <div class="sectionmgmt-form-group"><label class="sectionmgmt-form-label" for="edit-section-adviser">Section Adviser</label> <div><button type="button" id="edit-section-adviser"><!> <span class="material-symbols-outlined sectionmgmt-dropdown-arrow">expand_more</span></button> <div class="sectionmgmt-dropdown-menu"><div class="sectionmgmt-search-container"><input type="text" class="sectionmgmt-search-input" placeholder="Search advisers..."/> <span class="material-symbols-outlined sectionmgmt-search-icon">search</span></div> <!> <!></div></div></div></div> <div class="sectionmgmt-form-group"><label class="sectionmgmt-form-label" for="edit-students"> </label> <div><button type="button" id="edit-students"><span class="sectionmgmt-placeholder"> </span> <span class="material-symbols-outlined sectionmgmt-dropdown-arrow">expand_more</span></button> <div class="sectionmgmt-dropdown-menu"><div class="sectionmgmt-search-container"><!> <input type="text" class="sectionmgmt-search-input" placeholder="Search students..."/> <span>search</span></div> <!> <!></div></div> <!></div> <div class="sectionmgmt-edit-form-actions"><button type="button" class="sectionmgmt-cancel-button">Cancel</button> <button type="submit" class="sectionmgmt-submit-button"><!></button></div></form></div></div>'),Qu=o('<div><div class="sectionmgmt-section-header-card"><div class="sectionmgmt-section-title"><h3 class="sectionmgmt-section-name"> </h3></div> <div class="sectionmgmt-action-buttons"><a><button type="button" class="sectionmgmt-edit-button"><span class="material-symbols-outlined"> </span></button></a> <button type="button" class="sectionmgmt-remove-button" title="Remove Section"><span class="material-symbols-outlined">delete</span></button></div></div> <div class="sectionmgmt-section-details"><div class="sectionmgmt-section-adviser"><span class="material-symbols-outlined">person_book</span> <span> </span></div> <div class="sectionmgmt-section-students"><span class="material-symbols-outlined">group</span> <span> </span></div> <div class="sectionmgmt-section-room"><span class="material-symbols-outlined">location_on</span> <span> </span></div> <div class="sectionmgmt-section-created"><span class="material-symbols-outlined">calendar_today</span> <span> </span></div> <!></div> <!></div>'),Vu=o('<div class="sectionmgmt-sections-empty"><span class="material-symbols-outlined">school</span> <p>No sections found</p></div>'),Ju=o("<!> <!>",1),Hu=o('<div class="sectionmgmt-form-container"><div class="sectionmgmt-creation-form-section"><div class="sectionmgmt-section-header"><h2 class="sectionmgmt-section-title">Create New Section</h2> <p class="sectionmgmt-section-subtitle">Fill in the details below to create a new class section</p></div> <div class="sectionmgmt-form-container"><form><div class="sectionmgmt-basic-info-row"><div class="sectionmgmt-form-group"><label class="sectionmgmt-form-label" for="section-name">Section Name *</label> <input type="text" id="section-name" class="sectionmgmt-form-input" placeholder="Enter section name (e.g., Mabini, Rizal, Bonifacio)" required/></div> <div class="sectionmgmt-form-group"><label class="sectionmgmt-form-label" for="school-year">School Year</label> <input type="text" id="school-year" class="sectionmgmt-form-input" readonly=""/></div></div> <div class="sectionmgmt-create-info-row"><div class="sectionmgmt-form-group"><label class="sectionmgmt-form-label" for="grade-level">Grade Level *</label> <div><button type="button" id="grade-level"><!> <span class="material-symbols-outlined sectionmgmt-dropdown-arrow">expand_more</span></button> <div class="sectionmgmt-dropdown-menu"></div></div></div> <div class="sectionmgmt-form-group"><label class="sectionmgmt-form-label" for="adviser">Advisory Teacher (Optional)</label> <div><button type="button" id="adviser"><!> <span class="material-symbols-outlined sectionmgmt-dropdown-arrow">expand_more</span></button> <div class="sectionmgmt-dropdown-menu"><div class="sectionmgmt-search-container"><input type="text" class="sectionmgmt-search-input" placeholder="Search teachers..."/> <span class="material-symbols-outlined sectionmgmt-search-icon">search</span></div> <!></div></div> <p class="sectionmgmt-form-help">Only teachers without assigned sections are shown. Each teacher can only advise one section.</p></div></div> <div class="sectionmgmt-form-group"><label class="sectionmgmt-form-label" for="students">Students (Optional)</label> <div><button type="button" id="students"><!> <span class="material-symbols-outlined sectionmgmt-dropdown-arrow">expand_more</span></button> <div class="sectionmgmt-dropdown-menu"><div class="sectionmgmt-search-container"><!> <input type="text" class="sectionmgmt-search-input" placeholder="Search students..."/> <span>search</span></div> <!></div></div> <p class="sectionmgmt-form-help">Only students without assigned sections are shown. Select students for the chosen grade level.</p> <!></div> <div class="sectionmgmt-form-actions"><button type="submit"><!></button></div></form></div></div> <div class="sectionmgmt-recent-sections-section"><div class="sectionmgmt-section-header"><div class="sectionmgmt-title-with-refresh"><h2 class="sectionmgmt-section-title">All Sections</h2></div> <p class="sectionmgmt-section-subtitle">Recently created sections in the system</p></div> <div class="sectionmgmt-sections-grid"><!></div></div></div>');function Bu(re,_){Nt(_,!1);const[f,S]=Rs(),T=()=>Is(e(h),"$isLoadingSections",f),D=()=>Is(e(y),"$sections",f),y=u(),h=u(),R=u(),H=u(),O=u(),te=u(),me=u(),b=u(),W=u(),A=u();let q=u(!1),J=u(""),x=u(""),F=u("2024-2025"),ve=u(null),K=u([]),Le=u(!1),ge=u(!1),P=u(!1),oe=u(""),se=u(""),Z=u(null),Ce=u(""),X=u(null),C=u([]),he=u(!1),fe=u(!1),E=u(!1),$=u(""),Y=u(""),ee=u([]),L=u([]),De=u(!1),M=u(!1);Bt(async()=>{const z=Ls.initSections();await Ls.loadSections(z),await le()});async function le(z=null){try{s(De,!0);const Te=z?`&teacherGradeLevel=${z}`:"",Be=await ut.get(`/api/sections?action=available-teachers&schoolYear=${e(F)}${Te}`);if(Be.success&&(s(ee,Be.data.map(Ca=>{const Ya=e(O)&&e(O).length>0?e(O).some(Da=>Da.adviser_id===Ca.id):!1;return{id:Ca.id,name:Ca.full_name,employeeId:Ca.account_number,subject:Ca.subject_code||"No Subject",subject_grade_level:Ca.subject_grade_level,hasSection:Ya}})),e(O)&&e(O).length>0))for(const Ca of e(O))Ca.adviser_id&&!e(ee).find(Ya=>Ya.id===Ca.adviser_id)&&e(ee).push({id:Ca.adviser_id,name:Ca.adviser_name,employeeId:Ca.adviser_account_number||"N/A",subject:Ca.adviser_subject||"No Subject",subject_grade_level:Ca.grade_level,hasSection:!0})}catch(Te){console.error("Error loading teachers:",Te),qe.error("Failed to load available teachers")}finally{s(De,!1)}}async function Pe(z){try{s(M,!0);const Te=await ut.get(`/api/sections?action=available-students&gradeLevel=${z}&schoolYear=${e(F)}`);Te.success&&s(L,Te.data.map(Be=>({id:Be.id,name:Be.full_name,studentId:Be.account_number,grade:Be.grade_level,hasSection:!1})))}catch(Te){console.error("Error loading students:",Te),qe.error("Failed to load available students")}finally{s(M,!1)}}async function Oe(z){try{const Te=await ut.get(`/api/sections?action=section-students&sectionId=${z}`);return Te.success?Te.data.map(Be=>({id:Be.id,name:Be.full_name,studentId:Be.account_number,grade:Be.grade_level})):[]}catch(Te){return console.error("Error loading section students:",Te),[]}}function We(){s(E,!e(E)),s(fe,!1)}function Ee(z){e(C).findIndex(Be=>Be.id===z.id)>-1?s(C,e(C).filter(Be=>Be.id!==z.id)):s(C,[...e(C),z])}function Ye(z){s(C,e(C).filter(Te=>Te.id!==z.id))}function He(){if(e(C).length===e(A).length&&e(A).every(z=>e(C).some(Te=>Te.id===z.id)))s(C,e(C).filter(z=>!e(A).some(Te=>Te.id===z.id)));else{const z=e(A).filter(Te=>!e(C).some(Be=>Be.id===Te.id));s(C,[...e(C),...z])}}const Fe=[{id:"7",name:"Grade 7",description:"First Year Junior High School"},{id:"8",name:"Grade 8",description:"Second Year Junior High School"},{id:"9",name:"Grade 9",description:"Third Year Junior High School"},{id:"10",name:"Grade 10",description:"Fourth Year Junior High School"}];function _e(){s(Le,!e(Le)),s(ge,!1),s(P,!1)}function we(){s(ge,!e(ge)),s(Le,!1),s(P,!1)}function Ne(){s(P,!e(P)),s(Le,!1),s(ge,!1)}function Re(z){s(x,z.id),s(Le,!1),s(K,[]),Pe(z.id),le(z.id)}function ye(z){s(ve,z),s(ge,!1),s(oe,"")}function ue(z){e(K).findIndex(Be=>Be.id===z.id)>-1?s(K,e(K).filter(Be=>Be.id!==z.id)):s(K,[...e(K),z])}function g(z){s(K,e(K).filter(Te=>Te.id!==z))}function v(){if(e(K).length===e(b).length&&e(b).every(z=>e(K).some(Te=>Te.id===z.id)))s(K,e(K).filter(z=>!e(b).some(Te=>Te.id===z.id)));else{const z=e(b).filter(Te=>!e(K).some(Be=>Be.id===Te.id));s(K,[...e(K),...z])}}async function l(){if(!e(J)||!e(x)){qe.error("Please fill in section name and grade level.");return}s(q,!0);try{const z=await ut.post("/api/sections",{sectionName:e(J),gradeLevel:parseInt(e(x)),schoolYear:e(F),adviserId:e(ve)?.id||null,studentIds:e(K).map(Te=>Te.id),roomId:null});z.success?(qe.success(z.message),s(J,""),s(x,""),s(ve,null),s(K,[]),s(oe,""),s(se,""),s(L,[]),Ls.addSection(z.data),await le()):qe.error(z.error||"Failed to create section")}catch(z){console.error("Error creating section:",z),qe.error("Failed to create section. Please try again.")}finally{s(q,!1)}}async function c(z){e(Z)===z.id?(s(Z,null),s(Ce,""),s(X,null),s(C,[]),s($,""),s(Y,""),s(fe,!1),s(E,!1)):(s(Z,z.id),s(Ce,z.name),s(X,e(ee).find(Te=>Te.id===z.adviser_id)),!e(X)&&z.adviser_id&&(s(X,{id:z.adviser_id,name:"Loading...",employeeId:"",subject:"",hasSection:!0}),await le(z.grade_level),s(X,e(ee).find(Te=>Te.id===z.adviser_id)||e(X))),s(C,await Oe(z.id)),s(I,[...e(C)]),s(Y,""),await Pe(z.grade_level))}async function w(){if(!e(Ce)||!e(X)){qe.error("Please fill in all required fields.");return}s(he,!0);try{const z={sectionId:e(Z),sectionName:e(Ce),adviserId:e(X).id,studentIds:e(C).map(Be=>Be.id),roomId:null},Te=await ut.put("/api/sections",z);Te.success?(qe.success(Te.message),s(Z,null),s(Ce,""),s(X,null),s(C,[]),s($,""),s(Y,""),s(fe,!1),s(E,!1),Ls.updateSection(e(Z),Te.data),await Ls.loadSections(!0),await le()):qe.error(Te.error||"Failed to update section")}catch(z){console.error("Error updating section:",z),qe.error("Failed to update section. Please try again.")}finally{s(he,!1)}}function G(){s(fe,!e(fe)),s(E,!1)}async function ce(z){const Te=z.id;s(X,z),s(fe,!1),s($,""),await le(),s(X,e(ee).find(Be=>Be.id===Te)||z)}function Ae(z){ms.confirm("Delete Section",`<p>Are you sure you want to permanently delete section <strong>"${z.name}"</strong> (Grade ${z.grade_level})?</p>
			<p class="sectionmgmt-warning">This action will:</p>
			<ul class="sectionmgmt-warning-list">
				<li>Permanently delete the section and all its data</li>
				<li>Remove all students from this section</li>
				<li>Free up the advisory teacher for other sections</li>
				<li>This action cannot be undone</li>
			</ul>`,()=>ke(z),null,{size:"medium"})}async function ke(z){try{const Te=await ut.delete(`/api/sections?sectionId=${z.id}`);Te.success?(qe.success("Section deleted successfully"),Ls.removeSection(z.id)):qe.error(Te.error||"Failed to delete section")}catch(Te){console.error("Error deleting section:",Te),qe.error("An error occurred while deleting the section")}}let I=u([]);Na(()=>(e(y),e(h),e(R),Ls),()=>{Qr(s(y,Ls.sections),"$sections",f),Qr(s(h,Ls.isLoadingSections),"$isLoadingSections",f),s(R,Ls.sectionsError)}),Na(()=>T(),()=>{s(H,T())}),Na(()=>D(),()=>{s(O,D())}),Na(()=>e(x),()=>{s(te,Fe.find(z=>z.id===e(x)))}),Na(()=>(e(ee),e(oe)),()=>{s(me,e(ee).filter(z=>!z.hasSection&&z.name.toLowerCase().includes(e(oe).toLowerCase())))}),Na(()=>(e(L),e(x),e(se)),()=>{s(b,e(L).filter(z=>!z.hasSection&&z.grade===e(x)&&z.name.toLowerCase().includes(e(se).toLowerCase())))}),Na(()=>(e(x),e(K),e(ve)),()=>{e(x)&&(s(K,e(K).filter(z=>z.grade===e(x))),e(ve)&&e(ve).subject_grade_level&&e(ve).subject_grade_level!==parseInt(e(x))&&s(ve,null))}),Na(()=>(e(ee),e(Z),e(O),e($)),()=>{s(W,e(ee).filter(z=>{const Te=e(Z)&&e(O).find(ta=>ta.id===e(Z))?.adviser_id,Be=!z.hasSection||z.id===Te,Ya=(e(Z)&&e(O).find(ta=>ta.id===e(Z)))?.grade_level,Da=!Ya||!z.subject_grade_level||z.subject_grade_level===Ya;return Be&&Da&&z.name.toLowerCase().includes(e($).toLowerCase())}))}),Na(()=>(e(L),e(I),e(C),e(Y)),()=>{s(A,(()=>{const z=[...e(L)];return e(I).forEach(Te=>{z.some(Be=>Be.id===Te.id)||z.push({...Te,hasSection:!0})}),z.filter(Te=>{const Be=!Te.hasSection||e(C).some(Ya=>Ya.id===Te.id)||e(I).some(Ya=>Ya.id===Te.id),Ca=Te.name.toLowerCase().includes(e(Y).toLowerCase());return Be&&Ca})})())}),ns(),os();var Se=Hu(),xe=t(Se),ze=r(t(xe),2),sa=t(ze),va=t(sa),La=t(va),ae=r(t(La),2);ka(ae),a(La);var U=r(La,2),Q=r(t(U),2);ka(Q),a(U),a(va);var Ue=r(va,2),ra=t(Ue),ca=r(t(ra),2);let oa;var _a=t(ca);let ha;var fa=t(_a);{var Oa=z=>{var Te=_u(),Be=r(t(Te),2),Ca=t(Be),Ya=t(Ca,!0);a(Ca),a(Be),a(Te),p(()=>d(Ya,(e(te),n(()=>e(te).name)))),i(z,Te)},Ba=z=>{var Te=fu();i(z,Te)};m(fa,z=>{e(te)?z(Oa):z(Ba,!1)})}Ea(2),a(_a);var tt=r(_a,2);ea(tt,5,()=>Fe,z=>z.id,(z,Te)=>{var Be=gu();let Ca;var Ya=r(t(Be),2),Da=t(Ya),ta=t(Da,!0);a(Da);var ct=r(Da,2),lt=t(ct,!0);a(ct),a(Ya),a(Be),p(Fa=>{Ca=B(Be,1,"sectionmgmt-dropdown-option",null,Ca,Fa),d(ta,(e(Te),n(()=>e(Te).name))),d(lt,(e(Te),n(()=>e(Te).description)))},[()=>({selected:e(x)===e(Te).id})]),N("click",Be,()=>Re(e(Te))),i(z,Be)}),a(tt),a(ca),a(ra);var it=r(ra,2),mt=r(t(it),2);let st;var V=t(mt);let be;var Je=t(V);{var ga=z=>{var Te=bu(),Be=r(t(Te),2),Ca=t(Be),Ya=t(Ca,!0);a(Ca),a(Be),a(Te),p(()=>d(Ya,(e(ve),n(()=>e(ve).name)))),i(z,Te)},qa=z=>{var Te=ya(),Be=na(Te);{var Ca=Da=>{var ta=hu();i(Da,ta)},Ya=Da=>{var ta=yu();i(Da,ta)};m(Be,Da=>{e(x)?Da(Ca):Da(Ya,!1)},!0)}i(z,Te)};m(Je,z=>{e(ve)?z(ga):z(qa,!1)})}Ea(2),a(V);var aa=r(V,2),Ke=t(aa),ie=t(Ke);ka(ie),Ea(2),a(Ke);var Me=r(Ke,2);{var j=z=>{var Te=wu();i(z,Te)},$e=z=>{var Te=ya(),Be=na(Te);{var Ca=Da=>{var ta=Su();i(Da,ta)},Ya=Da=>{var ta=ya(),ct=na(ta);ea(ct,1,()=>e(me),lt=>lt.id,(lt,Fa)=>{var dt=xu();let ht;var It=r(t(dt),2),Ia=t(It),Pa=t(Ia,!0);a(Ia);var Qa=r(Ia,2),Ua=t(Qa,!0);a(Qa),a(It),a(dt),p(et=>{ht=B(dt,1,"sectionmgmt-dropdown-option",null,ht,et),d(Pa,(e(Fa),n(()=>e(Fa).name))),d(Ua,(e(Fa),n(()=>e(Fa).employeeId)))},[()=>({selected:e(ve)?.id===e(Fa).id})]),N("click",dt,()=>ye(e(Fa))),i(lt,dt)}),i(Da,ta)};m(Be,Da=>{e(me),n(()=>e(me).length===0)?Da(Ca):Da(Ya,!1)},!0)}i(z,Te)};m(Me,z=>{e(De)?z(j):z($e,!1)})}a(aa),a(mt),Ea(2),a(it),a(Ue);var Ie=r(Ue,2),Ve=r(t(Ie),2);let pe;var je=t(Ve);let Ze;var ua=t(je);{var wa=z=>{var Te=ku();i(z,Te)},ma=z=>{var Te=Du();i(z,Te)};m(ua,z=>{e(x)?z(wa):z(ma,!1)})}Ea(2),a(je);var Ra=r(je,2),za=t(Ra),Wa=t(za);{var Xa=z=>{const Te=ws(()=>(e(b),e(K),n(()=>e(b).every(Da=>e(K).some(ta=>ta.id===Da.id)))));var Be=Tu(),Ca=t(Be),Ya=t(Ca,!0);a(Ca),a(Be),p(()=>{la(Be,"title",`${e(Te)?"Unselect All":"Select All"} (${e(b),n(()=>e(b).length)??""})`),d(Ya,e(Te)?"deselect":"select_all")}),N("click",Be,v),i(z,Be)};m(Wa,z=>{e(b),n(()=>e(b).length>0)&&z(Xa)})}var kt=r(Wa,2);ka(kt);var Ft=r(kt,2);let Rt;a(za);var pt=r(za,2);{var Tt=z=>{var Te=Au();i(z,Te)},Aa=z=>{var Te=ya(),Be=na(Te);{var Ca=Da=>{var ta=ju();i(Da,ta)},Ya=Da=>{var ta=ya(),ct=na(ta);ea(ct,1,()=>e(b),lt=>lt.id,(lt,Fa)=>{var dt=Cu();let ht;var It=t(dt),Ia=t(It),Pa=t(Ia,!0);a(Ia),a(It);var Qa=r(It,4),Ua=t(Qa),et=t(Ua,!0);a(Ua);var yt=r(Ua,2),At=t(yt);a(yt),a(Qa),a(dt),p((jt,k)=>{ht=B(dt,1,"sectionmgmt-dropdown-option sectionmgmt-student-option",null,ht,jt),d(Pa,k),d(et,(e(Fa),n(()=>e(Fa).name))),d(At,`Grade ${e(Fa),n(()=>e(Fa).grade)??""} • ${e(Fa),n(()=>e(Fa).studentId)??""}`)},[()=>({selected:e(K).some(jt=>jt.id===e(Fa).id)}),()=>(e(K),e(Fa),n(()=>e(K).some(jt=>jt.id===e(Fa).id)?"check_box":"check_box_outline_blank"))]),N("click",dt,()=>ue(e(Fa))),i(lt,dt)}),i(Da,ta)};m(Be,Da=>{e(b),n(()=>e(b).length===0)?Da(Ca):Da(Ya,!1)},!0)}i(z,Te)};m(pt,z=>{e(M)?z(Tt):z(Aa,!1)})}a(Ra),a(Ve);var pa=r(Ve,4);{var ja=z=>{var Te=$u(),Be=t(Te),Ca=t(Be),Ya=t(Ca);a(Ca),a(Be);var Da=r(Be,2);ea(Da,5,()=>e(K),ta=>ta.id,(ta,ct)=>{var lt=Nu(),Fa=t(lt),dt=t(Fa,!0);a(Fa);var ht=r(Fa,2),It=t(ht,!0);a(ht);var Ia=r(ht,2);a(lt),p(()=>{d(dt,(e(ct),n(()=>e(ct).name))),d(It,(e(ct),n(()=>e(ct).studentId))),la(Ia,"aria-label",`Remove ${e(ct),n(()=>e(ct).name)??""}`)}),N("click",Ia,()=>g(e(ct).id)),i(ta,lt)}),a(Da),a(Te),p(()=>d(Ya,`${e(K),n(()=>e(K).length)??""} student${e(K),n(()=>e(K).length!==1?"s":"")??""} selected`)),i(z,Te)};m(pa,z=>{e(K),n(()=>e(K).length>0)&&z(ja)})}a(Ie);var Za=r(Ie,2),$a=t(Za);let Sa;var bt=t($a);{var Dt=z=>{var Te=wt("Creating...");i(z,Te)},qt=z=>{var Te=qu();Ea(),i(z,Te)};m(bt,z=>{e(q)?z(Dt):z(qt,!1)})}a($a),a(Za),a(sa),a(ze),a(xe);var Mt=r(xe,2),as=r(t(Mt),2),Yt=t(as);{var zt=z=>{var Te=Lu();i(z,Te)},ss=z=>{var Te=Ju(),Be=na(Te);ea(Be,1,()=>e(O),Da=>Da.id,(Da,ta)=>{var ct=Qu();let lt;var Fa=t(ct),dt=t(Fa),ht=t(dt),It=t(ht);a(ht),a(dt);var Ia=r(dt,2),Pa=t(Ia),Qa=t(Pa),Ua=t(Qa),et=t(Ua,!0);a(Ua),a(Qa),a(Pa);var yt=r(Pa,2);a(Ia),a(Fa);var At=r(Fa,2),jt=t(At),k=r(t(jt),2),de=t(k,!0);a(k),a(jt);var Ge=r(jt,2),ia=r(t(Ge),2),ne=t(ia);a(ia),a(Ge);var Qe=r(Ge,2),Xe=r(t(Qe),2),Ga=t(Xe,!0);a(Xe),a(Qe);var vt=r(Qe,2),_t=r(t(vt),2),da=t(_t);a(_t),a(vt);var ba=r(vt,2);{var nt=ot=>{var xt=Eu(),Va=r(t(xt),2),ft=t(Va);a(Va),a(xt),p(Lt=>d(ft,`Updated: ${Lt??""}`),[()=>(e(ta),n(()=>new Date(e(ta).updated_at).toLocaleDateString()))]),i(ot,xt)};m(ba,ot=>{e(ta),n(()=>e(ta).updated_at&&e(ta).updated_at!==e(ta).created_at)&&ot(nt)})}a(At);var Ka=r(At,2);{var Ma=ot=>{var xt=Yu(),Va=t(xt),ft=r(t(Va),2),Lt=t(ft),Zt=t(Lt),xs=r(t(Zt),2);ka(xs),a(Zt);var ps=r(Zt,2),$s=r(t(ps),2);let Fs;var ks=t($s);let Ja;var at=t(ks);{var St=rt=>{var gt=Fu(),Ha=r(t(gt),2),Ut=t(Ha),is=t(Ut,!0);a(Ut),a(Ha),a(gt),p(()=>d(is,(e(X),n(()=>e(X).name)))),i(rt,gt)},Qt=rt=>{var gt=Mu();i(rt,gt)};m(at,rt=>{e(X)?rt(St):rt(Qt,!1)})}Ea(2),a(ks);var Ht=r(ks,2),Vt=t(Ht),Xt=t(Vt);ka(Xt),Ea(2),a(Vt);var es=r(Vt,2);ea(es,1,()=>e(W),rt=>rt.id,(rt,gt)=>{var Ha=Gu();let Ut;var is=r(t(Ha),2),ys=t(is),fs=t(ys,!0);a(ys);var ls=r(ys,2),gs=t(ls,!0);a(ls),a(is),a(Ha),p(As=>{Ut=B(Ha,1,"sectionmgmt-dropdown-option",null,Ut,As),d(fs,(e(gt),n(()=>e(gt).name))),d(gs,(e(gt),n(()=>e(gt).employeeId)))},[()=>({selected:e(X)?.id===e(gt).id})]),N("click",Ha,()=>ce(e(gt))),i(rt,Ha)});var Pt=r(es,2);{var hs=rt=>{var gt=Iu();i(rt,gt)};m(Pt,rt=>{e(W),n(()=>e(W).length===0)&&rt(hs)})}a(Ht),a($s),a(ps),a(Lt);var cs=r(Lt,2),_s=t(cs),Ot=t(_s);a(_s);var rs=r(_s,2);let Ds;var Gt=t(rs);let Et;var Kt=t(Gt),ts=t(Kt,!0);a(Kt),Ea(2),a(Gt);var Hs=r(Gt,2),Us=t(Hs),tr=t(Us);{var Bs=rt=>{const gt=ws(()=>(e(A),e(C),n(()=>e(A).every(ys=>e(C).some(fs=>fs.id===ys.id)))));var Ha=Pu(),Ut=t(Ha),is=t(Ut,!0);a(Ut),a(Ha),p(()=>{la(Ha,"title",`${e(gt)?"Unselect All":"Select All"} (${e(A),n(()=>e(A).length)??""})`),d(is,e(gt)?"deselect":"select_all")}),N("click",Ha,He),i(rt,Ha)};m(tr,rt=>{e(A),n(()=>e(A).length>0)&&rt(Bs)})}var Ws=r(tr,2);ka(Ws);var ur=r(Ws,2);let Ys;a(Us);var sr=r(Us,2);ea(sr,1,()=>e(A),rt=>rt.id,(rt,gt)=>{var Ha=Ru();let Ut;var is=t(Ha),ys=t(is,!0);a(is);var fs=r(is,2),ls=t(fs),gs=t(ls,!0);a(ls);var As=r(ls,2),nr=t(As);a(As),a(fs),a(Ha),p((js,or)=>{Ut=B(Ha,1,"sectionmgmt-dropdown-option",null,Ut,js),d(ys,or),d(gs,(e(gt),n(()=>e(gt).name))),d(nr,`${e(gt),n(()=>e(gt).studentId)??""} • Grade ${e(gt),n(()=>e(gt).grade)??""}`)},[()=>({selected:e(C).some(js=>js.id===e(gt).id)}),()=>(e(C),e(gt),n(()=>e(C).some(js=>js.id===e(gt).id)?"check_box":"check_box_outline_blank"))]),N("click",Ha,()=>Ee(e(gt))),i(rt,Ha)});var mr=r(sr,2);{var zs=rt=>{var gt=Ou();i(rt,gt)};m(mr,rt=>{e(A),n(()=>e(A).length===0)&&rt(zs)})}a(Hs),a(rs);var pr=r(rs,2);{var kr=rt=>{var gt=Wu(),Ha=t(gt),Ut=t(Ha),is=t(Ut);a(Ut),a(Ha);var ys=r(Ha,2);ea(ys,5,()=>e(C),fs=>fs.id,(fs,ls)=>{var gs=Uu(),As=t(gs),nr=t(As,!0);a(As);var js=r(As,2),or=t(js,!0);a(js);var lr=r(js,2);a(gs),p(()=>{d(nr,(e(ls),n(()=>e(ls).name))),d(or,(e(ls),n(()=>e(ls).studentId))),la(lr,"aria-label",`Remove ${e(ls),n(()=>e(ls).name)??""}`)}),N("click",lr,()=>Ye(e(ls))),i(fs,gs)}),a(ys),a(gt),p(()=>d(is,`${e(C),n(()=>e(C).length)??""} student${e(C),n(()=>e(C).length!==1?"s":"")??""} selected`)),i(rt,gt)};m(pr,rt=>{e(C),n(()=>e(C).length>0)&&rt(kr)})}a(cs);var rr=r(cs,2),Qs=t(rr),ir=r(Qs,2),Zs=t(ir);{var _r=rt=>{var gt=wt("Updating...");i(rt,gt)},Dr=rt=>{var gt=wt("Update");i(rt,gt)};m(Zs,rt=>{e(he)?rt(_r):rt(Dr,!1)})}a(ir),a(rr),a(ft),a(Va),a(xt),p((rt,gt,Ha,Ut,is)=>{Fs=B($s,1,"sectionmgmt-custom-dropdown",null,Fs,rt),Ja=B(ks,1,"sectionmgmt-dropdown-trigger",null,Ja,gt),d(Ot,`Students (${e(C),n(()=>e(C).length)??""} selected)`),Ds=B(rs,1,"sectionmgmt-custom-dropdown",null,Ds,Ha),Et=B(Gt,1,"sectionmgmt-dropdown-trigger",null,Et,Ut),d(ts,(e(C),n(()=>e(C).length>0?`${e(C).length} students selected`:"Select students"))),Ys=B(ur,1,"material-symbols-outlined",null,Ys,is),ir.disabled=e(he)||!e(Ce)||!e(X)},[()=>({open:e(fe)}),()=>({selected:e(X)}),()=>({open:e(E)}),()=>({selected:e(C).length>0}),()=>({"sectionmgmt-search-icon-edit":e(A).length>0,"sectionmgmt-search-icon":e(A).length===0})]),Ta(xs,()=>e(Ce),rt=>s(Ce,rt)),N("click",ks,G),Ta(Xt,()=>e($),rt=>s($,rt)),N("click",Gt,We),Ta(Ws,()=>e(Y),rt=>s(Y,rt)),N("click",Qs,()=>c(e(ta))),N("submit",ft,Ss(w)),i(ot,xt)};m(Ka,ot=>{e(Z),e(ta),n(()=>e(Z)===e(ta).id)&&ot(Ma)})}a(ct),p((ot,xt)=>{lt=B(ct,1,"sectionmgmt-section-card",null,lt,ot),la(ct,"id",`sectionmgmt-section-card-${e(ta),n(()=>e(ta).id)??""}`),d(It,`${e(ta),n(()=>e(ta).name)??""} · Grade ${e(ta),n(()=>e(ta).grade_level)??""}`),la(Pa,"href",`#sectionmgmt-section-card-${e(ta),n(()=>e(ta).id)??""}`),la(Qa,"title",(e(Z),e(ta),n(()=>e(Z)===e(ta).id?"Cancel Edit":"Edit Section"))),d(et,(e(Z),e(ta),n(()=>e(Z)===e(ta).id?"close":"edit"))),d(de,(e(ta),n(()=>e(ta).adviser_name||"No adviser"))),d(ne,`${e(ta),n(()=>e(ta).student_count)??""} students`),d(Ga,(e(ta),n(()=>e(ta).room_name?`${e(ta).room_name} (${e(ta).room_building}, ${e(ta).room_floor})`:"No room assigned"))),d(da,`Created: ${xt??""}`)},[()=>({editing:e(Z)===e(ta).id}),()=>(e(ta),n(()=>new Date(e(ta).created_at).toLocaleDateString()))]),N("click",Qa,()=>c(e(ta))),N("click",yt,()=>Ae(e(ta))),i(Da,ct)});var Ca=r(Be,2);{var Ya=Da=>{var ta=Vu();i(Da,ta)};m(Ca,Da=>{e(O),n(()=>e(O).length===0)&&Da(Ya)})}i(z,Te)};m(Yt,z=>{e(H)?z(zt):z(ss,!1)})}a(as),a(Mt),a(Se),p((z,Te,Be,Ca,Ya,Da,ta,ct)=>{oa=B(ca,1,"sectionmgmt-custom-dropdown",null,oa,z),ha=B(_a,1,"sectionmgmt-dropdown-trigger",null,ha,Te),st=B(mt,1,"sectionmgmt-custom-dropdown",null,st,Be),be=B(V,1,"sectionmgmt-dropdown-trigger",null,be,Ca),V.disabled=!e(x),pe=B(Ve,1,"sectionmgmt-custom-dropdown",null,pe,Ya),Ze=B(je,1,"sectionmgmt-dropdown-trigger",null,Ze,Da),je.disabled=!e(x),Rt=B(Ft,1,"material-symbols-outlined",null,Rt,ta),Sa=B($a,1,"sectionmgmt-create-button",null,Sa,ct),$a.disabled=e(q)||!e(J)||!e(x)},[()=>({open:e(Le)}),()=>({selected:e(x)}),()=>({open:e(ge)}),()=>({selected:e(ve)}),()=>({open:e(P)}),()=>({selected:e(K).length>0}),()=>({"sectionmgmt-search-icon-create":e(b).length>0,"sectionmgmt-search-icon":e(b).length===0}),()=>({loading:e(q)})]),Ta(ae,()=>e(J),z=>s(J,z)),Ta(Q,()=>e(F),z=>s(F,z)),N("click",_a,_e),N("click",V,we),Ta(ie,()=>e(oe),z=>s(oe,z)),N("click",je,Ne),Ta(kt,()=>e(se),z=>s(se,z)),N("submit",sa,Ss(l)),i(re,Se),$t(),S()}var zu=o('<div class="scheduleassign-container"><div class="scheduleassign-header"><div class="scheduleassign-header-content"><h1 class="scheduleassign-page-title">Schedule Management</h1> <p class="scheduleassign-page-subtitle">Assign subjects and teachers to sections with specific time periods</p></div> <div class="admin-tab-navigation"><button R=""><span class="material-icons">schedule</span> Schedule</button> <button><span class="material-icons">groups</span> Section</button> <button><span class="material-icons">meeting_room</span> Room</button></div></div> <div class="schedule-content-container"><!> <!> <!></div></div>');function Zu(re){let _=u("schedule");function f(F){s(_,F)}var S=zu(),T=t(S),D=r(t(T),2),y=t(D);let h;var R=r(y,2);let H;var O=r(R,2);let te;a(D),a(T);var me=r(T,2),b=t(me);{var W=F=>{Bv(F,{})};m(b,F=>{e(_)==="schedule"&&F(W)})}var A=r(b,2);{var q=F=>{Bu(F,{})};m(A,F=>{e(_)==="section"&&F(q)})}var J=r(A,2);{var x=F=>{mu(F,{})};m(J,F=>{e(_)==="room"&&F(x)})}a(me),a(S),p((F,ve,K)=>{h=B(y,1,"admin-tab-button",null,h,F),H=B(R,1,"admin-tab-button",null,H,ve),te=B(O,1,"admin-tab-button",null,te,K)},[()=>({active:e(_)==="schedule"}),()=>({active:e(_)==="section"}),()=>({active:e(_)==="room"})]),N("click",y,()=>f("schedule")),N("click",R,()=>f("section")),N("click",O,()=>f("room")),i(re,S)}var Ku=o('<div class="adminsubject-selected-option"><span class="material-symbols-outlined adminsubject-option-icon">school</span> <div class="adminsubject-option-content"><span class="adminsubject-option-name"> </span></div></div>'),Xu=o('<span class="adminsubject-placeholder">Select grade level</span>'),em=o('<button type="button"><span class="material-symbols-outlined adminsubject-option-icon">school</span> <div class="adminsubject-option-content"><span class="adminsubject-option-name"> </span> <span class="adminsubject-option-description"> </span></div></button>'),am=o('<span class="material-symbols-outlined">add_circle</span> Create Subject',1),tm=o('<div class="adminsubject-selected-option"><span class="material-symbols-outlined adminsubject-option-icon">school</span> <div class="adminsubject-option-content"><span class="adminsubject-option-name"> </span></div></div>'),sm=o('<span class="adminsubject-placeholder">All Grades</span>'),rm=o('<button type="button"><span class="material-symbols-outlined adminsubject-option-icon">school</span> <div class="adminsubject-option-content"><span class="adminsubject-option-name"> </span> <span class="adminsubject-option-description"> </span></div></button>'),im=o('<div class="adminsubject-loading-container"><span class="subject-loader"></span> <p class="adminsubject-loading-text">Loading subjects...</p></div>'),nm=o('<div class="adminsubject-selected-option"><span class="material-symbols-outlined adminsubject-option-icon">school</span> <div class="adminsubject-option-content"><span class="adminsubject-option-name"> </span></div></div>'),om=o('<span class="adminsubject-placeholder">Select grade level</span>'),lm=o('<button type="button"><span class="material-symbols-outlined adminsubject-option-icon">school</span> <div class="adminsubject-option-content"><span class="adminsubject-option-name"> </span> <span class="adminsubject-option-description"> </span></div></button>'),dm=o('<div class="adminsubject-edit-form-section"><div class="adminsubject-edit-form-container" id="adminsubject-edit-form-container"><div class="adminsubject-edit-form-header"><h2 class="adminsubject-edit-form-title">Edit Subject</h2> <p class="adminsubject-edit-form-subtitle">Update subject information</p></div> <form class="adminsubject-edit-form-content"><div class="adminsubject-edit-form-row"><div class="adminsubject-form-group adminsubject-form-group-third"><label class="adminsubject-form-label" for="edit-grade-level">Grade Level *</label> <div><button type="button" id="edit-grade-level"><!> <span class="material-symbols-outlined adminsubject-dropdown-arrow">expand_more</span></button> <div class="adminsubject-dropdown-menu"></div></div></div> <div class="adminsubject-form-group adminsubject-form-group-third"><label for="editSubjectName" class="adminsubject-form-label">Subject Name *</label> <input id="editSubjectName" type="text" class="adminsubject-form-input" placeholder="e.g., Mathematics, English" required/></div> <div class="adminsubject-form-group adminsubject-form-group-third"><label for="editSubjectCode" class="adminsubject-form-label">Subject Code *</label> <input id="editSubjectCode" type="text" class="adminsubject-form-input" placeholder="e.g., MATH-7, ENG-8" required/></div></div> <div class="adminsubject-edit-form-actions"><button type="button" class="adminsubject-cancel-button">Cancel</button> <button type="submit" class="adminsubject-submit-button"><!></button></div></form></div></div>'),cm=o('<div class="adminsubject-subject-card"><div class="adminsubject-subject-header"><div class="adminsubject-subject-title"><h3 class="adminsubject-subject-name"> </h3></div> <div class="adminsubject-action-buttons"><a><button type="button" class="adminsubject-edit-button"><span class="material-symbols-outlined"> </span></button></a> <button type="button" class="adminsubject-remove-button" title="Remove Subject"><span class="material-symbols-outlined">delete</span></button></div></div> <div class="adminsubject-subject-details"><div class="adminsubject-subject-item-detail"><span class="material-symbols-outlined">qr_code_2</span> <span> </span></div> <div class="adminsubject-subject-item-detail"><span class="material-symbols-outlined">calendar_today</span> <span> </span></div> <div class="adminsubject-subject-item-detail"><span class="material-symbols-outlined">update</span> <span> </span></div></div> <!></div>'),vm=o('<div class="adminsubject-no-results"><span class="material-symbols-outlined adminsubject-no-results-icon">search_off</span> <p>No subjects found matching your search.</p></div>'),um=o('<div class="admin-creation-layout"><div class="admin-creation-form-section"><div class="admin-section-header"><h2 class="admin-section-title">Create New Subject</h2> <p class="admin-section-subtitle">Fill in the details below to create a new subject</p></div> <div class="admin-form-container"><form><div class="admin-form-row"><div class="admin-form-group admin-form-group-third"><label class="admin-form-label" for="grade-level">Grade Level *</label> <div><button type="button" id="grade-level"><!> <span class="material-symbols-outlined adminsubject-dropdown-arrow">expand_more</span></button> <div class="adminsubject-dropdown-menu"></div></div></div> <div class="admin-form-group admin-form-group-third"><label for="subjectName" class="admin-form-label">Subject Name *</label> <input id="subjectName" type="text" class="admin-form-input" placeholder="e.g., Mathematics, English" required/></div> <div class="admin-form-group admin-form-group-third"><label for="subjectCode" class="admin-form-label">Subject Code *</label> <input id="subjectCode" type="text" class="admin-form-input" placeholder="e.g., MATH-7, ENG-8" required/></div></div> <div class="admin-form-actions"><button type="submit"><!></button></div></form></div></div> <div class="admin-recent-subjects-section"><div class="admin-section-header"><h2 class="admin-section-title">Recent Subjects</h2> <p class="admin-section-subtitle">Subjects created recently</p></div> <div class="adminsubject-filters-container"><div class="adminsubject-search-container"><input type="text" placeholder="Search by subject name or code..." class="adminsubject-search-input"/> <span class="material-symbols-outlined adminsubject-search-icon">search</span></div> <div><button type="button"><!> <span class="material-symbols-outlined adminsubject-dropdown-arrow">expand_more</span></button> <div class="adminsubject-dropdown-menu"><button type="button"><span class="material-symbols-outlined adminsubject-option-icon">clear_all</span> <div class="adminsubject-option-content"><span class="adminsubject-option-name">All Grades</span></div></button> <!></div></div></div> <div class="adminsubject-subjects-grid"><!></div></div></div>'),mm=o('<div class="adminsubject-selected-option"><span class="material-symbols-outlined adminsubject-option-icon"> </span> <div class="adminsubject-option-content"><span class="adminsubject-option-name"> </span></div></div>'),pm=o('<span class="adminsubject-placeholder">Select icon</span>'),_m=o('<button type="button"><span class="material-symbols-outlined adminsubject-option-icon"> </span> <div class="adminsubject-option-content"><span class="adminsubject-option-name"> </span></div></button>'),fm=o('<span class="material-symbols-outlined">add_circle</span> Create Activity Type',1),gm=o('<div class="adminsubject-selected-option"><span class="material-symbols-outlined adminsubject-option-icon"> </span> <div class="adminsubject-option-content"><span class="adminsubject-option-name"> </span></div></div>'),bm=o('<span class="adminsubject-placeholder">Select icon</span>'),hm=o('<button type="button"><span class="material-symbols-outlined adminsubject-option-icon"> </span> <div class="adminsubject-option-content"><span class="adminsubject-option-name"> </span></div></button>'),ym=o('<div class="adminsubject-edit-form-section"><div class="adminsubject-edit-form-container"><div class="adminsubject-edit-form-header"><h2 class="adminsubject-edit-form-title">Edit Activity Type</h2> <p class="adminsubject-edit-form-subtitle">Update activity type information</p></div> <form class="adminsubject-edit-form-content"><div class="adminsubject-edit-form-row"><div class="adminsubject-form-group adminsubject-form-group-third"><label class="adminsubject-form-label" for="edit-activity-name">Activity Name *</label> <input type="text" class="adminsubject-form-input" id="edit-activity-name" placeholder="e.g., Flag Ceremony" required/></div> <div class="adminsubject-form-group adminsubject-form-group-third"><label class="adminsubject-form-label" for="edit-activity-code">Activity Code *</label> <input type="text" class="adminsubject-form-input" id="edit-activity-code" placeholder="e.g., FLAG" required/></div> <div class="adminsubject-form-group adminsubject-form-group-third"><label class="adminsubject-form-label" for="edit-activity-icon">Icon</label> <div><button type="button" id="edit-activity-icon"><!> <span class="material-symbols-outlined adminsubject-dropdown-arrow">expand_more</span></button> <div class="adminsubject-dropdown-menu"></div></div></div></div> <div class="adminsubject-edit-form-actions"><a><button type="button" class="adminsubject-cancel-button">Cancel</button></a> <button type="submit"><!></button></div></form></div></div>'),wm=o('<div class="adminactivity-activity-card"><div class="adminactivity-activity-header"><div class="adminactivity-activity-title"><h3 class="adminactivity-activity-name"> </h3></div> <div class="adminactivity-action-buttons"><a><button type="button" class="adminactivity-edit-button"><span class="material-symbols-outlined"> </span></button></a> <button type="button" class="adminactivity-remove-button" title="Remove Activity Type"><span class="material-symbols-outlined">delete</span></button></div></div> <div class="adminactivity-activity-details"><div class="adminactivity-activity-item-detail"><span class="material-symbols-outlined">qr_code_2</span> <span> </span></div> <div class="adminactivity-activity-item-detail"><span class="material-symbols-outlined"> </span> <span> </span></div> <div class="adminactivity-activity-item-detail"><span class="material-symbols-outlined">palette</span> <span> </span></div> <div class="adminactivity-activity-item-detail"><span class="material-symbols-outlined">calendar_today</span> <span> </span></div></div> <!></div>'),Sm=o('<div class="adminsubject-no-results"><span class="material-symbols-outlined adminsubject-no-results-icon">event_note</span> <p>No activity types created yet.</p></div>'),xm=o('<div class="admin-creation-layout"><div class="admin-creation-form-section"><div class="admin-section-header"><h2 class="admin-section-title">Create New Activity Type</h2> <p class="admin-section-subtitle">Fill in the details below to create a new activity type</p></div> <div class="admin-form-container"><form><div class="admin-form-row"><div class="admin-form-group admin-form-group-third"><label class="admin-form-label" for="activity-name">Activity Name *</label> <input id="activity-name" type="text" class="admin-form-input" placeholder="e.g., Flag Ceremony, Break Time" required/></div> <div class="admin-form-group admin-form-group-third"><label class="admin-form-label" for="activity-code">Activity Code *</label> <input id="activity-code" type="text" class="admin-form-input" placeholder="e.g., FLAG, BREAK" required/></div> <div class="admin-form-group admin-form-group-third"><label class="admin-form-label" for="activity-icon">Icon</label> <div><button type="button" id="activity-icon"><!> <span class="material-symbols-outlined adminsubject-dropdown-arrow">expand_more</span></button> <div class="adminsubject-dropdown-menu"></div></div></div></div> <div class="admin-form-actions"><button type="submit"><!></button></div></form></div></div> <div class="admin-recent-subjects-section"><div class="admin-section-header"><h2 class="admin-section-title">Recent Activity Types</h2> <p class="admin-section-subtitle">Activity types created recently</p></div> <div class="adminactivity-activities-grid"><!></div></div></div>'),km=o('<div class="admin-subject-creation-container"><div class="admin-subject-header"><div class="admin-header-content"><h1 class="admin-page-title">Subjects & Activities</h1> <p class="admin-page-subtitle">Manage subjects and activity types for the curriculum</p></div> <div class="admin-tab-navigation"><button><span class="material-icons">subject</span> Subjects</button> <button><span class="material-icons">event</span> Activity Types</button></div></div> <!> <!></div>');function Dm(re,_){Nt(_,!1);const f=u(),S=u(),T=u(),D=u();let y=u(!1),h=u(""),R=u(""),H=u(""),O=u(!1),te=u(!1),me=u(""),b=u(""),W=u(null),A=u(""),q=u(""),J=u(""),x=u(!1),F=u(!1),ve=u("subjects"),K=u([]),Le=u(!1),ge=u(""),P=u(""),oe=u("event"),se=u(!1),Z=u(null),Ce=u(""),X=u(""),C=u("event"),he=u(!1),fe=u(!1),E=u(!1),$=u([]);const Y=[{value:7,label:"Grade 7",description:"Junior High School - First Year"},{value:8,label:"Grade 8",description:"Junior High School - Second Year"},{value:9,label:"Grade 9",description:"Junior High School - Third Year"},{value:10,label:"Grade 10",description:"Junior High School - Fourth Year"}],ee=[{value:"event",name:"Event"},{value:"flag",name:"Flag"},{value:"coffee",name:"Coffee"},{value:"restaurant",name:"Restaurant"},{value:"groups",name:"Groups"},{value:"home",name:"Home"},{value:"book",name:"Book"},{value:"group_work",name:"Group Work"},{value:"schedule",name:"Schedule"}];async function L(){s(E,!0);try{const ae=await ut.get("/api/subjects");ae.success?s($,ae.data):qe.error("Failed to load subjects: "+ae.message)}catch(ae){console.error("Error loading subjects:",ae),qe.error("Failed to load subjects. Please try again.")}finally{s(E,!1)}}async function De(){try{const ae=await ut.get("/api/activity-types");ae.success?s(K,ae.data):qe.error("Failed to load activity types: "+ae.message)}catch(ae){console.error("Error loading activity types:",ae),qe.error("Failed to load activity types. Please try again.")}}Bt(()=>{L(),De()});async function M(){if(!e(h)||!e(R).trim()||!e(H).trim()){qe.error("Please fill in all required fields");return}s(y,!0);try{const ae=await ut.post("/api/subjects",{name:e(R).trim(),code:e(H).trim(),gradeLevel:e(h)});ae.success?(s($,[ae.data,...e($)]),s(h,""),s(R,""),s(H,""),qe.success(ae.message)):qe.error(ae.message)}catch(ae){console.error("Error creating subject:",ae),qe.error("Failed to create subject. Please try again.")}finally{s(y,!1)}}async function le(ae){ms.confirm("Remove Subject",`<p>Are you sure you want to remove the subject <strong>"${ae.name}"</strong>?</p>`,async()=>{try{const U=await ut.delete("/api/subjects",{id:ae.id});U.success?(s($,e($).filter(Q=>Q.id!==ae.id)),qe.success(U.message)):qe.error(U.message)}catch(U){console.error("Error removing subject:",U),qe.error("Failed to remove subject. Please try again.")}},null,{size:"small"})}function Pe(){s(F,!e(F))}function Oe(ae){s(J,ae.value),s(F,!1)}function We(){s(O,!e(O))}function Ee(ae){s(h,ae.value),s(O,!1)}function Ye(){s(te,!e(te))}function He(ae){ae?s(b,ae.value):s(b,""),s(te,!1)}function Fe(ae){ae.target.closest(".adminsubject-custom-dropdown")||(s(O,!1),s(F,!1),s(se,!1),s(fe,!1)),ae.target.closest(".adminsubject-grade-filter")||s(te,!1)}function _e(){s(se,!e(se))}function we(ae){s(oe,ae),s(se,!1)}function Ne(ae){const U=ee.find(Q=>Q.value===ae);return U?U.name:ae}function Re(ae){e(W)===ae.id?(s(W,null),s(A,""),s(q,""),s(J,""),s(F,!1)):(s(W,ae.id),s(A,ae.name),s(q,ae.code),s(J,parseInt(ae.gradeLevel.replace("Grade ",""))))}async function ye(){if(!e(A).trim()||!e(q).trim()||!e(J)){qe.error("Please fill in all required fields");return}s(x,!0);try{const ae=await ut.put("/api/subjects",{id:e(W),name:e(A).trim(),code:e(q).trim(),gradeLevel:e(J)});ae.success?(s($,e($).map(U=>U.id===e(W)?ae.data:U)),qe.success(ae.message),s(W,null),s(A,""),s(q,""),s(J,""),s(F,!1)):qe.error(ae.message)}catch(ae){console.error("Error updating subject:",ae),qe.error("Failed to update subject. Please try again.")}finally{s(x,!1)}}function ue(ae){e(Z)===ae.id?(s(Z,null),s(Ce,""),s(X,""),s(C,"event"),s(fe,!1)):(s(Z,ae.id),s(Ce,ae.name),s(X,ae.code),s(C,ae.icon))}async function g(){if(!e(Ce).trim()||!e(X).trim()){qe.error("Please fill in all required fields");return}s(he,!0);try{const ae=await ut.put("/api/activity-types",{id:e(Z),name:e(Ce).trim(),code:e(X).trim(),icon:e(C)});ae.success?(recentActivityTypes=recentActivityTypes.map(U=>U.id===e(Z)?ae.data:U),qe.success(ae.message),s(Z,null),s(Ce,""),s(X,""),s(C,"event"),s(fe,!1)):qe.error(ae.message)}catch(ae){console.error("Error updating activity type:",ae),qe.error("Failed to update activity type. Please try again.")}finally{s(he,!1)}}function v(){s(fe,!e(fe))}function l(ae){s(C,ae),s(fe,!1)}async function c(){if(!e(ge).trim()||!e(P).trim()){qe.error("Please fill in all required fields");return}s(Le,!0);try{const ae=await ut.post("/api/activity-types",{name:e(ge).trim(),code:e(P).trim(),icon:e(oe)});ae.success?(s(K,[ae.data,...e(K)]),s(ge,""),s(P,""),s(oe,"event"),qe.success("Activity type created successfully")):qe.error(ae.message)}catch(ae){console.error("Error creating activity type:",ae),qe.error("Failed to create activity type. Please try again.")}finally{s(Le,!1)}}async function w(ae){ms.confirm("Remove Activity Type",`<p>Are you sure you want to remove the activity type <strong>"${ae.name}"</strong>?</p>`,async()=>{try{const U=await ut.delete("/api/activity-types",{id:ae.id});U.success?(s(K,e(K).filter(Q=>Q.id!==ae.id)),qe.success(U.message)):qe.error(U.message)}catch(U){console.error("Error removing activity type:",U),qe.error("Failed to remove activity type. Please try again.")}},null,{size:"small"})}Na(()=>e(h),()=>{s(f,Y.find(ae=>ae.value===e(h)))}),Na(()=>e(b),()=>{s(S,Y.find(ae=>ae.value===e(b)))}),Na(()=>(e($),e(me),e(b)),()=>{s(T,e($).filter(ae=>{const U=ae.name.toLowerCase().includes(e(me).toLowerCase())||ae.code.toLowerCase().includes(e(me).toLowerCase()),Q=e(b)?ae.gradeLevel===`Grade ${e(b)}`:!0;return U&&Q}))}),Na(()=>e(J),()=>{s(D,Y.find(ae=>ae.value===e(J)))}),ns(),os();var G=km();N("click",Ps,Fe);var ce=t(G),Ae=r(t(ce),2),ke=t(Ae);let I;var Se=r(ke,2);let xe;a(Ae),a(ce);var ze=r(ce,2);{var sa=ae=>{var U=um(),Q=t(U),Ue=r(t(Q),2),ra=t(Ue),ca=t(ra),oa=t(ca),_a=r(t(oa),2);let ha;var fa=t(_a);let Oa;var Ba=t(fa);{var tt=Aa=>{var pa=Ku(),ja=r(t(pa),2),Za=t(ja),$a=t(Za,!0);a(Za),a(ja),a(pa),p(()=>d($a,(e(f),n(()=>e(f).label)))),i(Aa,pa)},it=Aa=>{var pa=Xu();i(Aa,pa)};m(Ba,Aa=>{e(f)?Aa(tt):Aa(it,!1)})}Ea(2),a(fa);var mt=r(fa,2);ea(mt,5,()=>Y,Aa=>Aa.value,(Aa,pa)=>{var ja=em();let Za;var $a=r(t(ja),2),Sa=t($a),bt=t(Sa,!0);a(Sa);var Dt=r(Sa,2),qt=t(Dt,!0);a(Dt),a($a),a(ja),p(Mt=>{Za=B(ja,1,"adminsubject-dropdown-option",null,Za,Mt),d(bt,(e(pa),n(()=>e(pa).label))),d(qt,(e(pa),n(()=>e(pa).description)))},[()=>({selected:e(h)===e(pa).value})]),N("click",ja,()=>Ee(e(pa))),i(Aa,ja)}),a(mt),a(_a),a(oa);var st=r(oa,2),V=r(t(st),2);ka(V),a(st);var be=r(st,2),Je=r(t(be),2);ka(Je),a(be),a(ca);var ga=r(ca,2),qa=t(ga);let aa;var Ke=t(qa);{var ie=Aa=>{var pa=wt("Creating...");i(Aa,pa)},Me=Aa=>{var pa=am();Ea(),i(Aa,pa)};m(Ke,Aa=>{e(y)?Aa(ie):Aa(Me,!1)})}a(qa),a(ga),a(ra),a(Ue),a(Q);var j=r(Q,2),$e=r(t(j),2),Ie=t($e),Ve=t(Ie);ka(Ve),Ea(2),a(Ie);var pe=r(Ie,2);let je;var Ze=t(pe);let ua;var wa=t(Ze);{var ma=Aa=>{var pa=tm(),ja=r(t(pa),2),Za=t(ja),$a=t(Za,!0);a(Za),a(ja),a(pa),p(()=>d($a,(e(S),n(()=>e(S).label)))),i(Aa,pa)},Ra=Aa=>{var pa=sm();i(Aa,pa)};m(wa,Aa=>{e(S)?Aa(ma):Aa(Ra,!1)})}Ea(2),a(Ze);var za=r(Ze,2),Wa=t(za);let Xa;var kt=r(Wa,2);ea(kt,1,()=>Y,Aa=>Aa.value,(Aa,pa)=>{var ja=rm();let Za;var $a=r(t(ja),2),Sa=t($a),bt=t(Sa,!0);a(Sa);var Dt=r(Sa,2),qt=t(Dt,!0);a(Dt),a($a),a(ja),p(Mt=>{Za=B(ja,1,"adminsubject-dropdown-option",null,Za,Mt),d(bt,(e(pa),n(()=>e(pa).label))),d(qt,(e(pa),n(()=>e(pa).description)))},[()=>({selected:e(b)===e(pa).value})]),N("click",ja,()=>He(e(pa))),i(Aa,ja)}),a(za),a(pe),a($e);var Ft=r($e,2),Rt=t(Ft);{var pt=Aa=>{var pa=im();i(Aa,pa)},Tt=Aa=>{var pa=ya(),ja=na(pa);ea(ja,1,()=>e(T),Za=>Za.id,(Za,$a)=>{var Sa=cm(),bt=t(Sa),Dt=t(bt),qt=t(Dt),Mt=t(qt);a(qt),a(Dt);var as=r(Dt,2),Yt=t(as),zt=t(Yt),ss=t(zt),z=t(ss,!0);a(ss),a(zt),a(Yt);var Te=r(Yt,2);a(as),a(bt);var Be=r(bt,2),Ca=t(Be),Ya=r(t(Ca),2),Da=t(Ya,!0);a(Ya),a(Ca);var ta=r(Ca,2),ct=r(t(ta),2),lt=t(ct);a(ct),a(ta);var Fa=r(ta,2),dt=r(t(Fa),2),ht=t(dt);a(dt),a(Fa),a(Be);var It=r(Be,2);{var Ia=Pa=>{var Qa=dm(),Ua=t(Qa),et=r(t(Ua),2),yt=t(et),At=t(yt),jt=r(t(At),2);let k;var de=t(jt);let Ge;var ia=t(de);{var ne=Va=>{var ft=nm(),Lt=r(t(ft),2),Zt=t(Lt),xs=t(Zt,!0);a(Zt),a(Lt),a(ft),p(()=>d(xs,(e(D),n(()=>e(D).label)))),i(Va,ft)},Qe=Va=>{var ft=om();i(Va,ft)};m(ia,Va=>{e(D)?Va(ne):Va(Qe,!1)})}Ea(2),a(de);var Xe=r(de,2);ea(Xe,5,()=>Y,Va=>Va.value,(Va,ft)=>{var Lt=lm();let Zt;var xs=r(t(Lt),2),ps=t(xs),$s=t(ps,!0);a(ps);var Fs=r(ps,2),ks=t(Fs,!0);a(Fs),a(xs),a(Lt),p(Ja=>{Zt=B(Lt,1,"adminsubject-dropdown-option",null,Zt,Ja),d($s,(e(ft),n(()=>e(ft).label))),d(ks,(e(ft),n(()=>e(ft).description)))},[()=>({selected:e(J)===e(ft).value})]),N("click",Lt,()=>Oe(e(ft))),i(Va,Lt)}),a(Xe),a(jt),a(At);var Ga=r(At,2),vt=r(t(Ga),2);ka(vt),a(Ga);var _t=r(Ga,2),da=r(t(_t),2);ka(da),a(_t),a(yt);var ba=r(yt,2),nt=t(ba),Ka=r(nt,2),Ma=t(Ka);{var ot=Va=>{var ft=wt("Updating...");i(Va,ft)},xt=Va=>{var ft=wt("Update Subject");i(Va,ft)};m(Ma,Va=>{e(x)?Va(ot):Va(xt,!1)})}a(Ka),a(ba),a(et),a(Ua),a(Qa),p((Va,ft,Lt)=>{k=B(jt,1,"adminsubject-custom-dropdown",null,k,Va),Ge=B(de,1,"adminsubject-dropdown-trigger",null,Ge,ft),Ka.disabled=Lt},[()=>({open:e(F)}),()=>({selected:e(J)}),()=>(e(x),e(A),e(q),e(J),n(()=>e(x)||!e(A).trim()||!e(q).trim()||!e(J)))]),N("click",de,Pe),Ta(vt,()=>e(A),Va=>s(A,Va)),Ta(da,()=>e(q),Va=>s(q,Va)),N("click",nt,()=>Re(e($a))),N("submit",et,Ss(ye)),i(Pa,Qa)};m(It,Pa=>{e(W),e($a),n(()=>e(W)===e($a).id)&&Pa(Ia)})}a(Sa),p(()=>{la(Sa,"id",`adminsubject-subject-card-${e($a),n(()=>e($a).id)??""}`),d(Mt,`${e($a),n(()=>e($a).name)??""} · ${e($a),n(()=>e($a).gradeLevel)??""}`),la(Yt,"href",`#adminsubject-subject-card-${e($a),n(()=>e($a).id)??""}`),la(zt,"title",(e(W),e($a),n(()=>e(W)===e($a).id?"Cancel Edit":"Edit Subject"))),d(z,(e(W),e($a),n(()=>e(W)===e($a).id?"close":"edit"))),d(Da,(e($a),n(()=>e($a).code))),d(lt,`Created: ${e($a),n(()=>e($a).createdDate)??""}`),d(ht,`Updated: ${e($a),n(()=>e($a).updatedDate)??""}`)}),N("click",zt,()=>Re(e($a))),N("click",Te,()=>le(e($a))),i(Za,Sa)},Za=>{var $a=vm();i(Za,$a)}),i(Aa,pa)};m(Rt,Aa=>{e(E)?Aa(pt):Aa(Tt,!1)})}a(Ft),a(j),a(U),p((Aa,pa,ja,Za,$a,Sa,bt)=>{ha=B(_a,1,"adminsubject-custom-dropdown",null,ha,Aa),Oa=B(fa,1,"adminsubject-dropdown-trigger",null,Oa,pa),V.disabled=!e(h),aa=B(qa,1,"admin-create-button",null,aa,ja),qa.disabled=Za,je=B(pe,1,"adminsubject-grade-filter adminsubject-custom-dropdown",null,je,$a),ua=B(Ze,1,"adminsubject-dropdown-trigger",null,ua,Sa),Xa=B(Wa,1,"adminsubject-dropdown-option",null,Xa,bt)},[()=>({open:e(O)}),()=>({selected:e(h)}),()=>({loading:e(y)}),()=>(e(y),e(h),e(R),n(()=>e(y)||!e(h)||!e(R).trim())),()=>({open:e(te)}),()=>({selected:e(b)}),()=>({selected:e(b)===""})]),N("click",fa,We),Ta(V,()=>e(R),Aa=>s(R,Aa)),Ta(Je,()=>e(H),Aa=>s(H,Aa)),N("submit",ra,Ss(M)),Ta(Ve,()=>e(me),Aa=>s(me,Aa)),N("click",Ze,Ye),N("click",Wa,()=>He(null)),i(ae,U)};m(ze,ae=>{e(ve)==="subjects"&&ae(sa)})}var va=r(ze,2);{var La=ae=>{var U=xm(),Q=t(U),Ue=r(t(Q),2),ra=t(Ue),ca=t(ra),oa=t(ca),_a=r(t(oa),2);ka(_a),a(oa);var ha=r(oa,2),fa=r(t(ha),2);ka(fa),a(ha);var Oa=r(ha,2),Ba=r(t(Oa),2);let tt;var it=t(Ba);let mt;var st=t(it);{var V=je=>{var Ze=mm(),ua=t(Ze),wa=t(ua,!0);a(ua);var ma=r(ua,2),Ra=t(ma),za=t(Ra,!0);a(Ra),a(ma),a(Ze),p(Wa=>{d(wa,e(oe)),d(za,Wa)},[()=>(e(oe),n(()=>Ne(e(oe))))]),i(je,Ze)},be=je=>{var Ze=pm();i(je,Ze)};m(st,je=>{e(oe)?je(V):je(be,!1)})}Ea(2),a(it);var Je=r(it,2);ea(Je,5,()=>ee,je=>je.value,(je,Ze)=>{var ua=_m();let wa;var ma=t(ua),Ra=t(ma,!0);a(ma);var za=r(ma,2),Wa=t(za),Xa=t(Wa,!0);a(Wa),a(za),a(ua),p(kt=>{wa=B(ua,1,"adminsubject-dropdown-option",null,wa,kt),d(Ra,(e(Ze),n(()=>e(Ze).value))),d(Xa,(e(Ze),n(()=>e(Ze).name)))},[()=>({selected:e(oe)===e(Ze).value})]),N("click",ua,()=>we(e(Ze).value)),i(je,ua)}),a(Je),a(Ba),a(Oa),a(ca);var ga=r(ca,2),qa=t(ga);let aa;var Ke=t(qa);{var ie=je=>{var Ze=wt("Creating...");i(je,Ze)},Me=je=>{var Ze=fm();Ea(),i(je,Ze)};m(Ke,je=>{e(Le)?je(ie):je(Me,!1)})}a(qa),a(ga),a(ra),a(Ue),a(Q);var j=r(Q,2),$e=r(t(j),2),Ie=t($e);{var Ve=je=>{var Ze=ya(),ua=na(Ze);ea(ua,1,()=>e(K),wa=>wa.id,(wa,ma)=>{var Ra=wm(),za=t(Ra),Wa=t(za),Xa=t(Wa),kt=t(Xa,!0);a(Xa),a(Wa);var Ft=r(Wa,2),Rt=t(Ft),pt=t(Rt),Tt=t(pt),Aa=t(Tt,!0);a(Tt),a(pt),a(Rt);var pa=r(Rt,2);a(Ft),a(za);var ja=r(za,2),Za=t(ja),$a=r(t(Za),2),Sa=t($a,!0);a($a),a(Za);var bt=r(Za,2),Dt=t(bt),qt=t(Dt,!0);a(Dt);var Mt=r(Dt,2),as=t(Mt);a(Mt),a(bt);var Yt=r(bt,2),zt=r(t(Yt),2),ss=t(zt);a(zt),a(Yt);var z=r(Yt,2),Te=r(t(z),2),Be=t(Te);a(Te),a(z),a(ja);var Ca=r(ja,2);{var Ya=Da=>{var ta=ym(),ct=t(ta),lt=r(t(ct),2),Fa=t(lt),dt=t(Fa),ht=r(t(dt),2);ka(ht),a(dt);var It=r(dt,2),Ia=r(t(It),2);ka(Ia),a(It);var Pa=r(It,2),Qa=r(t(Pa),2);let Ua;var et=t(Qa);let yt;var At=t(et);{var jt=da=>{var ba=gm(),nt=t(ba),Ka=t(nt,!0);a(nt);var Ma=r(nt,2),ot=t(Ma),xt=t(ot,!0);a(ot),a(Ma),a(ba),p(Va=>{d(Ka,e(C)),d(xt,Va)},[()=>(e(C),n(()=>Ne(e(C))))]),i(da,ba)},k=da=>{var ba=bm();i(da,ba)};m(At,da=>{e(C)?da(jt):da(k,!1)})}Ea(2),a(et);var de=r(et,2);ea(de,5,()=>ee,da=>da.value,(da,ba)=>{var nt=hm();let Ka;var Ma=t(nt),ot=t(Ma,!0);a(Ma);var xt=r(Ma,2),Va=t(xt),ft=t(Va,!0);a(Va),a(xt),a(nt),p(Lt=>{Ka=B(nt,1,"adminsubject-dropdown-option",null,Ka,Lt),d(ot,(e(ba),n(()=>e(ba).value))),d(ft,(e(ba),n(()=>e(ba).name)))},[()=>({selected:e(C)===e(ba).value})]),N("click",nt,()=>l(e(ba).value)),i(da,nt)}),a(de),a(Qa),a(Pa),a(Fa);var Ge=r(Fa,2),ia=t(Ge),ne=t(ia);a(ia);var Qe=r(ia,2);let Xe;var Ga=t(Qe);{var vt=da=>{var ba=wt("Updating...");i(da,ba)},_t=da=>{var ba=wt("Update Activity Type");i(da,ba)};m(Ga,da=>{e(he)?da(vt):da(_t,!1)})}a(Qe),a(Ge),a(lt),a(ct),a(ta),p((da,ba,nt,Ka)=>{Ua=B(Qa,1,"adminsubject-custom-dropdown",null,Ua,da),yt=B(et,1,"adminsubject-dropdown-trigger",null,yt,ba),la(ia,"href",`#adminactivity-activity-card-${e(ma),n(()=>e(ma).id)??""}`),Xe=B(Qe,1,"adminsubject-submit-button",null,Xe,nt),Qe.disabled=Ka},[()=>({open:e(fe)}),()=>({selected:e(C)}),()=>({loading:e(he)}),()=>(e(he),e(Ce),e(X),n(()=>e(he)||!e(Ce).trim()||!e(X).trim()))]),Ta(ht,()=>e(Ce),da=>s(Ce,da)),Ta(Ia,()=>e(X),da=>s(X,da)),N("click",et,v),N("click",ne,()=>ue(e(ma))),N("submit",lt,Ss(g)),i(Da,ta)};m(Ca,Da=>{e(Z),e(ma),n(()=>e(Z)===e(ma).id)&&Da(Ya)})}a(Ra),p(Da=>{la(Ra,"id",`adminactivity-activity-card-${e(ma),n(()=>e(ma).id)??""}`),d(kt,(e(ma),n(()=>e(ma).name))),la(Rt,"href",`#adminactivity-activity-card-${e(ma),n(()=>e(ma).id)??""}`),la(pt,"title",(e(Z),e(ma),n(()=>e(Z)===e(ma).id?"Cancel Edit":"Edit Activity Type"))),d(Aa,(e(Z),e(ma),n(()=>e(Z)===e(ma).id?"close":"edit"))),d(Sa,(e(ma),n(()=>e(ma).code))),vs(Dt,`color: var(--${e(ma),n(()=>e(ma).color)??""}-500)`),d(qt,(e(ma),n(()=>e(ma).icon))),d(as,`Icon: ${e(ma),n(()=>e(ma).icon)??""}`),d(ss,`Color: ${e(ma),n(()=>e(ma).color)??""}`),d(Be,`Created: ${Da??""}`)},[()=>n(()=>new Date().toLocaleDateString())]),N("click",pt,()=>ue(e(ma))),N("click",pa,()=>w(e(ma))),i(wa,Ra)}),i(je,Ze)},pe=je=>{var Ze=Sm();i(je,Ze)};m(Ie,je=>{e(K),n(()=>e(K).length>0)?je(Ve):je(pe,!1)})}a($e),a(j),a(U),p((je,Ze,ua,wa)=>{tt=B(Ba,1,"adminsubject-custom-dropdown",null,tt,je),mt=B(it,1,"adminsubject-dropdown-trigger",null,mt,Ze),aa=B(qa,1,"admin-create-button",null,aa,ua),qa.disabled=wa},[()=>({open:e(se)}),()=>({selected:e(oe)}),()=>({loading:e(Le)}),()=>(e(Le),e(ge),e(P),n(()=>e(Le)||!e(ge).trim()||!e(P).trim()))]),Ta(_a,()=>e(ge),je=>s(ge,je)),Ta(fa,()=>e(P),je=>s(P,je)),N("click",it,_e),N("submit",ra,Ss(c)),i(ae,U)};m(va,ae=>{e(ve)==="activities"&&ae(La)})}a(G),p((ae,U)=>{I=B(ke,1,"admin-tab-button",null,I,ae),xe=B(Se,1,"admin-tab-button",null,xe,U)},[()=>({active:e(ve)==="subjects"}),()=>({active:e(ve)==="activities"})]),N("click",ke,()=>s(ve,"subjects")),N("click",Se,()=>s(ve,"activities")),i(re,G),$t()}var Tm=o('<span class="material-symbols-outlined">add_ad</span> Create Department',1),Am=o('<button type="button" class="clear-search-button"><span class="material-symbols-outlined">close</span></button>'),jm=o('<div class="selected-option"><span class="material-symbols-outlined option-icon"> </span> <div class="option-content"><span class="option-name"> </span></div></div>'),Cm=o('<span class="placeholder">Filter by type</span>'),Nm=o('<button type="button"><span class="material-symbols-outlined option-icon"> </span> <div class="option-content"><span class="option-name"> </span></div></button>'),$m=o('<div class="dept-mgmt-loading"><span class="dept-loader"></span> <p>Loading departments...</p></div>'),qm=o('<div class="dept-mgmt-empty-state"><span class="material-symbols-outlined dept-mgmt-empty-icon">corporate_fare</span> <h3 class="dept-mgmt-empty-title"> </h3> <p class="dept-mgmt-empty-description"> </p></div>'),Lm=o('<div class="dept-mgmt-edit-form-section"><div class="dept-mgmt-edit-form-container" id="admin-department-edit-form-container"><div class="dept-mgmt-edit-form-header"><h2 class="dept-mgmt-edit-form-title">Edit Department</h2> <p class="dept-mgmt-edit-form-subtitle">Update department information</p></div> <form class="dept-mgmt-edit-form-content"><div class="dept-mgmt-edit-info-row"><div class="dept-mgmt-form-group"><label class="dept-mgmt-form-label" for="edit-department-name">Department Name *</label> <input type="text" id="edit-department-name" class="dept-mgmt-form-input" placeholder="Enter department name" required/></div> <div class="dept-mgmt-form-group"><label class="dept-mgmt-form-label" for="edit-department-code">Department Code *</label> <input type="text" id="edit-department-code" class="dept-mgmt-form-input" placeholder="Enter department code" required/></div></div> <div class="dept-mgmt-edit-form-actions"><a><button type="button" class="dept-mgmt-cancel-button">Cancel</button></a> <button type="submit" class="dept-mgmt-update-button"><!></button></div></form></div></div>'),Em=o('<button type="button" class="dept-mgmt-select-all-btn"><span class="material-symbols-outlined"> </span></button>'),Fm=o('<button type="button"><div class="dept-mgmt-subject-checkbox"><span class="material-symbols-outlined"> </span></div> <span class="material-symbols-outlined dept-mgmt-option-icon">subject</span> <div class="dept-mgmt-option-content"><span class="dept-mgmt-option-name"> </span> <span class="dept-mgmt-option-description"> </span></div></button>'),Mm=o('<div class="dept-mgmt-no-results"><span class="material-symbols-outlined">subject</span> <span>No subjects found</span></div>'),Gm=o('<div class="dept-mgmt-selected-subject-chip"><span class="dept-mgmt-subject-name"> </span> <span class="dept-mgmt-subject-code"> </span> <button type="button" class="dept-mgmt-remove-subject"><span class="material-symbols-outlined">close</span></button></div>'),Im=o('<div class="dept-mgmt-selected-subjects"><div class="dept-mgmt-selected-subjects-header"><span class="dept-mgmt-selected-count"> </span></div> <div class="dept-mgmt-selected-subjects-list"></div></div>'),Pm=o('<button type="button" class="dept-mgmt-select-all-btn"><span class="material-symbols-outlined"> </span></button>'),Rm=o('<button type="button"><div class="dept-mgmt-teacher-checkbox"><span class="material-symbols-outlined"> </span></div> <span class="material-symbols-outlined dept-mgmt-option-icon">person</span> <div class="dept-mgmt-option-content"><span class="dept-mgmt-option-name"> </span> <span class="dept-mgmt-option-description"> </span></div></button>'),Om=o('<div class="dept-mgmt-no-results"><span class="material-symbols-outlined">person_off</span> <span>No teachers found</span></div>'),Um=o('<div class="dept-mgmt-selected-teacher-chip"><span class="dept-mgmt-teacher-name"> </span> <span class="dept-mgmt-teacher-subject"> </span> <button type="button" class="dept-mgmt-remove-teacher"><span class="material-symbols-outlined">close</span></button></div>'),Wm=o('<div class="dept-mgmt-selected-teachers"><div class="dept-mgmt-selected-teachers-header"><span class="dept-mgmt-selected-count"> </span></div> <div class="dept-mgmt-selected-teachers-list"></div></div>'),Ym=o('<div class="dept-mgmt-assign-form-section"><div class="dept-mgmt-assign-form-container"><div class="dept-mgmt-assign-form-header"><h2 class="dept-mgmt-assign-form-title">Assign Subjects & Teachers</h2> <p class="dept-mgmt-assign-form-subtitle">Select subjects and teachers for this department</p></div> <form class="dept-mgmt-assign-form-content"><div class="dept-mgmt-assign-info-row"><div class="dept-mgmt-form-group"><label class="dept-mgmt-form-label" for="subjects">Select Subjects</label> <div><button type="button" id="subjects"><span class="dept-mgmt-placeholder">Add subjects to department</span> <span class="material-symbols-outlined dept-mgmt-dropdown-arrow">expand_more</span></button> <div class="dept-mgmt-dropdown-menu"><div class="dept-mgmt-search-container"><!> <input type="text" class="dept-mgmt-search-input" placeholder="Search subjects..."/> <span>search</span></div> <!> <!></div></div> <p class="dept-mgmt-form-help">Select subjects that will be managed by this department.</p> <!></div></div> <div class="dept-mgmt-assign-info-row"><div class="dept-mgmt-form-group"><label class="dept-mgmt-form-label" for="teachers">Select Teachers</label> <div><button type="button" id="teachers"><span class="dept-mgmt-placeholder">Add teachers to department</span> <span class="material-symbols-outlined dept-mgmt-dropdown-arrow">expand_more</span></button> <div class="dept-mgmt-dropdown-menu"><div class="dept-mgmt-search-container"><!> <input type="text" class="dept-mgmt-search-input" placeholder="Search teachers..."/> <span>search</span></div> <!> <!></div></div> <p class="dept-mgmt-form-help">Select teachers who will be part of this department.</p> <!></div></div> <div class="dept-mgmt-assign-actions"><button type="button" class="dept-mgmt-cancel-button">Cancel</button> <button type="submit" class="dept-mgmt-assign-submit-button"><!></button></div></form></div></div>'),Qm=o('<div><div class="dept-mgmt-department-header"><div class="dept-mgmt-department-title"><h3 class="dept-mgmt-department-name"> </h3></div> <div class="dept-mgmt-action-buttons"><a><button type="button" class="dept-mgmt-assign-button"><span class="material-symbols-outlined"> </span></button></a> <a><button type="button" class="dept-mgmt-edit-button"><span class="material-symbols-outlined"> </span></button></a> <button type="button" class="dept-mgmt-remove-button" title="Remove Department"><span class="material-symbols-outlined">delete</span></button></div></div> <div class="dept-mgmt-department-details"><div class="dept-mgmt-department-code"><span class="material-symbols-outlined">tag</span> <span> </span></div> <div class="dept-mgmt-department-subjects"><span class="material-symbols-outlined">subject</span> <span> </span></div> <div class="dept-mgmt-department-teachers"><span class="material-symbols-outlined">person</span> <span> </span></div> <div class="dept-mgmt-department-created"><span class="material-symbols-outlined">calendar_today</span> <span> </span></div></div> <!> <!></div>'),Vm=o('<div class="dept-mgmt-container"><div class="dept-mgmt-header"><div class="dept-mgmt-header-content"><h1 class="dept-mgmt-page-title">Department Management</h1> <p class="dept-mgmt-page-subtitle">Create and manage academic departments, assign subjects and teachers</p></div></div> <div class="dept-mgmt-create-section"><h2 class="dept-mgmt-section-title">Create New Department</h2> <p class="dept-mgmt-section-subtitle">Add a new academic department to organize subjects and teachers</p> <div class="dept-mgmt-create-form"><div class="dept-mgmt-form-row"><div class="dept-mgmt-form-group"><label for="departmentName" class="dept-mgmt-form-label">Department Name *</label> <input id="departmentName" type="text" placeholder="e.g., Mathematics Department" class="dept-mgmt-form-input"/></div> <div class="dept-mgmt-form-group"><label for="departmentCode" class="dept-mgmt-form-label">Department Code *</label> <input id="departmentCode" type="text" placeholder="e.g., MATH-DEPT" class="dept-mgmt-form-input"/></div></div> <div class="dept-mgmt-form-actions"><button type="submit" class="dept-mgmt-btn-primary"><!></button></div></div></div> <div class="dept-mgmt-departments-section"><div class="dept-mgmt-section-header"><div class="section-title-group"><h2 class="dept-mgmt-section-title">All Departments</h2> <p class="dept-mgmt-section-subtitle">Manage existing departments, assign subjects and teachers</p></div></div> <div class="dept-mgmt-search-filter-container"><div class="search-container"><div class="search-input-wrapper"><span class="material-symbols-outlined search-icon">search</span> <input type="text" class="search-input" placeholder="Search departments by name or code..."/> <!></div></div> <div class="filter-container"><div><button type="button"><!> <span class="material-symbols-outlined dropdown-arrow">expand_more</span></button> <div class="dropdown-menu"></div></div></div></div> <div class="dept-mgmt-departments-grid"><!></div></div></div>');function Jm(re,_){Nt(_,!1);const f=u(),S=u(),T=u();let D=u(!1),y=u([]),h=u([]),R=u(""),H=u(""),O=u(""),te=u([]),me=u([]),b=u("all"),W=u(!1),A=u(null),q=u(""),J=u(""),x=u(!1),F=u(null),ve=u(!1),K=u([]),Le=u([]),ge=u(!1),P=u(!1),oe=u(""),se=u(""),Z=u(!1);const Ce=[{id:"all",name:"All Departments",icon:"corporate_fare"},{id:"with_subjects",name:"With Subjects",icon:"book"},{id:"with_teachers",name:"With Teachers",icon:"person"},{id:"empty",name:"Empty Departments",icon:"folder_open"}];async function X(){s(Z,!0);try{const V=await ut.get("/api/departments?action=departments");V.success?s(te,V.data.map(be=>({id:be.id,name:be.name,code:be.code,subjects:be.subjects||[],teachers:be.teachers||[],createdAt:be.created_at?be.created_at.split("T")[0]:new Date().toISOString().split("T")[0]}))):qe.error("Failed to load departments")}catch(V){console.error("Error fetching departments:",V),qe.error("Failed to load departments")}finally{s(Z,!1)}}async function C(){try{const V=await ut.get("/api/departments?action=subjects");V.success?s(K,V.data.map(be=>({id:be.id,name:be.name,code:be.code,gradeLevel:`Grade ${be.grade_level}`}))):qe.error("Failed to load subjects")}catch(V){console.error("Error fetching subjects:",V),qe.error("Failed to load subjects")}finally{}}async function he(){try{const V=await ut.get("/api/departments?action=teachers");V.success?s(Le,V.data.map(be=>({id:be.id,name:be.full_name||`${be.first_name} ${be.last_name}`,accountNumber:be.account_number}))):qe.error("Failed to load teachers")}catch(V){console.error("Error fetching teachers:",V),qe.error("Failed to load teachers")}finally{}}Bt(async()=>{await Promise.all([X(),C(),he()]),fe()});function fe(V=e(te),be=e(b),Je=e(R)){let ga=[...V];be==="with_subjects"?ga=ga.filter(qa=>qa.subjects.length>0):be==="with_teachers"?ga=ga.filter(qa=>qa.teachers.length>0):be==="empty"&&(ga=ga.filter(qa=>qa.subjects.length===0&&qa.teachers.length===0)),Je.trim()!==""&&(ga=ga.filter(qa=>qa.name.toLowerCase().includes(Je.toLowerCase())||qa.code.toLowerCase().includes(Je.toLowerCase()))),s(me,ga)}function E(){s(W,!e(W))}function $(V){s(b,V.id),s(W,!1)}async function Y(){if(!e(H).trim()||!e(O).trim()){qe.error("Please fill in all required fields");return}if(e(te).some(V=>V.code.toLowerCase()===e(O).toLowerCase())){qe.error("Department code already exists");return}s(D,!0);try{const V=await ut.post("/api/departments",{name:e(H).trim(),code:e(O).trim().toUpperCase()});V.success?(await X(),s(H,""),s(O,""),qe.success("Department created successfully")):qe.error(V.error||"Failed to create department")}catch(V){console.error("Error creating department:",V);const be=V.message||"Failed to create department. Please try again.";qe.error(be)}finally{s(D,!1)}}async function ee(V){if(V.preventDefault(),!e(x)){s(x,!0);try{if(!e(q).trim()||!e(J).trim()){qe.error("Department name and code are required");return}if(e(J).trim().length>20){qe.error("Department code cannot exceed 20 characters");return}if(e(te).find(Ke=>Ke.code.toLowerCase()===e(J).trim().toLowerCase()&&Ke.id!==e(A))){qe.error("Department code already exists");return}const Je=e(te).find(Ke=>Ke.id===e(A));if(!Je)throw new Error("Department not found");const ga=Je.teachers?Je.teachers.map(Ke=>Ke.id):[],qa=Je.subjects?Je.subjects.map(Ke=>Ke.id):[],aa=await ut.put("/api/departments",{id:e(A),name:e(q).trim(),code:e(J).trim().toUpperCase(),teachers:ga,subjects:qa});aa.success?(await X(),s(A,null),s(q,""),s(J,""),qe.success("Department updated successfully")):qe.error(aa.error||"Failed to update department")}catch(be){console.error("Error updating department:",be);const Je=be.message||"Failed to update department. Please try again.";qe.error(Je)}finally{s(x,!1)}}}function L(V){e(A)===V.id?(s(A,null),s(q,""),s(J,"")):(e(F)===V.id&&(s(F,null),s(y,[]),s(h,[]),s(ge,!1),s(P,!1),s(oe,""),s(se,"")),s(A,V.id),s(q,V.name),s(J,V.code))}function De(V){ms.confirm("Remove Department",`<p>Are you sure you want to remove the department <strong>"${V.name}"</strong>?</p>
			 <p class="warning-text">This action will also remove all subject and teacher assignments.</p>`,async()=>{try{const be=await ut.delete("/api/departments",{id:V.id,name:V.name});be.success?(await X(),qe.success("Department removed successfully")):qe.error(be.error||"Failed to remove department")}catch(be){console.error("Error removing department:",be),qe.error("Failed to remove department. Please try again.")}},()=>{},{size:"small"})}function M(V){e(F)===V.id?(s(F,null),s(y,[]),s(h,[]),s(ge,!1),s(P,!1),s(oe,""),s(se,"")):(e(A)===V.id&&(s(A,null),s(q,""),s(J,"")),s(F,V.id),s(y,V.subjects?V.subjects.map(be=>be.id):[]),s(h,V.teachers?V.teachers.map(be=>be.id):[]),s(ge,!1),s(P,!1),s(oe,""),s(se,""))}function le(){s(ge,!e(ge)),e(ge)&&s(P,!1)}function Pe(){s(P,!e(P)),e(P)&&s(ge,!1)}function Oe(V){e(y).findIndex(Je=>Je===V.id)>-1?s(y,e(y).filter(Je=>Je!==V.id)):s(y,[...e(y),V.id])}function We(V){e(h).findIndex(Je=>Je===V.id)>-1?s(h,e(h).filter(Je=>Je!==V.id)):s(h,[...e(h),V.id])}function Ee(){if(e(S).every(be=>e(y).some(Je=>Je===be.id)))s(y,e(y).filter(be=>!e(S).some(Je=>Je.id===be)));else{const be=e(S).filter(Je=>!e(y).some(ga=>ga===Je.id)).map(Je=>Je.id);s(y,[...e(y),...be])}}function Ye(){if(e(T).every(be=>e(h).some(Je=>Je===be.id)))s(h,e(h).filter(be=>!e(T).some(Je=>Je.id===be)));else{const be=e(T).filter(Je=>!e(h).some(ga=>ga===Je.id)).map(Je=>Je.id);s(h,[...e(h),...be])}}function He(V){s(y,e(y).filter(be=>be!==V))}function Fe(V){s(h,e(h).filter(be=>be!==V))}async function _e(){s(ve,!0);try{const V=e(te).find(ga=>ga.id===e(F));if(!V)throw new Error("Department not found");const be={id:e(F),name:V.name,code:V.code,teachers:e(h),subjects:e(y)},Je=await ut.put("/api/departments",be);if(!Je.success)throw new Error(Je.error||"Failed to update assignments");s(te,e(te).map(ga=>{if(ga.id===e(F)){const qa=e(K).filter(Ke=>e(y).includes(Ke.id)),aa=e(Le).filter(Ke=>e(h).includes(Ke.id));return{...ga,subjects:qa,teachers:aa}}return ga})),qe.success("Department assignments updated successfully"),s(F,null),s(y,[]),s(h,[])}catch(V){console.error("Error assigning department:",V),qe.error("Failed to update assignments. Please try again.")}finally{s(ve,!1)}}function we(V){return V.subjects||[]}function Ne(V){return V.teachers||[]}function Re(V){}function ye(V){if(!V)return"";const be=V.split("-");return be.length===3?`${be[1]}-${be[2]}-${be[0]}`:V}Na(()=>e(b),()=>{s(f,Ce.find(V=>V.id===e(b)))}),Na(()=>(e(te),e(b),e(R)),()=>{e(te)&&fe(e(te),e(b),e(R))}),Na(()=>(e(K),e(oe)),()=>{s(S,e(K).filter(V=>V.name.toLowerCase().includes(e(oe).toLowerCase())||V.code.toLowerCase().includes(e(oe).toLowerCase())))}),Na(()=>(e(Le),e(se)),()=>{s(T,e(Le).filter(V=>V.name.toLowerCase().includes(e(se).toLowerCase())||V.accountNumber.toLowerCase().includes(e(se).toLowerCase())))}),ns(),os();var ue=Vm();N("click",Ps,Re);var g=r(t(ue),2),v=r(t(g),4),l=t(v),c=t(l),w=r(t(c),2);ka(w),a(c);var G=r(c,2),ce=r(t(G),2);ka(ce),a(G),a(l);var Ae=r(l,2),ke=t(Ae),I=t(ke);{var Se=V=>{var be=wt("Creating...");i(V,be)},xe=V=>{var be=Tm();Ea(),i(V,be)};m(I,V=>{e(D)?V(Se):V(xe,!1)})}a(ke),a(Ae),a(v),a(g);var ze=r(g,2),sa=r(t(ze),2),va=t(sa),La=t(va),ae=r(t(La),2);ka(ae);var U=r(ae,2);{var Q=V=>{var be=Am();N("click",be,()=>s(R,"")),i(V,be)};m(U,V=>{e(R)&&V(Q)})}a(La),a(va);var Ue=r(va,2),ra=t(Ue);let ca;var oa=t(ra);let _a;var ha=t(oa);{var fa=V=>{var be=jm(),Je=t(be),ga=t(Je,!0);a(Je);var qa=r(Je,2),aa=t(qa),Ke=t(aa,!0);a(aa),a(qa),a(be),p(()=>{d(ga,(e(f),n(()=>e(f).icon))),d(Ke,(e(f),n(()=>e(f).name)))}),i(V,be)},Oa=V=>{var be=Cm();i(V,be)};m(ha,V=>{e(f)?V(fa):V(Oa,!1)})}Ea(2),a(oa);var Ba=r(oa,2);ea(Ba,5,()=>Ce,V=>V.id,(V,be)=>{var Je=Nm();let ga;var qa=t(Je),aa=t(qa,!0);a(qa);var Ke=r(qa,2),ie=t(Ke),Me=t(ie,!0);a(ie),a(Ke),a(Je),p(j=>{ga=B(Je,1,"dropdown-option",null,ga,j),d(aa,(e(be),n(()=>e(be).icon))),d(Me,(e(be),n(()=>e(be).name)))},[()=>({selected:e(b)===e(be).id})]),N("click",Je,()=>$(e(be))),i(V,Je)}),a(Ba),a(ra),a(Ue),a(sa);var tt=r(sa,2),it=t(tt);{var mt=V=>{var be=$m();i(V,be)},st=V=>{var be=ya(),Je=na(be);{var ga=aa=>{var Ke=qm(),ie=r(t(Ke),2),Me=t(ie,!0);a(ie);var j=r(ie,2),$e=t(j,!0);a(j),a(Ke),p(()=>{d(Me,e(R)?"No departments found":"No departments created yet"),d($e,e(R)?"Try adjusting your search terms":"Create your first department to get started")}),i(aa,Ke)},qa=aa=>{var Ke=ya(),ie=na(Ke);ea(ie,1,()=>e(me),Me=>Me.id,(Me,j)=>{var $e=Qm();let Ie;var Ve=t($e),pe=t(Ve),je=t(pe),Ze=t(je,!0);a(je),a(pe);var ua=r(pe,2),wa=t(ua),ma=t(wa),Ra=t(ma),za=t(Ra,!0);a(Ra),a(ma),a(wa);var Wa=r(wa,2),Xa=t(Wa),kt=t(Xa),Ft=t(kt,!0);a(kt),a(Xa),a(Wa);var Rt=r(Wa,2);a(ua),a(Ve);var pt=r(Ve,2),Tt=t(pt),Aa=r(t(Tt),2),pa=t(Aa,!0);a(Aa),a(Tt);var ja=r(Tt,2),Za=r(t(ja),2),$a=t(Za);a(Za),a(ja);var Sa=r(ja,2),bt=r(t(Sa),2),Dt=t(bt);a(bt),a(Sa);var qt=r(Sa,2),Mt=r(t(qt),2),as=t(Mt);a(Mt),a(qt),a(pt);var Yt=r(pt,2);{var zt=Te=>{var Be=Lm(),Ca=t(Be),Ya=r(t(Ca),2),Da=t(Ya),ta=t(Da),ct=r(t(ta),2);ka(ct),a(ta);var lt=r(ta,2),Fa=r(t(lt),2);ka(Fa),a(lt),a(Da);var dt=r(Da,2),ht=t(dt),It=t(ht);a(ht);var Ia=r(ht,2),Pa=t(Ia);{var Qa=et=>{var yt=wt("Updating...");i(et,yt)},Ua=et=>{var yt=wt("Update Department");i(et,yt)};m(Pa,et=>{e(x)?et(Qa):et(Ua,!1)})}a(Ia),a(dt),a(Ya),a(Ca),a(Be),p(()=>{la(ht,"href",`#department-card-${e(j),n(()=>e(j).id)??""}`),Ia.disabled=e(x)||!e(q)||!e(J)}),Ta(ct,()=>e(q),et=>s(q,et)),Ta(Fa,()=>e(J),et=>s(J,et)),N("click",It,()=>L(e(j))),N("submit",Ya,Ss(ee)),i(Te,Be)};m(Yt,Te=>{e(A),e(j),n(()=>e(A)===e(j).id)&&Te(zt)})}var ss=r(Yt,2);{var z=Te=>{var Be=Ym(),Ca=t(Be),Ya=r(t(Ca),2),Da=t(Ya),ta=t(Da),ct=r(t(ta),2);let lt;var Fa=t(ct);let dt;var ht=r(Fa,2),It=t(ht),Ia=t(It);{var Pa=Ja=>{const at=ws(()=>(e(S),e(y),n(()=>e(S).every(Vt=>e(y).some(Xt=>Xt===Vt.id)))));var St=Em(),Qt=t(St),Ht=t(Qt,!0);a(Qt),a(St),p(()=>{la(St,"title",`${e(at)?"Unselect All":"Select All"} (${e(S),n(()=>e(S).length)??""})`),d(Ht,e(at)?"deselect":"select_all")}),N("click",St,Ee),i(Ja,St)};m(Ia,Ja=>{e(S),n(()=>e(S).length>0)&&Ja(Pa)})}var Qa=r(Ia,2);ka(Qa);var Ua=r(Qa,2);let et;a(It);var yt=r(It,2);ea(yt,1,()=>e(S),Ja=>Ja.id,(Ja,at)=>{var St=Fm();let Qt;var Ht=t(St),Vt=t(Ht),Xt=t(Vt,!0);a(Vt),a(Ht);var es=r(Ht,4),Pt=t(es),hs=t(Pt,!0);a(Pt);var cs=r(Pt,2),_s=t(cs);a(cs),a(es),a(St),p((Ot,rs)=>{Qt=B(St,1,"dept-mgmt-dropdown-option dept-mgmt-subject-option",null,Qt,Ot),d(Xt,rs),d(hs,(e(at),n(()=>e(at).name))),d(_s,`${e(at),n(()=>e(at).code)??""} • ${e(at),n(()=>e(at).gradeLevel)??""}`)},[()=>({selected:e(y).some(Ot=>Ot===e(at).id)}),()=>(e(y),e(at),n(()=>e(y).some(Ot=>Ot===e(at).id)?"check_box":"check_box_outline_blank"))]),N("click",St,()=>Oe(e(at))),i(Ja,St)});var At=r(yt,2);{var jt=Ja=>{var at=Mm();i(Ja,at)};m(At,Ja=>{e(S),n(()=>e(S).length===0)&&Ja(jt)})}a(ht),a(ct);var k=r(ct,4);{var de=Ja=>{var at=Im(),St=t(at),Qt=t(St),Ht=t(Qt);a(Qt),a(St);var Vt=r(St,2);ea(Vt,5,()=>e(y),Xt=>Xt,(Xt,es)=>{const Pt=ws(()=>(e(K),e(es),n(()=>e(K).find(Ot=>Ot.id===e(es)))));var hs=ya(),cs=na(hs);{var _s=Ot=>{var rs=Gm(),Ds=t(rs),Gt=t(Ds,!0);a(Ds);var Et=r(Ds,2),Kt=t(Et,!0);a(Et);var ts=r(Et,2);a(rs),p(()=>{d(Gt,(us(e(Pt)),n(()=>e(Pt).name))),d(Kt,(us(e(Pt)),n(()=>e(Pt).code))),la(ts,"aria-label",`Remove ${us(e(Pt)),n(()=>e(Pt).name)??""}`)}),N("click",ts,()=>He(e(es))),i(Ot,rs)};m(cs,Ot=>{e(Pt)&&Ot(_s)})}i(Xt,hs)}),a(Vt),a(at),p(()=>d(Ht,`${e(y),n(()=>e(y).length)??""} subject${e(y),n(()=>e(y).length!==1?"s":"")??""} selected`)),i(Ja,at)};m(k,Ja=>{e(y),n(()=>e(y).length>0)&&Ja(de)})}a(ta),a(Da);var Ge=r(Da,2),ia=t(Ge),ne=r(t(ia),2);let Qe;var Xe=t(ne);let Ga;var vt=r(Xe,2),_t=t(vt),da=t(_t);{var ba=Ja=>{const at=ws(()=>(e(T),e(h),n(()=>e(T).every(Vt=>e(h).some(Xt=>Xt===Vt.id)))));var St=Pm(),Qt=t(St),Ht=t(Qt,!0);a(Qt),a(St),p(()=>{la(St,"title",`${e(at)?"Unselect All":"Select All"} (${e(T),n(()=>e(T).length)??""})`),d(Ht,e(at)?"deselect":"select_all")}),N("click",St,Ye),i(Ja,St)};m(da,Ja=>{e(T),n(()=>e(T).length>0)&&Ja(ba)})}var nt=r(da,2);ka(nt);var Ka=r(nt,2);let Ma;a(_t);var ot=r(_t,2);ea(ot,1,()=>e(T),Ja=>Ja.id,(Ja,at)=>{var St=Rm();let Qt;var Ht=t(St),Vt=t(Ht),Xt=t(Vt,!0);a(Vt),a(Ht);var es=r(Ht,4),Pt=t(es),hs=t(Pt,!0);a(Pt);var cs=r(Pt,2),_s=t(cs,!0);a(cs),a(es),a(St),p((Ot,rs)=>{Qt=B(St,1,"dept-mgmt-dropdown-option dept-mgmt-teacher-option",null,Qt,Ot),d(Xt,rs),d(hs,(e(at),n(()=>e(at).name))),d(_s,(e(at),n(()=>e(at).accountNumber)))},[()=>({selected:e(h).some(Ot=>Ot===e(at).id)}),()=>(e(h),e(at),n(()=>e(h).some(Ot=>Ot===e(at).id)?"check_box":"check_box_outline_blank"))]),N("click",St,()=>We(e(at))),i(Ja,St)});var xt=r(ot,2);{var Va=Ja=>{var at=Om();i(Ja,at)};m(xt,Ja=>{e(T),n(()=>e(T).length===0)&&Ja(Va)})}a(vt),a(ne);var ft=r(ne,4);{var Lt=Ja=>{var at=Wm(),St=t(at),Qt=t(St),Ht=t(Qt);a(Qt),a(St);var Vt=r(St,2);ea(Vt,5,()=>e(h),Xt=>Xt,(Xt,es)=>{const Pt=ws(()=>(e(Le),e(es),n(()=>e(Le).find(Ot=>Ot.id===e(es)))));var hs=ya(),cs=na(hs);{var _s=Ot=>{var rs=Um(),Ds=t(rs),Gt=t(Ds,!0);a(Ds);var Et=r(Ds,2),Kt=t(Et,!0);a(Et);var ts=r(Et,2);a(rs),p(()=>{d(Gt,(us(e(Pt)),n(()=>e(Pt).name))),d(Kt,(us(e(Pt)),n(()=>e(Pt).accountNumber))),la(ts,"aria-label",`Remove ${us(e(Pt)),n(()=>e(Pt).name)??""}`)}),N("click",ts,()=>Fe(e(es))),i(Ot,rs)};m(cs,Ot=>{e(Pt)&&Ot(_s)})}i(Xt,hs)}),a(Vt),a(at),p(()=>d(Ht,`${e(h),n(()=>e(h).length)??""} teacher${e(h),n(()=>e(h).length!==1?"s":"")??""} selected`)),i(Ja,at)};m(ft,Ja=>{e(h),n(()=>e(h).length>0)&&Ja(Lt)})}a(ia),a(Ge);var Zt=r(Ge,2),xs=t(Zt),ps=r(xs,2),$s=t(ps);{var Fs=Ja=>{var at=wt("Assigning...");i(Ja,at)},ks=Ja=>{var at=wt("Update");i(Ja,at)};m($s,Ja=>{e(ve)?Ja(Fs):Ja(ks,!1)})}a(ps),a(Zt),a(Ya),a(Ca),a(Be),p((Ja,at,St,Qt,Ht,Vt)=>{lt=B(ct,1,"dept-mgmt-custom-dropdown",null,lt,Ja),dt=B(Fa,1,"dept-mgmt-dropdown-trigger",null,dt,at),et=B(Ua,1,"material-symbols-outlined",null,et,St),Qe=B(ne,1,"dept-mgmt-custom-dropdown",null,Qe,Qt),Ga=B(Xe,1,"dept-mgmt-dropdown-trigger",null,Ga,Ht),Ma=B(Ka,1,"material-symbols-outlined",null,Ma,Vt),ps.disabled=e(ve)},[()=>({open:e(ge)}),()=>({selected:e(y).length>0}),()=>({"dept-mgmt-search-icon-create":e(S).length>0,"dept-mgmt-search-icon":e(S).length===0}),()=>({open:e(P)}),()=>({selected:e(h).length>0}),()=>({"dept-mgmt-search-icon-create":e(T).length>0,"dept-mgmt-search-icon":e(T).length===0})]),N("click",Fa,le),Ta(Qa,()=>e(oe),Ja=>s(oe,Ja)),N("click",Xe,Pe),Ta(nt,()=>e(se),Ja=>s(se,Ja)),N("click",xs,()=>M(e(j))),N("submit",Ya,Ss(_e)),i(Te,Be)};m(ss,Te=>{e(F),e(j),n(()=>e(F)===e(j).id)&&Te(z)})}a($e),p((Te,Be,Ca,Ya)=>{Ie=B($e,1,"dept-mgmt-department-card",null,Ie,Te),la($e,"id",`department-card-${e(j),n(()=>e(j).id)??""}`),d(Ze,(e(j),n(()=>e(j).name))),la(wa,"href",`#department-card-${e(j),n(()=>e(j).id)??""}`),la(ma,"title",(e(F),e(j),n(()=>e(F)===e(j).id?"Cancel Assign":"Assign"))),d(za,(e(F),e(j),n(()=>e(F)===e(j).id?"close":"add_circle"))),la(Wa,"href",`#department-card-${e(j),n(()=>e(j).id)??""}`),la(Xa,"title",(e(A),e(j),n(()=>e(A)===e(j).id?"Cancel Edit":"Edit Department"))),d(Ft,(e(A),e(j),n(()=>e(A)===e(j).id?"close":"edit"))),d(pa,(e(j),n(()=>e(j).code))),d($a,`${Be??""} Subjects`),d(Dt,`${Ca??""} Teachers`),d(as,`Created: ${Ya??""}`)},[()=>({editing:e(A)===e(j).id,assigning:e(F)===e(j).id}),()=>(e(j),n(()=>we(e(j)).length)),()=>(e(j),n(()=>Ne(e(j)).length)),()=>(e(j),n(()=>ye(e(j).createdAt)))]),N("click",ma,()=>M(e(j))),N("click",Xa,()=>L(e(j))),N("click",Rt,()=>De(e(j))),i(Me,$e)}),i(aa,Ke)};m(Je,aa=>{e(me),n(()=>e(me).length===0)?aa(ga):aa(qa,!1)},!0)}i(V,be)};m(it,V=>{e(Z)?V(mt):V(st,!1)})}a(tt),a(ze),a(ue),p((V,be)=>{w.disabled=e(D),ce.disabled=e(D),ke.disabled=e(D)||!e(H)||!e(O),ca=B(ra,1,"custom-dropdown",null,ca,V),_a=B(oa,1,"dropdown-trigger filter-trigger",null,_a,be)},[()=>({open:e(W)}),()=>({selected:e(b)!=="all"})]),Ta(w,()=>e(H),V=>s(H,V)),Ta(ce,()=>e(O),V=>s(O,V)),N("click",ke,Y),Ta(ae,()=>e(R),V=>s(R,V)),N("click",oa,E),i(re,ue),$t()}var Hm=o('<div class="admindocreq-selected-option"><span class="material-symbols-outlined admindocreq-option-icon">filter_list</span> <div class="admindocreq-option-content"><span class="admindocreq-option-name"> </span></div></div>'),Bm=o('<span class="admindocreq-placeholder">All Statuses</span>'),zm=o('<button type="button"><span class="material-symbols-outlined admindocreq-option-icon">filter_list</span> <div class="admindocreq-option-content"><span class="admindocreq-option-name"> </span> <span class="admindocreq-option-description"> </span></div></button>'),Zm=o('<div class="admindocreq-selected-option"><span class="material-symbols-outlined admindocreq-option-icon">description</span> <div class="admindocreq-option-content"><span class="admindocreq-option-name"> </span></div></div>'),Km=o('<span class="admindocreq-placeholder">All Document Types</span>'),Xm=o('<button type="button"><span class="material-symbols-outlined admindocreq-option-icon">description</span> <div class="admindocreq-option-content"><span class="admindocreq-option-name"> </span> <span class="admindocreq-option-description"> </span></div></button>'),ep=o('<div class="admindocreq-selected-option"><span class="material-symbols-outlined admindocreq-option-icon">school</span> <div class="admindocreq-option-content"><span class="admindocreq-option-name"> </span></div></div>'),ap=o('<span class="admindocreq-placeholder">All Grades</span>'),tp=o('<button type="button"><span class="material-symbols-outlined admindocreq-option-icon">school</span> <div class="admindocreq-option-content"><span class="admindocreq-option-name"> </span> <span class="admindocreq-option-description"> </span></div></button>'),sp=o('<div class="admindocreq-request-priority"><span class="material-symbols-outlined">info</span> <span> </span></div>'),rp=o('<div class="admindocreq-request-actions"><button class="admindocreq-approve-button"><span class="material-symbols-outlined">check_circle</span> Approve</button> <button class="admindocreq-reject-button"><span class="material-symbols-outlined">cancel</span> Reject</button></div>'),ip=o('<span class="admindocreq-footer-info"> </span>'),np=o('<div class="admindocreq-request-actions processing-footer"><!> <button class="admindocreq-complete-button"><span class="material-symbols-outlined">task_alt</span> Mark Complete</button></div>'),op=o('<div class="admindocreq-request-actions completed-footer"><span class="admindocreq-footer-info"> </span></div>'),lp=o('<div class="admindocreq-request-actions rejected-footer"><span class="admindocreq-footer-info"> </span></div>'),dp=o('<div class="admindocreq-request-actions cancelled-footer"><span class="admindocreq-footer-info"> </span></div>'),cp=o('<div class="admindocreq-request-card"><div class="admindocreq-request-header"><div class="admindocreq-request-info"><div class="admindocreq-student-info"><h3 class="admindocreq-student-name"> </h3></div></div> <div class="admindocreq-action-buttons"><div><span class="material-symbols-outlined"> </span> </div></div></div> <div class="admindocreq-request-content"><div class="admindocreq-document-info"><div class="admindocreq-document-type"><span class="material-symbols-outlined">person</span> <span> </span></div> <div class="admindocreq-request-date"><span class="material-symbols-outlined">calendar_today</span> <span> </span></div> <!></div></div> <!></div>'),vp=o('<div class="admindocreq-no-results"><span class="material-symbols-outlined admindocreq-no-results-icon">search_off</span> <p>No document requests found matching your search criteria.</p></div>'),up=o('<div class="admin-document-requests-container"><div class="admin-docreq-header"><div class="admin-header-content"><h1 class="admin-page-title">Document Requests</h1> <p class="admin-page-subtitle">Manage and process student document requests</p></div></div> <div class="admin-docreq-filters-section"><div class="admin-section-header"><h2 class="admin-section-title">Filter Requests</h2> <p class="admin-section-subtitle">Search and filter document requests</p></div> <div class="admindocreq-filters-container"><div class="admindocreq-search-container"><input type="text" placeholder="Search by student name, ID, or document type..." class="admindocreq-search-input"/> <span class="material-symbols-outlined admindocreq-search-icon">search</span></div> <div><button type="button"><!> <span class="material-symbols-outlined admindocreq-dropdown-arrow">expand_more</span></button> <div class="admindocreq-dropdown-menu"><button type="button"><span class="material-symbols-outlined admindocreq-option-icon">clear_all</span> <div class="admindocreq-option-content"><span class="admindocreq-option-name">All Statuses</span></div></button> <!></div></div> <div><button type="button"><!> <span class="material-symbols-outlined admindocreq-dropdown-arrow">expand_more</span></button> <div class="admindocreq-dropdown-menu"><button type="button"><span class="material-symbols-outlined admindocreq-option-icon">clear_all</span> <div class="admindocreq-option-content"><span class="admindocreq-option-name">All Document Types</span></div></button> <!></div></div> <div><button type="button"><!> <span class="material-symbols-outlined admindocreq-dropdown-arrow">expand_more</span></button> <div class="admindocreq-dropdown-menu"><button type="button"><span class="material-symbols-outlined admindocreq-option-icon">clear_all</span> <div class="admindocreq-option-content"><span class="admindocreq-option-name">All Grades</span></div></button> <!></div></div></div></div> <div class="admin-docreq-requests-section"><div class="admin-section-header"><h2 class="admin-section-title"> </h2> <p class="admin-section-subtitle">Manage student document requests</p></div> <div class="admindocreq-requests-grid"></div></div></div>');function mp(re,_){Nt(_,!1);const f=u(),S=u(),T=u(),D=u();let y=u(""),h=u(""),R=u(""),H=u(""),O=u(!1),te=u(!1),me=u(!1);const b=[{value:7,label:"Grade 7",description:"Junior High School - First Year"},{value:8,label:"Grade 8",description:"Junior High School - Second Year"},{value:9,label:"Grade 9",description:"Junior High School - Third Year"},{value:10,label:"Grade 10",description:"Junior High School - Fourth Year"}],W=[{id:"transcript",name:"Transcript",description:"Official academic record"},{id:"enrollment",name:"Enrollment Certificate",description:"Proof of enrollment"},{id:"grade-report",name:"Grade Report",description:"Semester grade report"},{id:"diploma",name:"Diploma",description:"Official graduation certificate"},{id:"certificate",name:"Certificate",description:"Academic achievement certificate"}],A=[{id:"pending",name:"Pending",description:"Awaiting review"},{id:"processing",name:"Processing",description:"Currently being processed"},{id:"completed",name:"Completed",description:"Ready for pickup/download"},{id:"rejected",name:"Rejected",description:"Request denied"},{id:"cancelled",name:"Cancelled",description:"Cancelled by student"}];let q=u([{id:1,studentName:"Maria Santos",studentId:"STU-2024-001",gradeLevel:"Grade 10",documentType:"Transcript",purpose:"College application requirements",requestDate:"01/15/2024",status:"pending"},{id:2,studentName:"Juan Dela Cruz",studentId:"STU-2024-002",gradeLevel:"Grade 9",documentType:"Enrollment Certificate",purpose:"Scholarship application",requestDate:"01/14/2024",completedDate:"01/16/2024",status:"completed"},{id:3,studentName:"Ana Reyes",studentId:"STU-2024-003",gradeLevel:"Grade 8",documentType:"Grade Report",purpose:"Transfer to another school",requestDate:"01/13/2024",approvalNote:"Approved for transfer - all requirements met",status:"processing"},{id:4,studentName:"Carlos Garcia",studentId:"STU-2024-004",gradeLevel:"Grade 7",documentType:"Certificate",purpose:"Academic achievement recognition",requestDate:"01/12/2024",rejectionReason:"Incomplete academic requirements",status:"rejected"},{id:5,studentName:"Sofia Mendoza",studentId:"STU-2024-005",gradeLevel:"Grade 10",documentType:"Diploma",purpose:"Employment requirements",requestDate:"01/11/2024",cancelledDate:"01/13/2024",status:"cancelled"}]);function J(){s(O,!e(O))}function x(){s(te,!e(te))}function F(){s(me,!e(me))}function ve(U){U?s(h,U.id):s(h,""),s(O,!1)}function K(U){U?s(R,U.id):s(R,""),s(te,!1)}function Le(U){U?s(H,U.value):s(H,""),s(me,!1)}function ge(U){ms.prompt("Approve Document Request","Please provide an approval note (optional):","Enter approval note...",Q=>{s(q,e(q).map(Ue=>Ue.id===U&&Ue.status==="pending"?{...Ue,status:"processing",approvalNote:Q&&Q.trim()?Q.trim():"Approved without additional notes"}:Ue)),qe.success("Request approved and moved to processing")},()=>{},{size:"medium",allowEmpty:!0})}function P(U){ms.prompt("Reject Document Request","Please provide a reason for rejecting this document request:","Enter rejection reason...",Q=>{Q&&Q.trim()&&(s(q,e(q).map(Ue=>Ue.id===U&&Ue.status==="pending"?{...Ue,status:"rejected",rejectionReason:Q.trim()}:Ue)),qe.success("Request rejected successfully"))},()=>{},{size:"medium"})}function oe(U){s(q,e(q).map(Q=>Q.id===U&&Q.status==="processing"?{...Q,status:"completed",completedDate:new Date().toLocaleDateString("en-US")}:Q)),qe.success("Request marked as completed")}function se(U){U.target.closest(".admindocreq-status-filter")||s(O,!1),U.target.closest(".admindocreq-doctype-filter")||s(te,!1),U.target.closest(".admindocreq-grade-filter")||s(me,!1)}function Z(U){switch(U){case"completed":return"check_circle";case"processing":return"sync";case"pending":return"hourglass_empty";case"rejected":return"cancel";case"cancelled":return"block";default:return"help"}}Na(()=>e(h),()=>{s(f,A.find(U=>U.id===e(h)))}),Na(()=>e(R),()=>{s(S,W.find(U=>U.id===e(R)))}),Na(()=>e(H),()=>{s(T,b.find(U=>U.value===e(H)))}),Na(()=>(e(q),e(y),e(h),e(R),e(H)),()=>{s(D,e(q).filter(U=>{const Q=U.studentName.toLowerCase().includes(e(y).toLowerCase())||U.studentId.toLowerCase().includes(e(y).toLowerCase())||U.documentType.toLowerCase().includes(e(y).toLowerCase()),Ue=e(h)?U.status===e(h):!0,ra=e(R)?U.documentType.toLowerCase()===W.find(oa=>oa.id===e(R))?.name.toLowerCase():!0,ca=e(H)?U.gradeLevel===`Grade ${e(H)}`:!0;return Q&&Ue&&ra&&ca}))}),ns(),os();var Ce=up();N("click",Ps,se);var X=r(t(Ce),2),C=r(t(X),2),he=t(C),fe=t(he);ka(fe),Ea(2),a(he);var E=r(he,2);let $;var Y=t(E);let ee;var L=t(Y);{var De=U=>{var Q=Hm(),Ue=r(t(Q),2),ra=t(Ue),ca=t(ra,!0);a(ra),a(Ue),a(Q),p(()=>d(ca,(e(f),n(()=>e(f).name)))),i(U,Q)},M=U=>{var Q=Bm();i(U,Q)};m(L,U=>{e(f)?U(De):U(M,!1)})}Ea(2),a(Y);var le=r(Y,2),Pe=t(le);let Oe;var We=r(Pe,2);ea(We,1,()=>A,U=>U.id,(U,Q)=>{var Ue=zm();let ra;var ca=r(t(Ue),2),oa=t(ca),_a=t(oa,!0);a(oa);var ha=r(oa,2),fa=t(ha,!0);a(ha),a(ca),a(Ue),p(Oa=>{ra=B(Ue,1,"admindocreq-dropdown-option",null,ra,Oa),d(_a,(e(Q),n(()=>e(Q).name))),d(fa,(e(Q),n(()=>e(Q).description)))},[()=>({selected:e(h)===e(Q).id})]),N("click",Ue,()=>ve(e(Q))),i(U,Ue)}),a(le),a(E);var Ee=r(E,2);let Ye;var He=t(Ee);let Fe;var _e=t(He);{var we=U=>{var Q=Zm(),Ue=r(t(Q),2),ra=t(Ue),ca=t(ra,!0);a(ra),a(Ue),a(Q),p(()=>d(ca,(e(S),n(()=>e(S).name)))),i(U,Q)},Ne=U=>{var Q=Km();i(U,Q)};m(_e,U=>{e(S)?U(we):U(Ne,!1)})}Ea(2),a(He);var Re=r(He,2),ye=t(Re);let ue;var g=r(ye,2);ea(g,1,()=>W,U=>U.id,(U,Q)=>{var Ue=Xm();let ra;var ca=r(t(Ue),2),oa=t(ca),_a=t(oa,!0);a(oa);var ha=r(oa,2),fa=t(ha,!0);a(ha),a(ca),a(Ue),p(Oa=>{ra=B(Ue,1,"admindocreq-dropdown-option",null,ra,Oa),d(_a,(e(Q),n(()=>e(Q).name))),d(fa,(e(Q),n(()=>e(Q).description)))},[()=>({selected:e(R)===e(Q).id})]),N("click",Ue,()=>K(e(Q))),i(U,Ue)}),a(Re),a(Ee);var v=r(Ee,2);let l;var c=t(v);let w;var G=t(c);{var ce=U=>{var Q=ep(),Ue=r(t(Q),2),ra=t(Ue),ca=t(ra,!0);a(ra),a(Ue),a(Q),p(()=>d(ca,(e(T),n(()=>e(T).label)))),i(U,Q)},Ae=U=>{var Q=ap();i(U,Q)};m(G,U=>{e(T)?U(ce):U(Ae,!1)})}Ea(2),a(c);var ke=r(c,2),I=t(ke);let Se;var xe=r(I,2);ea(xe,1,()=>b,U=>U.value,(U,Q)=>{var Ue=tp();let ra;var ca=r(t(Ue),2),oa=t(ca),_a=t(oa,!0);a(oa);var ha=r(oa,2),fa=t(ha,!0);a(ha),a(ca),a(Ue),p(Oa=>{ra=B(Ue,1,"admindocreq-dropdown-option",null,ra,Oa),d(_a,(e(Q),n(()=>e(Q).label))),d(fa,(e(Q),n(()=>e(Q).description)))},[()=>({selected:e(H)===e(Q).value})]),N("click",Ue,()=>Le(e(Q))),i(U,Ue)}),a(ke),a(v),a(C),a(X);var ze=r(X,2),sa=t(ze),va=t(sa),La=t(va);a(va),Ea(2),a(sa);var ae=r(sa,2);ea(ae,5,()=>e(D),U=>U.id,(U,Q)=>{var Ue=cp(),ra=t(Ue),ca=t(ra),oa=t(ca),_a=t(oa),ha=t(_a);a(_a),a(oa),a(ca);var fa=r(ca,2),Oa=t(fa),Ba=t(Oa),tt=t(Ba,!0);a(Ba);var it=r(Ba);a(Oa),a(fa),a(ra);var mt=r(ra,2),st=t(mt),V=t(st),be=r(t(V),2),Je=t(be);a(be),a(V);var ga=r(V,2),qa=r(t(ga),2),aa=t(qa);a(qa),a(ga);var Ke=r(ga,2);{var ie=Ie=>{var Ve=sp(),pe=r(t(Ve),2),je=t(pe);a(pe),a(Ve),p(()=>d(je,`Purpose: ${e(Q),n(()=>e(Q).purpose)??""}`)),i(Ie,Ve)};m(Ke,Ie=>{e(Q),n(()=>e(Q).purpose)&&Ie(ie)})}a(st),a(mt);var Me=r(mt,2);{var j=Ie=>{var Ve=rp(),pe=t(Ve),je=r(pe,2);a(Ve),N("click",pe,()=>ge(e(Q).id)),N("click",je,()=>P(e(Q).id)),i(Ie,Ve)},$e=Ie=>{var Ve=ya(),pe=na(Ve);{var je=ua=>{var wa=np(),ma=t(wa);{var Ra=Wa=>{var Xa=ip(),kt=t(Xa);a(Xa),p(()=>d(kt,`Note: ${e(Q),n(()=>e(Q).approvalNote)??""}`)),i(Wa,Xa)};m(ma,Wa=>{e(Q),n(()=>e(Q).approvalNote)&&Wa(Ra)})}var za=r(ma,2);a(wa),N("click",za,()=>oe(e(Q).id)),i(ua,wa)},Ze=ua=>{var wa=ya(),ma=na(wa);{var Ra=Wa=>{var Xa=op(),kt=t(Xa),Ft=t(kt);a(kt),a(Xa),p(()=>d(Ft,`Completed on ${e(Q),n(()=>e(Q).completedDate)??""}`)),i(Wa,Xa)},za=Wa=>{var Xa=ya(),kt=na(Xa);{var Ft=pt=>{var Tt=lp(),Aa=t(Tt),pa=t(Aa);a(Aa),a(Tt),p(()=>d(pa,`Reason: ${e(Q),n(()=>e(Q).rejectionReason)??""}`)),i(pt,Tt)},Rt=pt=>{var Tt=ya(),Aa=na(Tt);{var pa=ja=>{var Za=dp(),$a=t(Za),Sa=t($a);a($a),a(Za),p(()=>d(Sa,`Cancelled on ${e(Q),n(()=>e(Q).cancelledDate)??""}`)),i(ja,Za)};m(Aa,ja=>{e(Q),n(()=>e(Q).status==="cancelled")&&ja(pa)},!0)}i(pt,Tt)};m(kt,pt=>{e(Q),n(()=>e(Q).status==="rejected")?pt(Ft):pt(Rt,!1)},!0)}i(Wa,Xa)};m(ma,Wa=>{e(Q),n(()=>e(Q).status==="completed")?Wa(Ra):Wa(za,!1)},!0)}i(ua,wa)};m(pe,ua=>{e(Q),n(()=>e(Q).status==="processing")?ua(je):ua(Ze,!1)},!0)}i(Ie,Ve)};m(Me,Ie=>{e(Q),n(()=>e(Q).status==="pending")?Ie(j):Ie($e,!1)})}a(Ue),p((Ie,Ve)=>{d(ha,`${e(Q),n(()=>e(Q).studentName)??""} · ${e(Q),n(()=>e(Q).documentType)??""}`),B(Oa,1,`admindocreq-status-badge admindocreq-status-${e(Q),n(()=>e(Q).status)??""}`),d(tt,Ie),d(it,` ${Ve??""}`),d(Je,`${e(Q),n(()=>e(Q).studentId)??""} • ${e(Q),n(()=>e(Q).gradeLevel)??""}`),d(aa,`Requested: ${e(Q),n(()=>e(Q).requestDate)??""}`)},[()=>(e(Q),n(()=>Z(e(Q).status))),()=>(e(Q),n(()=>e(Q).status.charAt(0).toUpperCase()+e(Q).status.slice(1)))]),i(U,Ue)},U=>{var Q=vp();i(U,Q)}),a(ae),a(ze),a(Ce),p((U,Q,Ue,ra,ca,oa,_a,ha,fa)=>{$=B(E,1,"admindocreq-status-filter admindocreq-custom-dropdown",null,$,U),ee=B(Y,1,"admindocreq-dropdown-trigger",null,ee,Q),Oe=B(Pe,1,"admindocreq-dropdown-option",null,Oe,Ue),Ye=B(Ee,1,"admindocreq-doctype-filter admindocreq-custom-dropdown",null,Ye,ra),Fe=B(He,1,"admindocreq-dropdown-trigger",null,Fe,ca),ue=B(ye,1,"admindocreq-dropdown-option",null,ue,oa),l=B(v,1,"admindocreq-grade-filter admindocreq-custom-dropdown",null,l,_a),w=B(c,1,"admindocreq-dropdown-trigger",null,w,ha),Se=B(I,1,"admindocreq-dropdown-option",null,Se,fa),d(La,`Document Requests (${e(D),n(()=>e(D).length)??""})`)},[()=>({open:e(O)}),()=>({selected:e(h)}),()=>({selected:e(h)===""}),()=>({open:e(te)}),()=>({selected:e(R)}),()=>({selected:e(R)===""}),()=>({open:e(me)}),()=>({selected:e(H)}),()=>({selected:e(H)===""})]),Ta(fe,()=>e(y),U=>s(y,U)),N("click",Y,J),N("click",Pe,()=>ve(null)),N("click",He,x),N("click",ye,()=>K(null)),N("click",c,F),N("click",I,()=>Le(null)),i(re,Ce),$t()}function pp(re,_,f,S,T){ms.confirm("Change Password",`
			<div class="admin-settings-password-form">
				<div class="admin-settings-form-group">
					<label for="current-password">Current Password</label>
					<div class="admin-settings-password-input-wrapper">
						<input 
							id="current-password"
							type="password" 
							placeholder="Enter current password"
							class="admin-settings-form-input"
						/>
						<button type="button" class="admin-settings-password-toggle" onclick="togglePasswordVisibility('current-password')">
							<svg class="password-eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
								<line x1="1" y1="1" x2="23" y2="23"/>
							</svg>
						</button>
					</div>
				</div>
				
				<div class="admin-settings-form-group">
					<label for="new-password">New Password</label>
					<div class="admin-settings-password-input-wrapper">
						<input 
							id="new-password"
							type="password" 
							placeholder="Enter new password"
							class="admin-settings-form-input"
						/>
						<button type="button" class="admin-settings-password-toggle" onclick="togglePasswordVisibility('new-password')">
							<svg class="password-eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
								<line x1="1" y1="1" x2="23" y2="23"/>
							</svg>
						</button>
					</div>
				</div>
				
				<div class="admin-settings-form-group">
					<label for="confirm-password">Confirm New Password</label>
					<div class="admin-settings-password-input-wrapper">
						<input 
							id="confirm-password"
							type="password" 
							placeholder="Confirm new password"
							class="admin-settings-form-input"
						/>
						<button type="button" class="admin-settings-password-toggle" onclick="togglePasswordVisibility('confirm-password')">
							<svg class="password-eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
								<line x1="1" y1="1" x2="23" y2="23"/>
							</svg>
						</button>
					</div>
				</div>
			</div>
		`,_,()=>{s(f,""),s(S,""),s(T,"")},{size:"medium"})}var _p=o('<div class="admin-settings-date-error"><span class="material-symbols-outlined">error</span> </div>'),fp=o('<div class="admin-settings-date-error"><span class="material-symbols-outlined">error</span> </div>'),gp=o('<div class="admin-settings-date-error"><span class="material-symbols-outlined">error</span> </div>'),bp=o('<div class="admin-settings-date-error"><span class="material-symbols-outlined">error</span> </div>'),hp=o('<div class="admin-settings-date-error"><span class="material-symbols-outlined">error</span> </div>'),yp=o('<span class="material-symbols-outlined">check</span> Apply Date Changes',1),wp=o('<div class="admin-settings-container"><div class="admin-settings-header"><div class="admin-settings-header-content"><h1 class="admin-settings-page-title">Admin Settings</h1> <p class="admin-settings-page-subtitle">Manage system settings and configurations</p></div></div> <div class="admin-settings-section"><div class="admin-settings-card"><div class="admin-settings-card-content"><div class="admin-settings-item"><div class="admin-settings-item-info"><h3 class="admin-settings-item-label">Current School Year</h3> <p class="admin-settings-item-description">The active academic year for the system</p></div> <div class="admin-settings-item-value"><span class="admin-settings-current-year"> </span></div></div></div></div> <div class="admin-settings-card"><div class="admin-settings-card-content"><div class="admin-settings-item"><div class="admin-settings-item-info"><h3 class="admin-settings-item-label">School Year Dates</h3> <p class="admin-settings-item-description">Set the start and end dates for classes</p></div></div> <div class="admin-settings-dates-section"><div class="admin-settings-date-group"><div class="admin-settings-date-item"><label for="start-date" class="admin-settings-date-label">Start of Classes</label> <input id="start-date" type="date"/></div> <div class="admin-settings-date-item"><label for="end-date" class="admin-settings-date-label">End of Classes</label> <input id="end-date" type="date"/></div></div> <div class="admin-settings-quarters-section svelte-jysw9o"><h4 class="admin-settings-quarters-title svelte-jysw9o">Quarter Schedules</h4> <div class="admin-settings-quarters-row svelte-jysw9o"><div class="admin-settings-quarter-group quarter-1 svelte-jysw9o"><div class="admin-settings-quarter-header svelte-jysw9o"><span class="admin-settings-quarter-label svelte-jysw9o">1st Quarter</span></div> <div class="admin-settings-date-group"><div class="admin-settings-date-item"><label for="q1-start" class="admin-settings-date-label">Start</label> <input id="q1-start" type="date"/></div> <div class="admin-settings-date-item"><label for="q1-end" class="admin-settings-date-label">End</label> <input id="q1-end" type="date"/></div></div> <!></div> <div class="admin-settings-quarter-group quarter-2 svelte-jysw9o"><div class="admin-settings-quarter-header svelte-jysw9o"><span class="admin-settings-quarter-label svelte-jysw9o">2nd Quarter</span></div> <div class="admin-settings-date-group"><div class="admin-settings-date-item"><label for="q2-start" class="admin-settings-date-label">Start</label> <input id="q2-start" type="date"/></div> <div class="admin-settings-date-item"><label for="q2-end" class="admin-settings-date-label">End</label> <input id="q2-end" type="date"/></div></div> <!></div> <div class="admin-settings-quarter-group quarter-3 svelte-jysw9o"><div class="admin-settings-quarter-header svelte-jysw9o"><span class="admin-settings-quarter-label svelte-jysw9o">3rd Quarter</span></div> <div class="admin-settings-date-group"><div class="admin-settings-date-item"><label for="q3-start" class="admin-settings-date-label">Start</label> <input id="q3-start" type="date"/></div> <div class="admin-settings-date-item"><label for="q3-end" class="admin-settings-date-label">End</label> <input id="q3-end" type="date"/></div></div> <!></div> <div class="admin-settings-quarter-group quarter-4 svelte-jysw9o"><div class="admin-settings-quarter-header svelte-jysw9o"><span class="admin-settings-quarter-label svelte-jysw9o">4th Quarter</span></div> <div class="admin-settings-date-group"><div class="admin-settings-date-item"><label for="q4-start" class="admin-settings-date-label">Start</label> <input id="q4-start" type="date"/></div> <div class="admin-settings-date-item"><label for="q4-end" class="admin-settings-date-label">End</label> <input id="q4-end" type="date"/></div></div> <!></div></div></div> <!></div> <div class="admin-settings-actions"><button class="admin-settings-action-button admin-settings-primary"><!></button></div></div></div></div> <div class="admin-settings-section"><div class="admin-settings-section-header"><h2 class="admin-settings-section-title">Account Security</h2> <p class="admin-settings-section-subtitle">Manage your account password and security settings</p></div> <div class="admin-settings-card"><div class="admin-settings-card-content"><div class="admin-settings-item"><div class="admin-settings-item-info"><h3 class="admin-settings-item-label">Password</h3> <p class="admin-settings-item-description">Change your account password for security</p></div> <div class="admin-settings-actions"><button class="admin-settings-action-button admin-settings-primary"><span class="material-symbols-outlined">lock</span> Change Password</button></div></div></div></div></div></div>');function Sp(re,_){Nt(_,!0);let f=xa(!1),S=xa(!1),T=xa("2024-2025"),D=xa(""),y=xa(""),h=xa(""),R=xa(""),H=xa(""),O=xa(""),te=xa(""),me=xa(""),b=xa(""),W=xa("");async function A(){try{s(f,!0);const pe=await ut.get("/api/admin-settings");if(pe.success){let Ze=function(ua){if(!ua)return ua;const[wa,ma,Ra]=ua.split("-");return`${Ra}-${wa}-${ma}`};const je=pe.data;s(T,je.current_school_year||"2024-2025",!0),s(D,Ze(je.school_year_start_date)||"",!0),s(y,Ze(je.school_year_end_date)||"",!0),s(h,Ze(je.quarter_1_start_date)||"",!0),s(R,Ze(je.quarter_1_end_date)||"",!0),s(H,Ze(je.quarter_2_start_date)||"",!0),s(O,Ze(je.quarter_2_end_date)||"",!0),s(te,Ze(je.quarter_3_start_date)||"",!0),s(me,Ze(je.quarter_3_end_date)||"",!0),s(b,Ze(je.quarter_4_start_date)||"",!0),s(W,Ze(je.quarter_4_end_date)||"",!0)}}catch(pe){console.error("Error loading admin settings:",pe),Cs("Failed to load admin settings")}finally{s(f,!1)}}async function q(){try{let pe=function(ua){if(!ua)return ua;const[wa,ma,Ra]=ua.split("-");return`${ma}-${Ra}-${wa}`};s(S,!0);const je={current_school_year:e(T),school_year_start_date:pe(e(D)),school_year_end_date:pe(e(y)),quarter_1_start_date:pe(e(h)),quarter_1_end_date:pe(e(R)),quarter_2_start_date:pe(e(H)),quarter_2_end_date:pe(e(O)),quarter_3_start_date:pe(e(te)),quarter_3_end_date:pe(e(me)),quarter_4_start_date:pe(e(b)),quarter_4_end_date:pe(e(W))},Ze=await ut.put("/api/admin-settings",{settings:je});if(Ze.success)ar("Admin settings saved successfully");else throw new Error(Ze.error||"Failed to save settings")}catch(pe){console.error("Error saving admin settings:",pe),Cs("Failed to save admin settings")}finally{s(S,!1)}}let J=xa("");Js(()=>{if(e(D)&&e(y)){const pe=new Date(e(D)),je=new Date(e(y));pe>=je?s(J,"Start date must be before end date"):s(J,"")}else s(J,"")});let x={quarter1:"",quarter2:"",quarter3:"",quarter4:""};Js(()=>{if(e(h)&&e(R)){const pe=new Date(e(h)),je=new Date(e(R));pe>=je?x.quarter1="1st Quarter start date must be before end date":x.quarter1=""}else x.quarter1="";if(e(H)&&e(O)){const pe=new Date(e(H)),je=new Date(e(O));pe>=je?x.quarter2="2nd Quarter start date must be before end date":x.quarter2=""}else x.quarter2="";if(e(te)&&e(me)){const pe=new Date(e(te)),je=new Date(e(me));pe>=je?x.quarter3="3rd Quarter start date must be before end date":x.quarter3=""}else x.quarter3="";if(e(b)&&e(W)){const pe=new Date(e(b)),je=new Date(e(W));pe>=je?x.quarter4="4th Quarter start date must be before end date":x.quarter4=""}else x.quarter4=""});async function F(){if(e(J)){console.error("Cannot apply changes: Date validation error");return}if(Object.values(x).some(je=>je!=="")){console.error("Cannot apply changes: Quarter validation errors");return}await q()}let ve=xa(""),K=xa(""),Le=xa(""),ge=xa(!1);function P(pe){const je=document.getElementById(pe),ua=je.nextElementSibling.querySelector(".password-eye-icon");je.type==="password"?(je.type="text",ua.innerHTML='<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/>'):(je.type="password",ua.innerHTML='<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/>')}typeof window<"u"&&(window.togglePasswordVisibility=P);async function oe(){const pe=document.getElementById("current-password"),je=document.getElementById("new-password"),Ze=document.getElementById("confirm-password");if(!pe||!je||!Ze){Cs("Password form inputs not found");return}const ua=pe.value,wa=je.value,ma=Ze.value;if(!ua){Cs("Current password is required");return}if(!wa){Cs("New password is required");return}if(wa!==ma){Cs("New passwords do not match");return}if(wa.length<8){Cs("Password must be at least 8 characters long");return}if(ua===wa){Cs("New password must be different from current password");return}try{s(ge,!0);const Ra=await ut.post("/api/change-password",{currentPassword:ua,newPassword:wa});Ra.success?(pe.value="",je.value="",Ze.value="",ar("Password changed successfully!"),ms.close()):Cs(Ra.error||"Failed to change password")}catch(Ra){console.error("Password change error:",Ra),Cs(Ra.message||"Failed to change password")}finally{s(ge,!1)}}Bt(()=>{A()});var se=wp(),Z=r(t(se),2),Ce=t(Z),X=t(Ce),C=t(X),he=r(t(C),2),fe=t(he),E=t(fe,!0);a(fe),a(he),a(C),a(X),a(Ce);var $=r(Ce,2),Y=t($),ee=r(t(Y),2),L=t(ee),De=t(L),M=r(t(De),2);ka(M);let le;a(De);var Pe=r(De,2),Oe=r(t(Pe),2);ka(Oe);let We;a(Pe),a(L);var Ee=r(L,2),Ye=r(t(Ee),2),He=t(Ye),Fe=r(t(He),2),_e=t(Fe),we=r(t(_e),2);ka(we);let Ne;a(_e);var Re=r(_e,2),ye=r(t(Re),2);ka(ye);let ue;a(Re),a(Fe);var g=r(Fe,2);{var v=pe=>{var je=_p(),Ze=r(t(je));a(je),p(()=>d(Ze,` ${x.quarter1??""}`)),i(pe,je)};m(g,pe=>{x.quarter1&&pe(v)})}a(He);var l=r(He,2),c=r(t(l),2),w=t(c),G=r(t(w),2);ka(G);let ce;a(w);var Ae=r(w,2),ke=r(t(Ae),2);ka(ke);let I;a(Ae),a(c);var Se=r(c,2);{var xe=pe=>{var je=fp(),Ze=r(t(je));a(je),p(()=>d(Ze,` ${x.quarter2??""}`)),i(pe,je)};m(Se,pe=>{x.quarter2&&pe(xe)})}a(l);var ze=r(l,2),sa=r(t(ze),2),va=t(sa),La=r(t(va),2);ka(La);let ae;a(va);var U=r(va,2),Q=r(t(U),2);ka(Q);let Ue;a(U),a(sa);var ra=r(sa,2);{var ca=pe=>{var je=gp(),Ze=r(t(je));a(je),p(()=>d(Ze,` ${x.quarter3??""}`)),i(pe,je)};m(ra,pe=>{x.quarter3&&pe(ca)})}a(ze);var oa=r(ze,2),_a=r(t(oa),2),ha=t(_a),fa=r(t(ha),2);ka(fa);let Oa;a(ha);var Ba=r(ha,2),tt=r(t(Ba),2);ka(tt);let it;a(Ba),a(_a);var mt=r(_a,2);{var st=pe=>{var je=bp(),Ze=r(t(je));a(je),p(()=>d(Ze,` ${x.quarter4??""}`)),i(pe,je)};m(mt,pe=>{x.quarter4&&pe(st)})}a(oa),a(Ye),a(Ee);var V=r(Ee,2);{var be=pe=>{var je=hp(),Ze=r(t(je));a(je),p(()=>d(Ze,` ${e(J)??""}`)),i(pe,je)};m(V,pe=>{e(J)&&pe(be)})}a(ee);var Je=r(ee,2),ga=t(Je);ga.__click=F;var qa=t(ga);{var aa=pe=>{var je=wt("Saving...");i(pe,je)},Ke=pe=>{var je=yp();Ea(),i(pe,je)};m(qa,pe=>{e(S)?pe(aa):pe(Ke,!1)})}a(ga),a(Je),a(Y),a($),a(Z);var ie=r(Z,2),Me=r(t(ie),2),j=t(Me),$e=t(j),Ie=r(t($e),2),Ve=t(Ie);Ve.__click=[pp,oe,ve,K,Le],a(Ie),a($e),a(j),a(Me),a(ie),a(se),p((pe,je,Ze,ua,wa,ma,Ra,za,Wa,Xa)=>{d(E,e(T)),le=B(M,1,"admin-settings-date-input",null,le,pe),We=B(Oe,1,"admin-settings-date-input",null,We,je),Ne=B(we,1,"admin-settings-date-input quarter-1-input",null,Ne,Ze),ue=B(ye,1,"admin-settings-date-input quarter-1-input",null,ue,ua),ce=B(G,1,"admin-settings-date-input quarter-2-input",null,ce,wa),I=B(ke,1,"admin-settings-date-input quarter-2-input",null,I,ma),ae=B(La,1,"admin-settings-date-input quarter-3-input",null,ae,Ra),Ue=B(Q,1,"admin-settings-date-input quarter-3-input",null,Ue,za),Oa=B(fa,1,"admin-settings-date-input quarter-4-input",null,Oa,Wa),it=B(tt,1,"admin-settings-date-input quarter-4-input",null,it,Xa),ga.disabled=e(S)||e(f)||!!e(J)||x.quarter1||x.quarter2||x.quarter3||x.quarter4||!e(D)||!e(y)},[()=>({error:e(J)}),()=>({error:e(J)}),()=>({error:x.quarter1}),()=>({error:x.quarter1}),()=>({error:x.quarter2}),()=>({error:x.quarter2}),()=>({error:x.quarter3}),()=>({error:x.quarter3}),()=>({error:x.quarter4}),()=>({error:x.quarter4})]),Ta(M,()=>e(D),pe=>s(D,pe)),Ta(Oe,()=>e(y),pe=>s(y,pe)),Ta(we,()=>e(h),pe=>s(h,pe)),Ta(ye,()=>e(R),pe=>s(R,pe)),Ta(G,()=>e(H),pe=>s(H,pe)),Ta(ke,()=>e(O),pe=>s(O,pe)),Ta(La,()=>e(te),pe=>s(te,pe)),Ta(Q,()=>e(me),pe=>s(me,pe)),Ta(fa,()=>e(b),pe=>s(b,pe)),Ta(tt,()=>e(W),pe=>s(W,pe)),i(re,se),$t()}Ts(["click"]);var xp=o('<meta name="description" content="High School Student Information System"/>'),kp=o('<div><!> <main class="content-area"><!></main> <!></div>'),Dp=o('<div><!> <main class="content-area"><!></main> <!></div>'),Tp=o('<div><!> <main class="content-area"><!></main> <!></div>'),Ap=o('<div class="app-container"><!></div>');function Ep(re,_){Nt(_,!0);let f=xa(void 0);Js(()=>Es.subscribe(se=>{s(f,se,!0)}));let S=xa("grades"),T=xa("schedule"),D=xa("dashboard"),y=xa(!1),h=xa(!1),R=xa(!1);function H(oe){typeof oe=="string"?s(S,oe,!0):s(S,oe.detail.section,!0)}function O(oe){s(T,oe.detail.section,!0),oe.detail.section!=="class-list"&&s(b,null)}function te(oe){const{yearLevel:se,sectionName:Z,sectionId:Ce}=oe.detail;s(b,{yearLevel:se,sectionName:Z,sectionId:Ce},!0),s(T,"class-list")}function me(){s(b,null),s(T,"students")}let b=xa(null);function W(oe){s(D,oe.detail.section,!0)}function A(){s(D,"settings")}function q(){s(y,!e(y))}function J(){s(h,!e(h))}function x(){s(R,!e(R))}async function F(){await Es.logout(),s(S,"grades"),s(T,"schedule"),s(D,"dashboard")}let ve=Wt(()=>e(f)?.isAuthenticated?e(f).userType==="student"?"Student Portal - High School":e(f).userType==="teacher"?"Teacher Portal - High School":e(f).userType==="admin"?"Admin Portal - High School":"High School Student Information System":"Login - High School Student Information System");var K=Ap();ni(oe=>{var se=xp();p(()=>oi.title=e(ve)),i(oe,se)});var Le=t(K);{var ge=oe=>{ji(oe,{})},P=oe=>{var se=ya(),Z=na(se);{var Ce=C=>{var he=kp();let fe;var E=t(he);{let M=Wt(()=>e(f).userData?.name||"Student"),le=Wt(()=>e(f).userData?.firstName||"Student"),Pe=Wt(()=>e(f).userData?.gender||"male"),Oe=Wt(()=>e(f).userData?.accountNumber||"N/A"),We=Wt(()=>e(f).userData?.profileImage);Gi(E,{get studentName(){return e(M)},get firstName(){return e(le)},get gender(){return e(Pe)},get accountNumber(){return e(Oe)},get profileImage(){return e(We)},onlogout:F,onToggleNavRail:q,onnavigate:H})}var $=r(E,2),Y=t($);{var ee=M=>{nn(M,{})},L=M=>{var le=ya(),Pe=na(le);{var Oe=Ee=>{_n(Ee,{})},We=Ee=>{var Ye=ya(),He=na(Ye);{var Fe=we=>{Tn(we,{})},_e=we=>{var Ne=ya(),Re=na(Ne);{var ye=g=>{In(g,{})},ue=g=>{var v=ya(),l=na(v);{var c=G=>{Hn(G,{})},w=G=>{var ce=ya(),Ae=na(ce);{var ke=I=>{lo(I,{})};m(Ae,I=>{e(S)==="todo"&&I(ke)},!0)}i(G,ce)};m(l,G=>{e(S)==="notifications"?G(c):G(w,!1)},!0)}i(g,v)};m(Re,g=>{e(S)==="documents"?g(ye):g(ue,!1)},!0)}i(we,Ne)};m(He,we=>{e(S)==="schedule"?we(Fe):we(_e,!1)},!0)}i(Ee,Ye)};m(Pe,Ee=>{e(S)==="grades"?Ee(Oe):Ee(We,!1)},!0)}i(M,le)};m(Y,M=>{e(S)==="profile"?M(ee):M(L,!1)})}a($);var De=r($,2);Vi(De,{get activeSection(){return e(S)},get isNavRailVisible(){return e(y)},onnavigate:H}),a(he),p(M=>fe=B(he,1,"student-portal",null,fe,M),[()=>({"nav-rail-collapsed":!e(y)})]),i(C,he)},X=C=>{var he=ya(),fe=na(he);{var E=Y=>{var ee=Dp();let L;var De=t(ee);{let Ee=Wt(()=>e(f).userData?.name||"Teacher"),Ye=Wt(()=>e(f).userData?.firstName||"Teacher"),He=Wt(()=>e(f).userData?.gender||"male"),Fe=Wt(()=>e(f).userData?.accountNumber||"N/A"),_e=Wt(()=>e(f).userData?.profileImage);bo(De,{get teacherName(){return e(Ee)},get firstName(){return e(Ye)},get gender(){return e(He)},get accountNumber(){return e(Fe)},get profileImage(){return e(_e)},onlogout:F,onToggleNavRail:J})}var M=r(De,2),le=t(M);{var Pe=Ee=>{Io(Ee,{})},Oe=Ee=>{var Ye=ya(),He=na(Ye);{var Fe=we=>{Hr(we,{onNavigateToClassList:te})},_e=we=>{var Ne=ya(),Re=na(Ne);{var ye=g=>{gl(g,{get selectedClass(){return e(b)},onBackToClassManagement:me})},ue=g=>{var v=ya(),l=na(v);{var c=G=>{jl(G,{})},w=G=>{Hr(G,{onNavigateToClassList:te})};m(l,G=>{e(T)==="advisory"?G(c):G(w,!1)},!0)}i(g,v)};m(Re,g=>{e(T)==="class-list"&&e(b)?g(ye):g(ue,!1)},!0)}i(we,Ne)};m(He,we=>{e(T)==="students"?we(Fe):we(_e,!1)},!0)}i(Ee,Ye)};m(le,Ee=>{e(T)==="schedule"?Ee(Pe):Ee(Oe,!1)})}a(M);var We=r(M,2);ko(We,{get teacherActiveSection(){return e(T)},get teacherNavRailVisible(){return e(h)},onnavigate:O}),a(ee),p(Ee=>L=B(ee,1,"teacher-portal",null,L,Ee),[()=>({"nav-rail-collapsed":!e(h)})]),i(Y,ee)},$=Y=>{var ee=ya(),L=na(ee);{var De=M=>{var le=Tp();let Pe;var Oe=t(le);{let _e=Wt(()=>e(f).userData?.name||"Admin"),we=Wt(()=>e(f).userData?.firstName||"Admin"),Ne=Wt(()=>e(f).userData?.gender||"male"),Re=Wt(()=>e(f).userData?.accountNumber||"N/A"),ye=Wt(()=>e(f).userData?.profileImage);Gl(Oe,{get adminName(){return e(_e)},get firstName(){return e(we)},get gender(){return e(Ne)},get accountNumber(){return e(Re)},get profileImage(){return e(ye)},onlogout:F,onToggleNavRail:x,onNavigateToSettings:A})}var We=r(Oe,2),Ee=t(We);{var Ye=_e=>{gd(_e,{})},He=_e=>{var we=ya(),Ne=na(we);{var Re=ue=>{ec(ue,{})},ye=ue=>{var g=ya(),v=na(g);{var l=w=>{xc(w,{})},c=w=>{var G=ya(),ce=na(G);{var Ae=I=>{Vc(I,{})},ke=I=>{var Se=ya(),xe=na(Se);{var ze=va=>{nv(va,{})},sa=va=>{var La=ya(),ae=na(La);{var U=Ue=>{Zu(Ue)},Q=Ue=>{var ra=ya(),ca=na(ra);{var oa=ha=>{Jm(ha,{})},_a=ha=>{var fa=ya(),Oa=na(fa);{var Ba=it=>{Dm(it,{})},tt=it=>{var mt=ya(),st=na(mt);{var V=Je=>{mp(Je,{})},be=Je=>{var ga=ya(),qa=na(ga);{var aa=Ke=>{Sp(Ke,{})};m(qa,Ke=>{e(D)==="settings"&&Ke(aa)},!0)}i(Je,ga)};m(st,Je=>{e(D)==="document-requests"?Je(V):Je(be,!1)},!0)}i(it,mt)};m(Oa,it=>{e(D)==="subjects-and-activities"?it(Ba):it(tt,!1)},!0)}i(ha,fa)};m(ca,ha=>{e(D)==="department-management"?ha(oa):ha(_a,!1)},!0)}i(Ue,ra)};m(ae,Ue=>{e(D)==="schedule-management"?Ue(U):Ue(Q,!1)},!0)}i(va,La)};m(xe,va=>{e(D)==="student-grades-list"?va(ze):va(sa,!1)},!0)}i(I,Se)};m(ce,I=>{e(D)==="archived-students"?I(Ae):I(ke,!1)},!0)}i(w,G)};m(v,w=>{e(D)==="student-masterlist"?w(l):w(c,!1)},!0)}i(ue,g)};m(Ne,ue=>{e(D)==="account-creation"?ue(Re):ue(ye,!1)},!0)}i(_e,we)};m(Ee,_e=>{e(D)==="dashboard"?_e(Ye):_e(He,!1)})}a(We);var Fe=r(We,2);td(Fe,{get adminActiveSection(){return e(D)},get adminNavRailVisible(){return e(R)},onnavigate:W}),a(le),p(_e=>Pe=B(le,1,"admin-portal",null,Pe,_e),[()=>({"nav-rail-collapsed":!e(R)})]),i(M,le)};m(L,M=>{e(f).userType==="admin"&&M(De)},!0)}i(Y,ee)};m(fe,Y=>{e(f).userType==="teacher"?Y(E):Y($,!1)},!0)}i(C,he)};m(Z,C=>{e(f).userType==="student"?C(Ce):C(X,!1)},!0)}i(oe,se)};m(Le,oe=>{e(f)?.isAuthenticated?oe(P,!1):oe(ge)})}a(K),i(re,K),$t()}export{Ep as component};
