import"../chunks/DsnmJJEf.js";import{h as dt,a as ut,q as ke,ae as be,_ as Fe,Q as Y,t as q,x as u,y as De,l as e,A as a,aQ as Ze,aR as tt,ad as at,ag as K,aS as Re,v as F,z as s,B as r,w as te,aT as Ve,C as f,aU as Be,ah as me,i as pt,aV as _t,aW as ft,N as mt}from"../chunks/DfuX6PLp.js";import{p as ee,i as U,b as st,s as We}from"../chunks/X9SYq9-G.js";import{t as Ge,e as Ce,T as bt,s as qe,a as E,m as Xe,h as $e,r as Le,b as Qe,c as Ne}from"../chunks/CPr56_eZ.js";import{c as xt}from"../chunks/C_xhk7l3.js";function yt(c,t,i,o,y){dt&&ut();var b=t.$$slots?.[i],_=!1;b===!0&&(b=t.children,_=!0),b===void 0||b(c,_?()=>o:o)}const et="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='48px'%20viewBox='0%20-960%20960%20960'%20width='48px'%20fill='%23789DE5'%3e%3cpath%20d='M222-255q63-40%20124.5-60.5T480-336q72%200%20134%2020.5T739-255q44-54%2062.5-109T820-480q0-145-97.5-242.5T480-820q-145%200-242.5%2097.5T140-480q0%2061%2019%20116t63%20109Zm257.81-195q-57.81%200-97.31-39.69-39.5-39.68-39.5-97.5%200-57.81%2039.69-97.31%2039.68-39.5%2097.5-39.5%2057.81%200%2097.31%2039.69%2039.5%2039.68%2039.5%2097.5%200%2057.81-39.69%2097.31-39.68%2039.5-97.5%2039.5Zm-.21%20370q-83.15%200-156.28-31.5t-127.22-86Q142-252%20111-324.84%2080-397.68%2080-480.5t31.5-155.66Q143-709%20197.5-763t127.34-85.5Q397.68-880%20480.5-880t155.66%2031.5Q709-817%20763-763t85.5%20127Q880-563%20880-480.27q0%2082.74-31.5%20155.5Q817-252%20763-197.5t-127.13%2086Q562.74-80%20479.6-80Z'/%3e%3c/svg%3e",ht="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='48px'%20viewBox='0%20-960%20960%20960'%20width='48px'%20fill='%23789DE5'%3e%3cpath%20d='M480.17-450Q537-450%20577-490.17t40-97Q617-644%20576.83-684t-97-40Q423-724%20383-683.83t-40%2097Q343-530%20383.17-490t97%2040ZM480-81q-148-38-234-162.54Q160-368.08%20160-523v-238l320-120%20320%20120v238q0%20154.92-86%20279.46Q628-119%20480-81Zm0-62q60-20%20108-59.5t83-90.5q-44.67-21.02-92.97-32.01Q529.72-336%20479.86-336t-98.07%2010.99Q333.58-314.02%20289-293q35%2051%2083%2090.5T480-143Z'/%3e%3c/svg%3e",gt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='48px'%20viewBox='0%20-960%20960%20960'%20width='48px'%20fill='%23789DE5'%3e%3cpath%20d='M860-283v-282L479-360%2040-600l439-240%20441%20240v317h-60ZM479-120%20189-279v-210l290%20159%20290-159v210L479-120Z'/%3e%3c/svg%3e",wt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='48px'%20viewBox='0%20-960%20960%20960'%20width='48px'%20fill='%23789DE5'%3e%3cpath%20d='M480-302q-74%200-139.5%2024.5T220-211v71h520v-71q-55-42-120.5-66.5T480-302ZM220-80q-24%200-42-18t-18-42v-680q0-24%2018-42t42-18h520q24%200%2042%2018t18%2042v680q0%2024-18%2042t-42%2018H220Zm262-301q58%200%2098-40t40-98q0-58-40-98t-98-40q-58%200-98%2040t-40%2098q0%2058%2040%2098t98%2040Z'/%3e%3c/svg%3e";var qt=q('<div class="toast-container svelte-9k6dxx"></div>');function kt(c,t){ke(t,!0);let i=be(Fe([]));Ge.subscribe(b=>{Y(i,b,!0)});function o(b){setTimeout(()=>{Ge.remove(b)},300)}var y=qt();Ce(y,21,()=>e(i),b=>b.id,(b,_)=>{bt(b,{get message(){return e(_).message},get type(){return e(_).type},get duration(){return e(_).duration},onClose:()=>o(e(_).id)})}),a(y),u(c,y),De()}function Dt(c,t,i){t()&&c.target===c.currentTarget&&i()}var Tt=q('<h2 id="modal-title" class="modal-title svelte-oqry48"> </h2>'),St=q('<button class="modal-close-btn svelte-oqry48" aria-label="Close modal"><span class="material-symbols-outlined svelte-oqry48">close</span></button>'),Ct=q('<div class="modal-header svelte-oqry48"><!> <!></div>'),Mt=q('<div role="dialog" aria-modal="true"><div tabindex="-1"><!> <div class="modal-body svelte-oqry48"><!></div></div></div>');function Et(c,t){ke(t,!0);let i=ee(t,"title",3,""),o=ee(t,"size",3,"medium"),y=ee(t,"closable",3,!0),b=ee(t,"backdrop",3,!0),_=be(!1),l=be(!1),n;const k=tt();at(()=>(setTimeout(()=>{Y(_,!0)},10),n&&n.focus(),document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}));function L(){y()&&(Y(l,!0),setTimeout(()=>{Y(_,!1),document.body.style.overflow="",t.onClose&&t.onClose(),k("close")},300))}function re(I){I.key==="Escape"&&y()&&L()}function ce(I){switch(I){case"small":return"modal-small";case"large":return"modal-large";case"full":return"modal-full";default:return"modal-medium"}}var j=K();Re("keydown",Ve,re);var xe=F(j);{var J=I=>{var D=Mt();let W;D.__click=[Dt,b,L];var w=s(D),Q=s(w);{var N=m=>{var h=Ct(),v=s(h);{var d=x=>{var g=Tt(),ie=s(g,!0);a(g),te(()=>f(ie,i())),u(x,g)};U(v,x=>{i()&&x(d)})}var T=r(v,2);{var S=x=>{var g=St();g.__click=L,u(x,g)};U(T,x=>{y()&&x(S)})}a(h),u(m,h)};U(Q,m=>{(i()||y())&&m(N)})}var Z=r(Q,2),G=s(Z);yt(G,t,"default",{}),a(Z),a(w),st(w,m=>n=m,()=>n),a(D),te((m,h)=>{W=qe(D,1,"modal-overlay svelte-oqry48",null,W,m),E(D,"aria-labelledby",i()?"modal-title":void 0),qe(w,1,`modal-content ${h??""}`,"svelte-oqry48")},[()=>({"modal-visible":e(_)&&!e(l),"modal-closing":e(l)}),()=>ce(o())]),u(I,D)};U(xe,I=>{(e(_)||e(l))&&I(J)})}u(c,j),De()}Ze(["click"]);function It(c,t){Y(t,!e(t))}function At(c,t){const i=c.target.value;t&&(t.tentativeDate=i||null)}async function Lt(c,t,i,o){const y={status:t.status,tentativeDate:t.tentativeDate};await i()(t.requestId,y),o()()}async function Qt(c,t,i,o){await t()(i.requestId),o()()}var Nt=(c,t,i)=>t(e(i).id),Rt=q('<button type="button" class="docreq-status-item svelte-xc9l1r" role="option"><span></span> <span class="status-text svelte-xc9l1r"> </span></button>'),Vt=(c,t,i)=>{t.status==="processing"&&i()},Bt=(c,t,i)=>{(c.key==="Enter"||c.key===" ")&&t.status==="processing"&&i()},Ft=q('<div class="chat-message svelte-xc9l1r"><div class="chat-author svelte-xc9l1r"> </div> <div class="chat-text svelte-xc9l1r"> </div> <div class="chat-time svelte-xc9l1r"> </div></div>'),Zt=q('<div class="docreq-modal-content svelte-xc9l1r"><div class="docreq-modal-grid svelte-xc9l1r"><div class="docreq-modal-left svelte-xc9l1r"><header class="docreq-modal-title svelte-xc9l1r"><h2 class="svelte-xc9l1r">Request Details</h2> <div class="docreq-modal-sub svelte-xc9l1r">ID: <span> </span></div></header> <div class="docreq-cards svelte-xc9l1r"><div class="docreq-card svelte-xc9l1r"><div class="card-label svelte-xc9l1r"><span class="material-symbols-outlined">description</span> Document Type</div> <div class="card-value svelte-xc9l1r"> </div></div> <div class="docreq-card svelte-xc9l1r"><div class="card-label svelte-xc9l1r"><span class="material-symbols-outlined">info</span> Status</div> <div class="card-value svelte-xc9l1r"><div aria-haspopup="listbox"><button class="docreq-status-dropdown-trigger svelte-xc9l1r" aria-label="Change status"><span class="docreq-status-dropdown-label svelte-xc9l1r"> </span> <span class="material-symbols-outlined docreq-status-dropdown-caret svelte-xc9l1r"> </span></button> <div class="docreq-status-dropdown-menu svelte-xc9l1r" role="listbox" aria-label="Select status"></div></div></div></div> <div class="docreq-card svelte-xc9l1r"><div class="card-label svelte-xc9l1r"><span class="material-symbols-outlined">event</span> Tentative Date</div> <div class="card-value svelte-xc9l1r"><div role="button"> </div> <input type="date" style="position:absolute; opacity:0; pointer-events:none; width:0; height:0;"/></div></div> <div class="docreq-card svelte-xc9l1r"><div class="card-label svelte-xc9l1r"><span class="material-symbols-outlined">payments</span> Payment</div> <div class="card-value svelte-xc9l1r"> <span class="badge orange svelte-xc9l1r">Pending</span></div></div> <div class="docreq-card svelte-xc9l1r"><div class="card-label svelte-xc9l1r"><span class="material-symbols-outlined">account_circle</span> Processed By</div> <div class="card-value svelte-xc9l1r"> </div></div></div> <div class="docreq-purpose svelte-xc9l1r"><div class="purpose-label svelte-xc9l1r">Purpose & Details</div> <p class="purpose-text svelte-xc9l1r"> </p></div> <div class="docreq-chat svelte-xc9l1r"><h3 class="svelte-xc9l1r">Chat</h3> <div class="chat-messages svelte-xc9l1r"></div> <div class="chat-input svelte-xc9l1r"><button class="attach-btn svelte-xc9l1r" title="Attach">ðŸ“Ž</button> <input placeholder="Type your message" class="svelte-xc9l1r"/> <button class="send-btn svelte-xc9l1r" title="Send">âž¤</button></div></div></div> <div class="docreq-modal-right svelte-xc9l1r"><div class="student-info-card svelte-xc9l1r"><h3 class="svelte-xc9l1r"><span class="material-symbols-outlined">school</span> Student Information</h3> <div class="student-field svelte-xc9l1r"><div class="field-label svelte-xc9l1r">Student ID</div> <div class="field-value svelte-xc9l1r"> </div></div> <div class="student-field svelte-xc9l1r"><div class="field-label svelte-xc9l1r">Full Name</div> <div class="field-value svelte-xc9l1r"> </div></div> <div class="student-field svelte-xc9l1r"><div class="field-label svelte-xc9l1r">Grade & Section</div> <div class="field-value svelte-xc9l1r"> </div></div> <div class="student-field svelte-xc9l1r"><div class="field-label svelte-xc9l1r">Date of birth</div> <div class="field-value svelte-xc9l1r"> </div></div></div> <div class="action-buttons svelte-xc9l1r"><button class="docreq-approve-button svelte-xc9l1r">Update Request</button> <button class="docreq-reject-button svelte-xc9l1r">Reject Request</button> <button class="docreq-complete-button svelte-xc9l1r">Back</button></div></div></div></div>');function Pt(c,t){ke(t,!0);let i=ee(t,"request",19,()=>({})),o=ee(t,"requestStatuses",19,()=>[]),y=ee(t,"modalStatuses",19,()=>[]),b=ee(t,"onUpdate",3,()=>{}),_=ee(t,"onReject",3,()=>{}),l=ee(t,"onClose",3,()=>{});tt();let n=Fe({...i()}),k=be(!1),L;function re(p){return[{id:1,author:"Admin Sarah",authorRole:"admin",text:"Your request is ready for pick up",time:"10/8/2025, 10:30:00 AM"}]}function ce(p){n&&(n.status=p,p!=="processing"&&(n.tentativeDate=null),Y(k,!1))}function j(){!n||n.status!=="processing"||L&&L.click()}function xe(p,O){if(O!=="processing")return"N/A";if(!p)return"--/--/----";const[A,le,fe]=p.split("-");return!A||!le||!fe?"--/--/----":`${le}/${fe}/${A}`}let J=me(()=>n&&(o().find(p=>p.id===n.status)||{}).name||"Select");function I(p){p.target.closest(".docreq-status-dropdown")||Y(k,!1)}function D(p){p.key==="Escape"&&e(k)&&Y(k,!1)}var W=Zt();Re("click",Ve,I),Re("keydown",Ve,D);var w=s(W),Q=s(w),N=s(Q),Z=r(s(N),2),G=r(s(Z)),m=s(G,!0);a(G),a(Z),a(N);var h=r(N,2),v=s(h),d=r(s(v),2),T=s(d,!0);a(d),a(v);var S=r(v,2),x=r(s(S),2),g=s(x);let ie;var ae=s(g);ae.__click=[It,k];var P=s(ae),ne=s(P,!0);a(P);var oe=r(P,2),ge=s(oe,!0);a(oe),a(ae);var se=r(ae,2);Ce(se,21,y,p=>p.id,(p,O)=>{var A=Rt();A.__click=[Nt,ce,O];var le=s(A),fe=r(le,2),we=s(fe,!0);a(fe),a(A),te(()=>{E(A,"aria-selected",n.status===e(O).id),qe(le,1,`status-dot ${e(O).id??""}`,"svelte-xc9l1r"),f(we,e(O).name)}),u(p,A)}),a(se),a(g),a(x),a(S);var R=r(S,2),z=r(s(R),2),C=s(z);let ve;C.__click=[Vt,n,j],C.__keydown=[Bt,n,j];var de=s(C,!0);a(C);var V=r(C,2);V.__change=[At,n],st(V,p=>L=p,()=>L),a(z),a(R);var X=r(R,2),ye=r(s(X),2),$=s(ye);Be(),a(ye),a(X);var ue=r(X,2),B=r(s(ue),2),H=s(B,!0);a(B),a(ue),a(h);var M=r(h,2),pe=r(s(M),2),Te=s(pe,!0);a(pe),a(M);var _e=r(M,2),Se=r(s(_e),2);Ce(Se,21,()=>re(n.requestId),p=>p.id,(p,O)=>{var A=Ft(),le=s(A),fe=s(le,!0);a(le);var we=r(le,2),vt=s(we,!0);a(we);var Je=r(we,2),ct=s(Je,!0);a(Je),a(A),te(()=>{f(fe,e(O).author),f(vt,e(O).text),f(ct,e(O).time)}),u(p,A)}),a(Se),Be(2),a(_e),a(Q);var he=r(Q,2),Me=s(he),Ee=r(s(Me),2),Pe=r(s(Ee),2),lt=s(Pe,!0);a(Pe),a(Ee);var Ie=r(Ee,2),ze=r(s(Ie),2),rt=s(ze,!0);a(ze),a(Ie);var Ae=r(Ie,2),Oe=r(s(Ae),2),it=s(Oe);a(Oe),a(Ae);var Ue=r(Ae,2),je=r(s(Ue),2),nt=s(je,!0);a(je),a(Ue),a(Me);var He=r(Me,2),Ke=s(He);Ke.__click=[Lt,n,b,l];var Ye=r(Ke,2);Ye.__click=[Qt,_,n,l];var ot=r(Ye,2);ot.__click=function(...p){l()?.apply(this,p)},a(He),a(he),a(w),a(W),te((p,O,A)=>{f(m,n.requestId),f(T,n.documentType),ie=qe(g,1,"docreq-status-dropdown svelte-xc9l1r",null,ie,p),E(g,"aria-expanded",e(k)),f(ne,e(J)),f(ge,e(k)?"expand_less":"expand_more"),ve=qe(C,1,"date-box svelte-xc9l1r",null,ve,O),E(C,"tabindex",n.status==="processing"?0:-1),f(de,A),f($,`${n.payment??""} `),f(H,n.processedBy??"â€”"),f(Te,n.purpose??"â€”"),f(lt,n.studentId),f(rt,n.studentName),f(it,`${n.gradeLevel??""} - ${n.section||"N/A"}`),f(nt,n.dateOfBirth??"â€”")},[()=>({open:e(k)}),()=>({disabled:n.status!=="processing"}),()=>n.status==="processing"?n.tentativeDate?xe(n.tentativeDate,n.status):"--/--/----":"N/A"]),u(c,W),De()}Ze(["click","keydown","change"]);var zt=(c,t,i)=>{e(t).props.onCancel&&e(t).props.onCancel(),i(e(t).id)},Ot=(c,t,i)=>{e(t).props.onConfirm&&e(t).props.onConfirm(),i(e(t).id)},Ut=q('<div class="modal-confirm-content svelte-5sx51y"><div class="modal-message svelte-5sx51y"><!></div> <div class="modal-actions svelte-5sx51y"><button class="modal-btn modal-btn-secondary svelte-5sx51y">Cancel</button> <button class="modal-btn modal-btn-primary svelte-5sx51y">Confirm</button></div></div>'),jt=(c,t,i)=>{e(t).props.onClose&&e(t).props.onClose(),i(e(t).id)},Ht=q('<div class="modal-alert-content svelte-5sx51y"><p class="modal-message svelte-5sx51y"> </p> <div class="modal-actions svelte-5sx51y"><button class="modal-btn modal-btn-primary svelte-5sx51y">OK</button></div></div>'),Kt=(c,t,i)=>{e(t).props.onCancel&&e(t).props.onCancel(),i(e(t).id)},Yt=(c,t,i)=>{e(t).props.onSubmit&&e(t).props.onSubmit(e(t).props.inputValue||e(t).props.defaultValue||""),i(e(t).id)},Jt=q('<div class="modal-prompt-content svelte-5sx51y"><p class="modal-message svelte-5sx51y"> </p> <input type="text" class="modal-input svelte-5sx51y"/> <div class="modal-actions svelte-5sx51y"><button class="modal-btn modal-btn-secondary svelte-5sx51y">Cancel</button> <button class="modal-btn modal-btn-primary svelte-5sx51y">Submit</button></div></div>'),Wt=(c,t,i)=>{e(t).props.onCancel&&e(t).props.onCancel(),i(e(t).id)},Gt=(c,t,i)=>{e(t).props.onDelete&&!e(t).props.deleteDisabled&&e(t).props.onDelete(),i(e(t).id)},Xt=(c,t,i)=>{e(t).props.onSubmit&&e(t).props.onSubmit(e(t).props.field1Value,e(t).props.field2Value),i(e(t).id)},$t=q('<div class="modal-form-content svelte-5sx51y"><p class="modal-message svelte-5sx51y"> </p> <div class="modal-form-fields svelte-5sx51y"><div class="modal-form-group svelte-5sx51y"><label for="formField1" class="modal-form-label svelte-5sx51y"> </label> <input id="formField1" class="modal-input svelte-5sx51y"/></div> <div class="modal-form-group svelte-5sx51y"><label for="formField2" class="modal-form-label svelte-5sx51y"> </label> <input id="formField2" class="modal-input svelte-5sx51y"/></div></div> <div class="modal-actions svelte-5sx51y"><button class="modal-btn modal-btn-secondary svelte-5sx51y">Cancel</button> <button class="modal-btn modal-btn-danger svelte-5sx51y">Delete</button> <button class="modal-btn modal-btn-primary svelte-5sx51y">Update</button></div></div>'),ea=q('<div class="modal-custom-content svelte-5sx51y"><!></div>'),ta=q('<div class="modal-generic-content svelte-5sx51y"><p> </p></div>');function aa(c,t){ke(t,!0);let i=be(Fe([]));Xe.subscribe(_=>{Y(i,_,!0)});function o(_){Xe.close(_)}var y=K(),b=F(y);Ce(b,17,()=>e(i),_=>_.id,(_,l,n)=>{{let k=me(()=>e(l).props.title||""),L=me(()=>e(l).options.size||"medium"),re=me(()=>e(l).options.closable!==!1),ce=me(()=>e(l).options.backdrop!==!1);Et(_,{get title(){return e(k)},get size(){return e(L)},get closable(){return e(re)},get backdrop(){return e(ce)},onClose:()=>o(e(l).id),children:(j,xe)=>{var J=K(),I=F(J);{var D=w=>{var Q=K(),N=F(Q);{var Z=m=>{var h=Ut(),v=s(h),d=s(v);$e(d,()=>e(l).props.message),a(v);var T=r(v,2),S=s(T);S.__click=[zt,l,o];var x=r(S,2);x.__click=[Ot,l,o],a(T),a(h),u(m,h)},G=m=>{var h=K(),v=F(h);{var d=S=>{var x=Ht(),g=s(x),ie=s(g,!0);a(g);var ae=r(g,2),P=s(ae);P.__click=[jt,l,o],a(ae),a(x),te(()=>f(ie,e(l).props.message)),u(S,x)},T=S=>{var x=K(),g=F(x);{var ie=P=>{var ne=Jt(),oe=s(ne),ge=s(oe,!0);a(oe);var se=r(oe,2);Le(se);var R=r(se,2),z=s(R);z.__click=[Kt,l,o];var C=r(z,2);C.__click=[Yt,l,o],a(R),a(ne),te(()=>{f(ge,e(l).props.message),E(se,"placeholder",e(l).props.placeholder||"Enter value...")}),Qe(se,()=>e(l).props.inputValue,ve=>e(l).props.inputValue=ve),u(P,ne)},ae=P=>{var ne=K(),oe=F(ne);{var ge=R=>{var z=$t(),C=s(z),ve=s(C,!0);a(C);var de=r(C,2),V=s(de),X=s(V),ye=s(X,!0);a(X);var $=r(X,2);Le($),a(V);var ue=r(V,2),B=s(ue),H=s(B,!0);a(B);var M=r(B,2);Le(M),a(ue),a(de);var pe=r(de,2),Te=s(pe);Te.__click=[Wt,l,o];var _e=r(Te,2);_e.__click=[Gt,l,o];var Se=r(_e,2);Se.__click=[Xt,l,o],a(pe),a(z),te(()=>{f(ve,e(l).props.message),f(ye,e(l).props.field1Label||"Field 1"),E($,"type",e(l).props.field1Type||"text"),E($,"placeholder",e(l).props.field1Placeholder||"Enter value..."),E($,"min",e(l).props.field1Min),E($,"max",e(l).props.field1Max),f(H,e(l).props.field2Label||"Field 2"),E(M,"type",e(l).props.field2Type||"text"),E(M,"placeholder",e(l).props.field2Placeholder||"Enter value..."),E(M,"min",e(l).props.field2Min),E(M,"max",e(l).props.field2Max),_e.disabled=e(l).props.deleteDisabled,E(_e,"title",e(l).props.deleteDisabled?e(l).props.deleteDisabledReason:"Delete this column")}),Qe($,()=>e(l).props.field1Value,he=>e(l).props.field1Value=he),Qe(M,()=>e(l).props.field2Value,he=>e(l).props.field2Value=he),u(R,z)},se=R=>{var z=K(),C=F(z);{var ve=V=>{Pt(V,We(()=>e(l).props,{onClose:()=>o(e(l).id)}))},de=V=>{var X=K(),ye=F(X);{var $=B=>{var H=ea(),M=s(H);$e(M,()=>e(l).props.content),a(H),u(B,H)},ue=B=>{var H=ta(),M=s(H),pe=s(M);a(M),a(H),te(()=>f(pe,`Component '${e(l).component??""}' not found`)),u(B,H)};U(ye,B=>{e(l).component==="CustomModal"?B($):B(ue,!1)},!0)}u(V,X)};U(C,V=>{e(l).component==="DocumentRequestModal"?V(ve):V(de,!1)},!0)}u(R,z)};U(oe,R=>{e(l).component==="FormModal"?R(ge):R(se,!1)},!0)}u(P,ne)};U(g,P=>{e(l).component==="PromptModal"?P(ie):P(ae,!1)},!0)}u(S,x)};U(v,S=>{e(l).component==="AlertModal"?S(d):S(T,!1)},!0)}u(m,h)};U(N,m=>{e(l).component==="ConfirmModal"?m(Z):m(G,!1)})}u(w,Q)},W=w=>{const Q=me(()=>e(l).component);var N=K(),Z=F(N);xt(Z,()=>e(Q),(G,m)=>{m(G,We(()=>e(l).props,{onClose:()=>o(e(l).id)}))}),u(w,N)};U(I,w=>{typeof e(l).component=="string"?w(D):w(W,!1)})}u(j,J)},$$slots:{default:!0}})}}),u(c,y),De()}Ze(["click"]);var sa=q('<link rel="icon"/> <link rel="preconnect" href="https://fonts.googleapis.com"/> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/> <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&amp;display=swap" rel="stylesheet"/> <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/> <meta name="viewport" content="width=device-width, initial-scale=1.0"/> <meta name="theme-color" content="#1565c0"/>',1),la=q("<!> <!> <!>",1);function ca(c,t){ke(t,!0);let i=be(!1),o=be(void 0);pt(()=>Ne.subscribe(d=>{Y(o,d,!0)}));let y=me(()=>e(o)?.isAuthenticated?e(o).userType==="admin"?ht:e(o).userType==="student"?gt:e(o).userType==="teacher"?wt:et:et);at(()=>{setTimeout(()=>{Ne.initialize(),Y(i,!0),window.appLoadingManager&&window.appLoadingManager.setReady(),Q()},2800)});const b=14400*1e3,_=300*1e3,l="lastActivityTimestamp";let n=null,k=0;function L(){try{const v=localStorage.getItem(l);return v?Number(v):null}catch{return null}}function re(v){try{localStorage.setItem(l,String(v))}catch{}}function ce(){try{localStorage.removeItem(l)}catch{}}function j(){n&&(clearTimeout(n),n=null);const v=L()||Date.now(),d=Date.now()-v,T=b-d;if(T<=0){I();return}n=setTimeout(I,T)}async function xe(){try{if(!e(o)?.isAuthenticated||!e(o).userData)return;const v=Date.now();if(v-k<_)return;const d={id:e(o).userData.id,name:e(o).userData.name,account_number:e(o).userData.accountNumber,account_type:e(o).userData.account_type||e(o).userData.accountType};await fetch("/api/auth/heartbeat",{method:"POST",headers:{"Content-Type":"application/json","x-user-info":JSON.stringify(d)},body:JSON.stringify({timestamp:new Date().toISOString()})}),k=v}catch(v){console.warn("Heartbeat failed",v)}}function J(){if(!window?.localStorage)return;const v=Date.now();re(v),j(),xe()}function I(){e(o)?.isAuthenticated&&(Ne.logout(),ce())}let D=!1;function W(){if(D)return;D=!0,["mousemove","mousedown","keydown","scroll","touchstart","click"].forEach(d=>window.addEventListener(d,J,{passive:!0})),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&J()}),window.addEventListener("storage",d=>{d.key===l&&j()})}function w(){if(!D)return;D=!1,["mousemove","mousedown","keydown","scroll","touchstart","click"].forEach(d=>window.removeEventListener(d,J)),document.removeEventListener("visibilitychange",()=>{}),window.removeEventListener("storage",()=>{})}function Q(){if(typeof window>"u")return;L()||re(Date.now()),W(),j(),window.addEventListener("beforeunload",()=>{w(),n&&clearTimeout(n)})}var N=la();_t(v=>{var d=sa(),T=F(d);Be(12),te(()=>E(T,"href",e(y))),u(v,d)});var Z=F(N);{var G=v=>{var d=K(),T=F(d);ft(T,()=>t.children??mt),u(v,d)};U(Z,v=>{e(i)&&v(G)})}var m=r(Z,2);kt(m,{});var h=r(m,2);aa(h,{}),u(c,N),De()}export{ca as component};
