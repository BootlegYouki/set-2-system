import{c as Se,b as ke,aj as Te,G as B,h as w,ak as Ie,a as Re,l as k,Z as He,D as Le,H as qe,F as le,I as Y,f as H,al as Pe,am as Ce,d as ae,s as ze,an as U,ao as V,e as O,ap as oe,Q as Fe,aq as ie,ar as ye,as as Je,J as we,p as Ue,at as Ve,au as K,M as te,av as ge,aw as Ge,ax as je,ay as Be,az as Ye,aA as Ke,a0 as $e,aB as Qe,aC as We,aD as Xe,aE as Ze,aF as ea,aG as aa,aH as Ee,af as ta,j as ra,L as De,aI as sa,aJ as na,N as la,aK as P,aL as oa,q as ia,ad as ua,T as ue,ae as ce,ag as ca,v as da,x as de,y as fa,t as va,z as F,A as J,B as fe,w as ha,C as ve,V as Ae}from"./BrR45Eif.js";import"./DsnmJJEf.js";import{p as $,i as _a}from"./CsvhCkDi.js";function Ia(a,t){return t}function ma(a,t,e){for(var r=a.items,s=[],n=t.length,l=0;l<n;l++)Be(t[l].e,s,!0);var i=n>0&&s.length===0&&e!==null;if(i){var v=e.parentNode;Ye(v),v.append(e),r.clear(),M(a,t[0].prev,t[n-1].next)}Ke(s,()=>{for(var o=0;o<n;o++){var h=t[o];i||(r.delete(h.k),M(a,h.prev,h.next)),ge(h.e,!i)}})}function Ra(a,t,e,r,s,n=null){var l=a,i={flags:t,items:new Map,first:null},v=(t&Te)!==0;if(v){var o=a;l=w?B(Ie(o)):o.appendChild(Se())}w&&Re();var h=null,g=!1,E=new Map,y=He(()=>{var m=e();return Je(m)?m:m==null?[]:ye(m)}),c,_;function f(){ba(_,c,i,E,l,s,t,r,e),n!==null&&(c.length===0?h?we(h):h=ae(()=>n(l)):h!==null&&Ue(h,()=>{h=null}))}ke(()=>{_??=$e,c=k(y);var m=c.length;if(g&&m===0)return;g=m===0;let p=!1;if(w){var T=Le(l)===qe;T!==(m===0)&&(l=le(),B(l),Y(!1),p=!0)}if(w){for(var D=null,b,u=0;u<m;u++){if(H.nodeType===Pe&&H.data===Ce){l=H,p=!0,Y(!1);break}var d=c[u],S=r(d,u);b=re(H,i,D,null,d,S,u,s,t,e),i.items.set(S,b),D=b}m>0&&B(le())}if(w)m===0&&n&&(h=ae(()=>n(l)));else if(ze()){var I=new Set,C=O;for(u=0;u<m;u+=1){d=c[u],S=r(d,u);var N=i.items.get(S)??E.get(S);N?(t&(U|V))!==0&&Me(N,d,u,t):(b=re(null,i,null,null,d,S,u,s,t,e,!0),E.set(S,b)),I.add(S)}for(const[A,z]of i.items)I.has(A)||C.skipped_effects.add(z.e);C.add_callback(f)}else f();p&&Y(!0),k(y)}),w&&(l=H)}function ba(a,t,e,r,s,n,l,i,v){var o=(l&Ge)!==0,h=(l&(U|V))!==0,g=t.length,E=e.items,y=e.first,c=y,_,f=null,m,p=[],T=[],D,b,u,d;if(o)for(d=0;d<g;d+=1)D=t[d],b=i(D,d),u=E.get(b),u!==void 0&&(u.a?.measure(),(m??=new Set).add(u));for(d=0;d<g;d+=1){if(D=t[d],b=i(D,d),u=E.get(b),u===void 0){var S=r.get(b);if(S!==void 0){r.delete(b),E.set(b,S);var I=f?f.next:c;M(e,f,S),M(e,S,I),Q(S,I,s),f=S}else{var C=c?c.e.nodes_start:s;f=re(C,e,f,f===null?e.first:f.next,D,b,d,n,l,v)}E.set(b,f),p=[],T=[],c=f.next;continue}if(h&&Me(u,D,d,l),(u.e.f&K)!==0&&(we(u.e),o&&(u.a?.unfix(),(m??=new Set).delete(u))),u!==c){if(_!==void 0&&_.has(u)){if(p.length<T.length){var N=T[0],A;f=N.prev;var z=p[0],G=p[p.length-1];for(A=0;A<p.length;A+=1)Q(p[A],N,s);for(A=0;A<T.length;A+=1)_.delete(T[A]);M(e,z.prev,G.next),M(e,f,z),M(e,G,N),c=N,f=G,d-=1,p=[],T=[]}else _.delete(u),Q(u,c,s),M(e,u.prev,u.next),M(e,u,f===null?e.first:f.next),M(e,f,u),f=u;continue}for(p=[],T=[];c!==null&&c.k!==b;)(c.e.f&K)===0&&(_??=new Set).add(c),T.push(c),c=c.next;if(c===null)continue;u=c}p.push(u),f=u,c=u.next}if(c!==null||_!==void 0){for(var R=_===void 0?[]:ye(_);c!==null;)(c.e.f&K)===0&&R.push(c),c=c.next;var j=R.length;if(j>0){var xe=(l&Te)!==0&&g===0?s:null;if(o){for(d=0;d<j;d+=1)R[d].a?.measure();for(d=0;d<j;d+=1)R[d].a?.fix()}ma(e,R,xe)}}o&&te(()=>{if(m!==void 0)for(u of m)u.a?.apply()}),a.first=e.first&&e.first.e,a.last=f&&f.e;for(var Oe of r.values())ge(Oe.e);r.clear()}function Me(a,t,e,r){(r&U)!==0&&oe(a.v,t),(r&V)!==0?oe(a.i,e):a.i=e}function re(a,t,e,r,s,n,l,i,v,o,h){var g=(v&U)!==0,E=(v&Ve)===0,y=g?E?Fe(s,!1,!1):ie(s):s,c=(v&V)===0?l:ie(l),_={i:c,v:y,k:n,a:null,e:null,prev:e,next:r};try{if(a===null){var f=document.createDocumentFragment();f.append(a=Se())}return _.e=ae(()=>i(a,y,c,o),w),_.e.prev=e&&e.e,_.e.next=r&&r.e,e===null?h||(t.first=_):(e.next=_,e.e.next=_.e),r!==null&&(r.prev=_,r.e.prev=_.e),_}finally{}}function Q(a,t,e){for(var r=a.next?a.next.e.nodes_start:e,s=t?t.e.nodes_start:e,n=a.e.nodes_start;n!==null&&n!==r;){var l=je(n);s.before(n),n=l}}function M(a,t,e){t===null?a.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}const he=[...` 	
\r\fÂ \v\uFEFF`];function pa(a,t,e){var r=a==null?"":""+a;if(t&&(r=r?r+" "+t:t),e){for(var s in e)if(e[s])r=r?r+" "+s:s;else if(r.length)for(var n=s.length,l=0;(l=r.indexOf(s,l))>=0;){var i=l+n;(l===0||he.includes(r[l-1]))&&(i===r.length||he.includes(r[i]))?r=(l===0?"":r.substring(0,l))+r.substring(i+1):l=i}}return r===""?null:r}function Ha(a,t){return a==null?null:String(a)}function Sa(a,t,e,r,s,n){var l=a.__className;if(w||l!==e||l===void 0){var i=pa(e,r,n);(!w||i!==a.getAttribute("class"))&&(i==null?a.removeAttribute("class"):a.className=i),a.__className=e}else if(n&&s!==n)for(var v in n){var o=!!n[v];(s==null||o!==!!s[v])&&a.classList.toggle(v,o)}return n}const Ta=Symbol("is custom element"),ya=Symbol("is html");function La(a){if(w){var t=!1,e=()=>{if(!t){if(t=!0,a.hasAttribute("value")){var r=a.value;_e(a,"value",null),a.value=r}if(a.hasAttribute("checked")){var s=a.checked;_e(a,"checked",null),a.checked=s}}};a.__on_r=e,Ze(e),ea()}}function qa(a,t){var e=ne(a);e.value===(e.value=t??void 0)||a.value===t&&(t!==0||a.nodeName!=="PROGRESS")||(a.value=t??"")}function Pa(a,t){var e=ne(a);e.checked!==(e.checked=t??void 0)&&(a.checked=t)}function _e(a,t,e,r){var s=ne(a);w&&(s[t]=a.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&a.nodeName==="LINK")||s[t]!==(s[t]=e)&&(t==="loading"&&(a[aa]=e),e==null?a.removeAttribute(t):typeof e!="string"&&wa(a).includes(t)?a[t]=e:a.setAttribute(t,e))}function ne(a){return a.__attributes??={[Ta]:a.nodeName.includes("-"),[ya]:a.namespaceURI===Qe}}var me=new Map;function wa(a){var t=a.getAttribute("is")||a.nodeName,e=me.get(t);if(e)return e;me.set(t,e=[]);for(var r,s=a,n=Element.prototype;n!==s;){r=Xe(s);for(var l in r)r[l].set&&e.push(l);s=We(s)}return e}function Ca(a,t,e=t){var r=new WeakSet;Ee(a,"input",async s=>{var n=s?a.defaultValue:a.value;if(n=X(a)?Z(n):n,e(n),O!==null&&r.add(O),await ta(),n!==(n=t())){var l=a.selectionStart,i=a.selectionEnd;a.value=n??"",i!==null&&(a.selectionStart=l,a.selectionEnd=Math.min(i,a.value.length))}}),(w&&a.defaultValue!==a.value||ra(t)==null&&a.value)&&(e(X(a)?Z(a.value):a.value),O!==null&&r.add(O)),De(()=>{var s=t();if(a===document.activeElement){var n=sa??O;if(r.has(n))return}X(a)&&s===Z(a.value)||a.type==="date"&&!s&&!a.value||s!==a.value&&(a.value=s??"")})}const W=new Set;function za(a,t,e,r,s=r){var n=e.getAttribute("type")==="checkbox",l=a;let i=!1;if(t!==null)for(var v of t)l=l[v]??=[];l.push(e),Ee(e,"change",()=>{var o=e.__value;n&&(o=be(l,o,e.checked)),s(o)},()=>s(n?[]:null)),De(()=>{var o=r();if(w&&e.defaultChecked!==e.checked){i=!0;return}n?(o=o||[],e.checked=o.includes(e.__value)):e.checked=na(e.__value,o)}),la(()=>{var o=l.indexOf(e);o!==-1&&l.splice(o,1)}),W.has(l)||(W.add(l),te(()=>{l.sort((o,h)=>o.compareDocumentPosition(h)===4?-1:1),W.delete(l)})),te(()=>{if(i){var o;if(n)o=be(l,o,e.checked);else{var h=l.find(g=>g.checked);o=h?.__value}s(o)}})}function be(a,t,e){for(var r=new Set,s=0;s<a.length;s+=1)a[s].checked&&r.add(a[s].__value);return e||r.delete(t),Array.from(r)}function X(a){var t=a.type;return t==="number"||t==="range"}function Z(a){return a===""?null:+a}function ga(){const{subscribe:a,update:t}=P([]);return{subscribe:a,add:(e,r="success",s=3e3)=>{const n=Date.now()+Math.random(),l={id:n,message:e,type:r,duration:s};let i=!0;return t(v=>v.some(h=>h.message===e&&h.type===r)?(i=!1,v):[...v,l]),i?(s>0&&setTimeout(()=>{setTimeout(()=>{t(v=>v.filter(o=>o.id!==n))},300)},s),n):null},remove:e=>{t(r=>r.filter(s=>s.id!==e))},clear:()=>{t(()=>[])},success:(e,r=3e3)=>x.add(e,"success",r),error:(e,r=4e3)=>x.add(e,"error",r),warning:(e,r=3500)=>x.add(e,"warning",r),info:(e,r=3e3)=>x.add(e,"info",r)}}const x=ga();x.add;const Fa=(a,t)=>x.add(a,"success",t),Ja=(a,t)=>x.add(a,"error",t);var Ea=va('<div><div class="toast-content svelte-1rmoiu"><span class="material-symbols-outlined toast-icon svelte-1rmoiu"> </span> <span class="toast-message svelte-1rmoiu"> </span> <button class="toast-close svelte-1rmoiu" aria-label="Close notification"><span class="material-symbols-outlined svelte-1rmoiu">close</span></button></div></div>');function Ua(a,t){ia(t,!0);let e=$(t,"message",3,""),r=$(t,"type",3,"success"),s=$(t,"duration",3,3e3),n=ce(!0),l=ce(!1),i;ua(()=>(s()>0&&(i=setTimeout(()=>{v()},s())),()=>{i&&clearTimeout(i)}));function v(){ue(l,!0),setTimeout(()=>{ue(n,!1),t.onClose&&t.onClose()},300)}function o(y){switch(y){case"success":return"check_circle";case"error":return"error";case"warning":return"warning";case"info":return"info";default:return"check_circle"}}var h=ca(),g=da(h);{var E=y=>{var c=Ea();let _;var f=F(c),m=F(f),p=F(m,!0);J(m);var T=fe(m,2),D=F(T,!0);J(T);var b=fe(T,2);b.__click=v,J(f),J(c),ha((u,d)=>{_=Sa(c,1,`toast toast-${r()??""}`,"svelte-1rmoiu",_,u),ve(p,d),ve(D,e())},[()=>({"toast-visible":k(n)&&!k(l),"toast-hiding":k(l)}),()=>o(r())]),de(y,c)};_a(g,y=>{k(n)&&y(E)})}de(a,h),fa()}oa(["click"]);function Da(){const{subscribe:a,update:t}=P([]);return{subscribe:a,open:(e,r={},s={})=>{const n=Date.now()+Math.random(),l={id:n,component:e,props:r,options:{closable:!0,backdrop:!0,size:"medium",...s}};return t(i=>[...i,l]),n},close:e=>{t(r=>r.filter(s=>s.id!==e))},closeTop:()=>{t(e=>e.length>0?e.slice(0,-1):e)},closeAll:()=>{t(()=>[])},confirm:(e,r,s,n,l={})=>L.open("ConfirmModal",{title:e,message:r,onConfirm:s,onCancel:n,onDelete:l.onDelete,deleteText:l.deleteText},{size:l.size||"small",closable:l.closable!==!1}),confirmLarge:(e,r,s,n)=>L.open("ConfirmModal",{title:e,message:r,onConfirm:s,onCancel:n},{size:"large",closable:!1}),alert:(e,r,s)=>L.open("AlertModal",{title:e,message:r,onClose:s},{size:"small"}),prompt:(e,r,s="",n,l)=>L.open("PromptModal",{title:e,message:r,placeholder:s,defaultValue:"",inputValue:"",onSubmit:n,onCancel:l},{size:"medium"}),form:(e,r,s,n,l,i,v,o={})=>L.open("FormModal",{title:e,message:r,field1Label:s.label||"Field 1",field1Type:s.type||"text",field1Placeholder:s.placeholder||"Enter value...",field1Value:s.value||"",field1Min:s.min,field1Max:s.max,field1Disabled:s.disabled||!1,field1DisabledReason:s.disabledReason||"",field2Label:n.label||"Field 2",field2Type:n.type||"text",field2Placeholder:n.placeholder||"Enter value...",field2Value:n.value||"",field2Min:n.min,field2Max:n.max,field2Disabled:n.disabled||!1,field2DisabledReason:n.disabledReason||"",onSubmit:l,onCancel:i,onDelete:v,deleteDisabled:o.deleteDisabled||!1,deleteDisabledReason:o.deleteDisabledReason||""},{size:o.size||"medium",closable:o.closable!==!1})}}const L=Da(),se="authState";function pe(){try{const a=localStorage.getItem(se);if(a){const t=JSON.parse(a);if(t&&typeof t.isAuthenticated=="boolean")return t}}catch(a){console.warn("Failed to parse stored auth state:",a),localStorage.removeItem(se)}return{isAuthenticated:!1,userType:null,userData:null}}function ee(a){try{localStorage.setItem(se,JSON.stringify(a))}catch(t){console.warn("Failed to save auth state to localStorage:",t)}}function Aa(){const a=pe(),{subscribe:t,set:e,update:r}=P(a);return{subscribe:t,login:(s,n)=>{const l={isAuthenticated:!0,userType:s,userData:n};e(l),ee(l)},logout:async()=>{const s=Ae(Ne);if(s.isAuthenticated&&s.userData&&s.userType==="admin")try{await fetch("/api/activity-logs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({activity_type:"user_logout",user_id:s.userData.id,user_account_number:s.userData.accountNumber,activity_data:{full_name:s.userData.name,account_type:s.userType}})})}catch(l){console.error("Failed to log logout activity:",l)}const n={isAuthenticated:!1,userType:null,userData:null};e(n),ee(n)},updateUserData:s=>{r(n=>{const l={...n,userData:s};return ee(l),l})},initialize:()=>{const s=pe();e(s)}}}const Ne=Aa();async function q(a,t={}){const e=Ae(Ne),r={"Content-Type":"application/json",...t.headers};if(e.isAuthenticated&&e.userData){const n={id:e.userData.id,name:e.userData.name,account_number:e.userData.accountNumber,account_type:e.userData.account_type||e.userData.accountType};r["x-user-info"]=JSON.stringify(n),r["x-user-id"]=e.userData.id.toString(),r["x-user-account-number"]=e.userData.accountNumber,r["x-user-name"]=encodeURIComponent(e.userData.name)}const s={...t,headers:r};try{return await fetch(a,s)}catch(n){throw console.error("Fetch error:",n),n}}const Va={get:async(a,t={})=>{const e=await q(a,{...t,method:"GET"});if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);return e.json()},post:async(a,t,e={})=>{const r=await q(a,{...e,method:"POST",body:JSON.stringify(t)});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);return r.json()},put:async(a,t,e={})=>{const r=await q(a,{...e,method:"PUT",body:JSON.stringify(t)});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);return r.json()},delete:async(a,t,e={})=>{const r=await q(a,{...e,method:"DELETE",body:t?JSON.stringify(t):void 0});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);return r.json()},patch:async(a,t,e={})=>{const r=await q(a,{...e,method:"PATCH",body:JSON.stringify(t)});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);return r.json()}};function Ma(){const{subscribe:a,set:t,update:e}=P({isOpen:!1,request:null,requestStatuses:[],modalStatuses:[],onUpdate:null,onReject:null});return{subscribe:a,open:(r,s,n,l,i)=>{t({isOpen:!0,request:r,requestStatuses:s,modalStatuses:n,onUpdate:l,onReject:i})},close:()=>{t({isOpen:!1,request:null,requestStatuses:[],modalStatuses:[],onUpdate:null,onReject:null})}}}const Ga=Ma();function Na(){const{subscribe:a,set:t,update:e}=P({isOpen:!1,request:null,onCancel:null,onRefresh:null});return{subscribe:a,open:(r,s,n)=>{t({isOpen:!0,request:r,onCancel:s,onRefresh:n})},close:()=>{t({isOpen:!1,request:null,onCancel:null,onRefresh:null})}}}const ja=Na();export{Ua as T,_e as a,q as b,Ca as c,Ne as d,Ra as e,qa as f,Ga as g,Va as h,Ia as i,ja as j,Ha as k,Fa as l,L as m,Ja as n,Pa as o,za as p,La as r,Sa as s,x as t};
